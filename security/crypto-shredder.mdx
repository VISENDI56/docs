---
title: Crypto Shredder (IP-02)
description: Data is not deleted; it is cryptographically dissolved
---

## Overview

IP-02 Crypto Shredder implements a revolutionary approach to data deletion: instead of attempting to securely erase data, we encrypt it with ephemeral keys and then **shred the keys** after the retention period.

<Card
  title="Philosophy"
  icon="fire"
>
  "Data is not deleted; it is cryptographically dissolved."
</Card>

## Why Crypto Shredder?

Traditional data deletion is problematic:

- **Incomplete deletion** - Data remnants persist on disk
- **Backup complications** - Deleted data remains in backups
- **Compliance gaps** - Hard to prove data is truly gone
- **Performance impact** - Secure deletion is slow

Crypto Shredder solves all of these:

âœ… **Cryptographic guarantee** - Data is mathematically irrecoverable  
âœ… **Backup-safe** - Encrypted data in backups is useless without key  
âœ… **Compliance-ready** - Provable data dissolution  
âœ… **High performance** - Key deletion is instant  

## How it works

<Steps>
  <Step title="Encrypt with ephemeral key">
    Generate a unique 256-bit AES key for each data record
  </Step>
  <Step title="Store encrypted data">
    Save encrypted data with retention metadata
  </Step>
  <Step title="Store key separately">
    Save key in separate key storage with expiration date
  </Step>
  <Step title="Wait for retention period">
    Data remains accessible during retention window
  </Step>
  <Step title="Shred the key">
    Overwrite key with random data (DoD 5220.22-M standard)
  </Step>
  <Step title="Data is dissolved">
    Encrypted data is now cryptographically irrecoverable
  </Step>
</Steps>

## Basic usage

```python
from governance_kernel.crypto_shredder import CryptoShredder, RetentionPolicy, SovereigntyZone

# Initialize Crypto Shredder
shredder = CryptoShredder(
    key_storage_path="./keys",
    sovereignty_zone=SovereigntyZone.KENYA,
    enable_audit=True
)

# Encrypt patient data
patient_data = b"Patient ID: 12345, Diagnosis: Malaria, Location: Dadaab"

encrypted_data, key_id = shredder.encrypt_with_ephemeral_key(
    data=patient_data,
    retention_policy=RetentionPolicy.HOT,
    metadata={
        "patient_id": "12345",
        "jurisdiction": "KDPA_KE",
        "data_type": "PHI"
    }
)

print(f"âœ… Encrypted - Key ID: {key_id}")
```

## Retention policies

iLuminara supports four retention policies aligned with global frameworks:

| Policy | Duration | Use Case | Compliance |
|--------|----------|----------|------------|
| **HOT** | 180 days | Active operational data | GDPR Art. 17 |
| **WARM** | 365 days | Compliance minimum | HIPAA Â§164.530(j) |
| **COLD** | 1825 days | Legal hold maximum | GDPR Art. 17 |
| **ETERNAL** | Never expires | Requires explicit justification | Special cases only |

### Example: Different retention policies

```python
# Active surveillance data (6 months)
encrypted_hot, key_hot = shredder.encrypt_with_ephemeral_key(
    data=surveillance_data,
    retention_policy=RetentionPolicy.HOT
)

# Clinical records (1 year minimum for HIPAA)
encrypted_warm, key_warm = shredder.encrypt_with_ephemeral_key(
    data=clinical_record,
    retention_policy=RetentionPolicy.WARM
)

# Legal hold (5 years maximum for GDPR)
encrypted_cold, key_cold = shredder.encrypt_with_ephemeral_key(
    data=legal_record,
    retention_policy=RetentionPolicy.COLD
)
```

## Decryption

Decrypt data while the key is still available:

```python
# Decrypt data
decrypted_data = shredder.decrypt_with_key(encrypted_data, key_id)

if decrypted_data:
    print(f"âœ… Decrypted: {decrypted_data.decode()}")
else:
    print("âŒ Key shredded - Data irrecoverable")
```

## Key shredding

### Manual shredding

```python
# Manually shred a key
success = shredder.shred_key(key_id)

if success:
    print(f"ğŸ”¥ Key shredded - Data irrecoverable: {key_id}")
```

### Automatic shredding

The Crypto Shredder automatically shreds expired keys:

```python
# Auto-shred all expired keys
shredded_count = shredder.auto_shred_expired_keys()

print(f"ğŸ”¥ Auto-shred complete - {shredded_count} keys shredded")
```

### Scheduled auto-shredding

Configure automatic shredding in `config/sovereign_guardrail.yaml`:

```yaml
retention:
  auto_shred_enabled: true
  auto_shred_schedule: "0 2 * * *"  # Daily at 2 AM UTC
```

## Key lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KEY LIFECYCLE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CREATED                ACTIVE              EXPIRED
     â”‚                     â”‚                    â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
     â”‚   Retention Period  â”‚                    â”‚
     â”‚   (HOT: 180 days)   â”‚                    â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                 â”‚
                                            AUTO-SHRED
                                                 â”‚
                                                 â–¼
                                            DISSOLVED
                                    (Data irrecoverable)
```

## Sovereignty zones

The Crypto Shredder enforces data residency by sovereignty zone:

```python
from governance_kernel.crypto_shredder import SovereigntyZone

# Kenya (KDPA jurisdiction)
shredder_ke = CryptoShredder(sovereignty_zone=SovereigntyZone.KENYA)

# European Union (GDPR jurisdiction)
shredder_eu = CryptoShredder(sovereignty_zone=SovereigntyZone.EU)

# South Africa (POPIA jurisdiction)
shredder_za = CryptoShredder(sovereignty_zone=SovereigntyZone.SOUTH_AFRICA)

# Canada (PIPEDA jurisdiction)
shredder_ca = CryptoShredder(sovereignty_zone=SovereigntyZone.CANADA)

# USA (HIPAA jurisdiction)
shredder_us = CryptoShredder(sovereignty_zone=SovereigntyZone.USA)
```

## Audit trail

Every Crypto Shredder operation is logged:

```python
# Get key status
status = shredder.get_key_status(key_id)

print(f"""
Key Status:
  Key ID: {status['key_id']}
  Created: {status['created_at']}
  Expires: {status['expires_at']}
  Retention Policy: {status['retention_policy']}
  Sovereignty Zone: {status['sovereignty_zone']}
  Shredded: {status['shredded']}
""")
```

### Audit log format

```json
{
  "timestamp": "2025-12-23T16:00:00.000Z",
  "action": "ENCRYPT",
  "key_id": "a3f5c8d2e1b4f7a9",
  "sovereignty_zone": "africa-south1",
  "metadata": {
    "patient_id": "12345",
    "jurisdiction": "KDPA_KE",
    "data_type": "PHI"
  }
}
```

## Integration with SovereignGuardrail

The Crypto Shredder integrates with the Governance Kernel:

```python
from governance_kernel.vector_ledger import SovereignGuardrail
from governance_kernel.crypto_shredder import CryptoShredder

guardrail = SovereignGuardrail()
shredder = CryptoShredder()

# Validate before encryption
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'retention_policy': 'HOT'
    },
    jurisdiction='KDPA_KE'
)

# Encrypt with validated parameters
encrypted_data, key_id = shredder.encrypt_with_ephemeral_key(
    data=patient_data,
    retention_policy=RetentionPolicy.HOT
)
```

## Compliance mapping

| Framework | Requirement | Crypto Shredder Implementation |
|-----------|-------------|-------------------------------|
| **GDPR Art. 17** | Right to Erasure | Key shredding = data dissolution |
| **HIPAA Â§164.530(j)** | Documentation | Tamper-proof audit trail |
| **NIST SP 800-88** | Media Sanitization | DoD 5220.22-M key overwrite |
| **ISO 27001 A.8.3.2** | Disposal of Media | Cryptographic dissolution |
| **POPIA Â§14** | Data Retention | Automatic expiration enforcement |

## Performance

- **Encryption**: ~1ms per record (AES-256-GCM)
- **Decryption**: ~1ms per record
- **Key shredding**: <1ms (instant)
- **Auto-shred**: ~100 keys/second

## Security guarantees

<AccordionGroup>
  <Accordion title="Cryptographic strength">
    AES-256-GCM with 256-bit keys provides 2^256 security (computationally infeasible to break)
  </Accordion>
  <Accordion title="Key isolation">
    Keys stored separately from encrypted data, preventing correlation attacks
  </Accordion>
  <Accordion title="Secure deletion">
    Keys overwritten with random data per DoD 5220.22-M standard
  </Accordion>
  <Accordion title="Backup safety">
    Encrypted data in backups is useless without keys (which are shredded)
  </Accordion>
  <Accordion title="Audit integrity">
    Tamper-proof audit trail with cryptographic signatures
  </Accordion>
</AccordionGroup>

## Best practices

<Steps>
  <Step title="Use appropriate retention policies">
    Match retention policy to data sensitivity and legal requirements
  </Step>
  <Step title="Enable audit logging">
    Always enable audit trail for compliance attestation
  </Step>
  <Step title="Configure auto-shredding">
    Set up scheduled auto-shredding to prevent key accumulation
  </Step>
  <Step title="Monitor key lifecycle">
    Track key expiration and shredding metrics
  </Step>
  <Step title="Test recovery procedures">
    Verify that shredded data is truly irrecoverable
  </Step>
</Steps>

## Testing

```python
# Test Crypto Shredder
def test_crypto_shredder():
    shredder = CryptoShredder()
    
    # Encrypt
    data = b"Sensitive patient data"
    encrypted, key_id = shredder.encrypt_with_ephemeral_key(
        data=data,
        retention_policy=RetentionPolicy.HOT
    )
    
    # Decrypt (should work)
    decrypted = shredder.decrypt_with_key(encrypted, key_id)
    assert decrypted == data
    
    # Shred key
    shredder.shred_key(key_id)
    
    # Decrypt (should fail)
    decrypted = shredder.decrypt_with_key(encrypted, key_id)
    assert decrypted is None
    
    print("âœ… Crypto Shredder test passed")

test_crypto_shredder()
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="SovereignGuardrail"
    icon="shield-check"
    href="/governance/overview"
  >
    Integrate with compliance enforcement
  </Card>
  <Card
    title="Retention policies"
    icon="clock"
    href="/governance/retention"
  >
    Configure data retention rules
  </Card>
  <Card
    title="Audit trail"
    icon="file-contract"
    href="/governance/audit"
  >
    Set up tamper-proof logging
  </Card>
  <Card
    title="Security stack"
    icon="shield-halved"
    href="/security/overview"
  >
    Complete security architecture
  </Card>
</CardGroup>
