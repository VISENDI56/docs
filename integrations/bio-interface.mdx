---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit health data that automatically integrates with the Golden Thread data fusion engine. All submissions are validated against sovereignty constraints and fused with EMR and IDSR data streams.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity"
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│      MOBILE HEALTH APPS             │
│  - CHV devices                      │
│  - Patient self-reporting           │
│  - IoT sensors                      │
└─────────────────┬───────────────────┘
                  │
                  ▼ HTTPS/TLS 1.3
┌─────────────────────────────────────┐
│      BIO-INTERFACE API              │
│  - Sovereignty validation           │
│  - Consent verification             │
│  - Data normalization               │
└─────────────────┬───────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│      GOLDEN THREAD                  │
│  - CBS signal creation              │
│  - Multi-source fusion              │
│  - Verification scoring             │
└─────────────────┬───────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│      STORAGE & ALERTS               │
│  - BigQuery (analytics)             │
│  - PubSub (real-time alerts)        │
│  - Spanner (audit trail)            │
└─────────────────────────────────────┘
```

## Base URL

```
http://localhost:8081  # Local development
https://bio-interface.iluminara.health  # Production
```

## Authentication

Production deployments require authentication:

```bash
# Get access token
TOKEN=$(gcloud auth print-identity-token)

# Make authenticated request
curl -H "Authorization: Bearer $TOKEN" \
  https://bio-interface.iluminara.health/api/v1/submit-health-data
```

## Endpoints

### Health check

```http
GET /health
```

**Response:**

```json
{
  "status": "healthy",
  "service": "Bio-Interface API",
  "version": "1.0.0",
  "timestamp": "2025-12-25T18:00:00.000Z",
  "fortress_status": "OPERATIONAL"
}
```

### Submit health data

```http
POST /api/v1/submit-health-data
```

**Request body:**

```json
{
  "patient_id": "PAT_12345",
  "data_type": "symptom_report",
  "data": {
    "symptoms": ["fever", "cough"],
    "severity": 7,
    "onset_date": "2025-01-15"
  },
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "source": "mobile_app",
  "consent_token": "CONSENT_TOKEN_123",
  "jurisdiction": "KDPA_KE"
}
```

**Response:**

```json
{
  "status": "success",
  "timestamp": "2025-12-25T18:00:00.000Z",
  "record_id": "REC_789",
  "verification_score": 0.85,
  "golden_thread": {
    "fused": true,
    "sources": ["CBS", "EMR"],
    "confidence": 0.85
  },
  "compliance": {
    "sovereignty_validated": true,
    "jurisdiction": "KDPA_KE",
    "consent_verified": true
  }
}
```

### Submit voice alert

```http
POST /api/v1/submit-voice-alert
```

**Request (multipart/form-data):**

```bash
curl -X POST http://localhost:8081/api/v1/submit-voice-alert \
  -F "audio=@swahili-symptom.wav" \
  -F "patient_id=PAT_12345" \
  -F "lat=0.0512" \
  -F "lng=40.3129" \
  -F "consent_token=CONSENT_TOKEN_123" \
  -F "jurisdiction=KDPA_KE"
```

**Response:**

```json
{
  "status": "success",
  "timestamp": "2025-12-25T18:00:00.000Z",
  "transcription": "Patient reporting fever and cough",
  "symptoms": ["fever", "cough"],
  "severity": 6,
  "record_id": "REC_790",
  "verification_score": 0.75,
  "golden_thread": {
    "fused": true,
    "sources": ["CBS"],
    "confidence": 0.75
  }
}
```

### Get patient timeline

```http
GET /api/v1/get-patient-timeline?patient_id=PAT_12345&start_date=2025-01-01&end_date=2025-01-31
```

**Response:**

```json
{
  "status": "success",
  "patient_id": "PAT_12345",
  "timeline": [
    {
      "timestamp": "2025-01-15T08:00:00.000Z",
      "data_type": "symptom_report",
      "symptoms": ["fever", "cough"],
      "verification_score": 0.85,
      "sources": ["CBS", "EMR"]
    }
  ],
  "record_count": 1,
  "verification_summary": {
    "confirmed": 1,
    "probable": 0,
    "unverified": 0
  }
}
```

### Calculate outbreak risk

```http
POST /api/v1/outbreak-risk
```

**Request body:**

```json
{
  "location": {"lat": 0.0512, "lng": 40.3129},
  "radius_km": 10,
  "time_window_days": 7
}
```

**Response:**

```json
{
  "status": "success",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "risk_score": 0.45,
  "risk_level": "MEDIUM",
  "timestamp": "2025-12-25T18:00:00.000Z",
  "recommendations": [
    "Increase surveillance in the area",
    "Monitor for symptom clusters",
    "Prepare rapid response team"
  ]
}
```

## Data types

### Symptom report

```json
{
  "data_type": "symptom_report",
  "data": {
    "symptoms": ["fever", "cough", "fatigue"],
    "severity": 7,
    "onset_date": "2025-01-15",
    "duration_days": 3
  }
}
```

### Vital signs

```json
{
  "data_type": "vital_signs",
  "data": {
    "temperature": 38.5,
    "heart_rate": 95,
    "blood_pressure": "120/80",
    "respiratory_rate": 18
  }
}
```

### Diagnosis

```json
{
  "data_type": "diagnosis",
  "data": {
    "diagnosis": "malaria",
    "icd_code": "B50.9",
    "confidence": 0.92,
    "provider_id": "DR_456"
  }
}
```

### Lab result

```json
{
  "data_type": "lab_result",
  "data": {
    "test_type": "rapid_diagnostic_test",
    "result": "positive",
    "pathogen": "plasmodium_falciparum"
  }
}
```

## Golden Thread integration

All submitted data automatically becomes a CBS (Community-Based Surveillance) signal:

```python
# CBS signal creation
cbs_signal = {
    'patient_id': 'PAT_12345',
    'location': {'lat': 0.0512, 'lng': 40.3129},
    'timestamp': '2025-12-25T18:00:00.000Z',
    'data_type': 'symptom_report',
    'data': {...},
    'source': 'mobile_app'
}

# Fuse with Golden Thread
fused_record = golden_thread.fuse_data_streams(
    cbs_signal=cbs_signal,
    patient_id='PAT_12345'
)

# Verification score
# 1.0 = CONFIRMED (CBS + EMR match)
# 0.5 = UNVERIFIED (CBS only)
```

## Sovereignty validation

All submissions are validated against sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate before processing
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': 'CONSENT_TOKEN_123',
        'consent_scope': 'symptom_report'
    },
    jurisdiction='KDPA_KE'
)
```

## Real-time alerts

High-severity submissions (severity ≥ 7) trigger PubSub alerts:

```json
{
  "alert_type": "HIGH_SEVERITY_SYMPTOM",
  "patient_id": "PAT_12345",
  "severity": 9,
  "location": {"lat": 0.0512, "lng": 40.3129},
  "timestamp": "2025-12-25T18:00:00.000Z",
  "verification_score": 0.85
}
```

## Mobile SDK examples

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitHealthData(
        patientId: String,
        symptoms: List<String>,
        severity: Int,
        location: Pair<Double, Double>,
        consentToken: String
    ): Response {
        val json = JSONObject().apply {
            put("patient_id", patientId)
            put("data_type", "symptom_report")
            put("data", JSONObject().apply {
                put("symptoms", symptoms)
                put("severity", severity)
            })
            put("location", JSONObject().apply {
                put("lat", location.first)
                put("lng", location.second)
            })
            put("consent_token", consentToken)
            put("jurisdiction", "KDPA_KE")
        }
        
        val body = RequestBody.create(
            MediaType.parse("application/json"),
            json.toString()
        )
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/submit-health-data")
            .post(body)
            .build()
        
        return client.newCall(request).execute()
    }
}
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitHealthData(
        patientId: String,
        symptoms: [String],
        severity: Int,
        location: (lat: Double, lng: Double),
        consentToken: String,
        completion: @escaping (Result<Data, Error>) -> Void
    ) {
        let url = URL(string: "\\(baseURL)/api/v1/submit-health-data")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "patient_id": patientId,
            "data_type": "symptom_report",
            "data": [
                "symptoms": symptoms,
                "severity": severity
            ],
            "location": [
                "lat": location.lat,
                "lng": location.lng
            ],
            "consent_token": consentToken,
            "jurisdiction": "KDPA_KE"
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
            } else if let data = data {
                completion(.success(data))
            }
        }.resume()
    }
}
```

### React Native (JavaScript)

```javascript
class ILuminaraClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }
  
  async submitHealthData({
    patientId,
    symptoms,
    severity,
    location,
    consentToken
  }) {
    const response = await fetch(`${this.baseURL}/api/v1/submit-health-data`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        patient_id: patientId,
        data_type: 'symptom_report',
        data: {
          symptoms,
          severity
        },
        location,
        consent_token: consentToken,
        jurisdiction: 'KDPA_KE'
      })
    });
    
    return await response.json();
  }
}
```

## Deployment

### Local development

```bash
# Install dependencies
pip install flask flask-cors google-cloud-pubsub

# Set environment variables
export BIO_INTERFACE_PORT=8081
export PUBSUB_ALERT_TOPIC=projects/iluminara/topics/health-alerts

# Run API
python integrations/bio_interface_api.py
```

### Production (Cloud Run)

```bash
# Deploy to Cloud Run
gcloud run deploy bio-interface-api \
  --source integrations/ \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars BIO_INTERFACE_PORT=8080,PUBSUB_ALERT_TOPIC=projects/iluminara/topics/health-alerts
```

## Error handling

| Error Code | HTTP Status | Description |
|-----------|-------------|-------------|
| `missing_field` | 400 | Required field missing |
| `sovereignty_violation` | 403 | Action violates compliance rules |
| `no_audio_data` | 400 | No audio file provided |
| `missing_patient_id` | 400 | patient_id required |
| `processing_failed` | 500 | Internal processing error |

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integrations/vertex-ai-shap"
  >
    Add explainable AI to your app
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure sovereignty constraints
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy to production
  </Card>
</CardGroup>
