---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the Golden Thread protocol for data fusion from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity preservation"
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│    MOBILE HEALTH APPS               │
│  - CHV data collection              │
│  - Patient symptom reporting        │
│  - IoT sensor integration           │
└─────────────────────────────────────┘
              │
              │ HTTPS/TLS 1.3
              ▼
┌─────────────────────────────────────┐
│    BIO-INTERFACE REST API           │
│  - /health (health check)           │
│  - /process-voice (voice alerts)    │
│  - /submit-cbs (CBS signals)        │
│  - /submit-emr (EMR records)        │
│  - /predict (outbreak prediction)   │
└─────────────────────────────────────┘
              │
              │ Validation
              ▼
┌─────────────────────────────────────┐
│    SOVEREIGN GUARDRAIL              │
│  - Consent validation               │
│  - Data sovereignty check           │
│  - Audit trail logging              │
└─────────────────────────────────────┘
              │
              │ Fusion
              ▼
┌─────────────────────────────────────┐
│    GOLDEN THREAD                    │
│  - Merge CBS + EMR + IDSR           │
│  - Cross-source verification        │
│  - Verified timeline creation       │
└─────────────────────────────────────┘
```

## Base URL

**Local development:**
```
http://localhost:8080
```

**Production (Cloud Run):**
```
https://iluminara-api-<hash>-uc.a.run.app
```

## Authentication

### Development
No authentication required for local testing.

### Production
Use Google Cloud IAM or API keys:

```bash
# Generate API key
gcloud alpha services api-keys create \
  --display-name="iLuminara Mobile App" \
  --api-target=service=iluminara-api-uc.a.run.app

# Use in requests
curl -H "X-API-Key: YOUR_API_KEY" \
  https://iluminara-api-uc.a.run.app/health
```

## Core endpoints

### Health check

```http
GET /health
```

**Response:**
```json
{
  "status": "healthy",
  "service": "iLuminara Bio-Interface API",
  "version": "1.0.0",
  "timestamp": "2025-12-23T18:00:00Z",
  "node_id": "JOR-47",
  "jurisdiction": "KDPA_KE"
}
```

### Submit CBS signal

Community Health Volunteer submits symptom observation.

```http
POST /submit-cbs
Content-Type: application/json
```

**Request:**
```json
{
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "symptoms": ["fever", "diarrhea", "vomiting"],
  "severity": 8,
  "timestamp": "2025-12-23T10:30:00Z",
  "patient_consent": "verbal_emergency",
  "notes": "Patient reports 3 days of symptoms"
}
```

**Response:**
```json
{
  "status": "success",
  "cbs_signal_id": "CBS_20251223_001",
  "verification_status": "PENDING",
  "message": "CBS signal recorded. Awaiting EMR correlation.",
  "golden_thread_id": "GT_PAT_12345"
}
```

### Submit EMR record

Clinic submits electronic medical record.

```http
POST /submit-emr
Content-Type: application/json
```

**Request:**
```json
{
  "facility_id": "DADAAB_CLINIC_01",
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "diagnosis": "cholera",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "lab_results": {
    "rapid_test": "positive",
    "culture": "pending"
  },
  "timestamp": "2025-12-23T11:00:00Z",
  "consent_token": "CONSENT_PAT_12345_20251223"
}
```

**Response:**
```json
{
  "status": "success",
  "emr_record_id": "EMR_20251223_001",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "message": "EMR record fused with CBS signal. Verification: CONFIRMED",
  "golden_thread_id": "GT_PAT_12345",
  "matched_cbs_signals": ["CBS_20251223_001"]
}
```

### Process voice alert

Convert voice recording to structured health data.

```http
POST /process-voice
Content-Type: audio/wav
```

**Request:**
```bash
curl -X POST http://localhost:8080/process-voice \
  -H "Content-Type: audio/wav" \
  --data-binary @swahili-symptom.wav
```

**Response:**
```json
{
  "status": "success",
  "timestamp": "2025-12-23T18:00:00Z",
  "processing_time_ms": 4200,
  "transcription": "Patient reporting severe watery diarrhea and vomiting",
  "language_detected": "swahili",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "alert_level": "CRITICAL",
  "cbs_signal_id": "CBS_VOICE_20251223_001",
  "recommendations": [
    "IMMEDIATE: Suspected cholera. Start ORS immediately.",
    "Isolate patient to prevent spread",
    "Notify district health officer"
  ]
}
```

### Outbreak prediction

Predict outbreak risk based on symptoms and location.

```http
POST /predict
Content-Type: application/json
```

**Request:**
```json
{
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "symptoms": ["diarrhea", "vomiting"],
  "time_window_days": 7
}
```

**Response:**
```json
{
  "status": "success",
  "prediction": {
    "disease": "cholera",
    "risk_score": 0.87,
    "z_score": 8.5,
    "alert_level": "HIGH",
    "forecasted_cases": {
      "24h": 15,
      "48h": 28,
      "72h": 45
    },
    "confidence_interval": {
      "lower": 12,
      "upper": 52
    }
  },
  "recommendations": [
    "Activate emergency response protocol",
    "Deploy rapid response team",
    "Initiate contact tracing"
  ]
}
```

## Golden Thread integration

The Bio-Interface automatically fuses CBS and EMR signals using the Golden Thread protocol.

### Verification logic

```python
from edge_node.sync_protocol.golden_thread import GoldenThread

gt = GoldenThread()

# Submit CBS signal
cbs_response = requests.post('http://localhost:8080/submit-cbs', json={
    'chv_id': 'CHV_AMINA',
    'location': {'lat': 0.0512, 'lng': 40.3129},
    'symptoms': ['fever', 'diarrhea'],
    'timestamp': '2025-12-23T10:30:00Z'
})

cbs_signal_id = cbs_response.json()['cbs_signal_id']

# Submit EMR record (30 minutes later)
emr_response = requests.post('http://localhost:8080/submit-emr', json={
    'facility_id': 'DADAAB_CLINIC',
    'patient_id': 'PAT_12345',
    'location': {'lat': 0.0512, 'lng': 40.3129},
    'diagnosis': 'malaria',
    'timestamp': '2025-12-23T11:00:00Z'
})

# Golden Thread automatically fuses signals
# Verification score: 1.0 (CONFIRMED)
# - Same location ✓
# - Time delta < 24h ✓
```

## Mobile SDK examples

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitCBSSignal(
        chvId: String,
        location: Location,
        symptoms: List<String>,
        severity: Int
    ): CBSResponse {
        val json = JSONObject().apply {
            put("chv_id", chvId)
            put("location", JSONObject().apply {
                put("lat", location.latitude)
                put("lng", location.longitude)
            })
            put("symptoms", JSONArray(symptoms))
            put("severity", severity)
            put("timestamp", System.currentTimeMillis())
        }
        
        val request = Request.Builder()
            .url("$baseUrl/submit-cbs")
            .post(json.toString().toRequestBody("application/json".toMediaType()))
            .build()
        
        val response = client.newCall(request).execute()
        return CBSResponse.fromJson(response.body?.string())
    }
    
    fun processVoiceAlert(audioFile: File): VoiceResponse {
        val requestBody = audioFile.asRequestBody("audio/wav".toMediaType())
        
        val request = Request.Builder()
            .url("$baseUrl/process-voice")
            .post(requestBody)
            .build()
        
        val response = client.newCall(request).execute()
        return VoiceResponse.fromJson(response.body?.string())
    }
}
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitCBSSignal(
        chvId: String,
        location: CLLocation,
        symptoms: [String],
        severity: Int,
        completion: @escaping (Result<CBSResponse, Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/submit-cbs")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "chv_id": chvId,
            "location": [
                "lat": location.coordinate.latitude,
                "lng": location.coordinate.longitude
            ],
            "symptoms": symptoms,
            "severity": severity,
            "timestamp": ISO8601DateFormatter().string(from: Date())
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            guard let data = data else {
                completion(.failure(NSError(domain: "NoData", code: -1)))
                return
            }
            
            let cbsResponse = try? JSONDecoder().decode(CBSResponse.self, from: data)
            completion(.success(cbsResponse!))
        }.resume()
    }
}
```

### React Native (JavaScript)

```javascript
class ILuminaraClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }
  
  async submitCBSSignal({ chvId, location, symptoms, severity }) {
    const response = await fetch(`${this.baseURL}/submit-cbs`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        chv_id: chvId,
        location: {
          lat: location.latitude,
          lng: location.longitude,
        },
        symptoms,
        severity,
        timestamp: new Date().toISOString(),
      }),
    });
    
    return await response.json();
  }
  
  async processVoiceAlert(audioUri) {
    const formData = new FormData();
    formData.append('audio', {
      uri: audioUri,
      type: 'audio/wav',
      name: 'voice-alert.wav',
    });
    
    const response = await fetch(`${this.baseURL}/process-voice`, {
      method: 'POST',
      headers: {
        'Content-Type': 'audio/wav',
      },
      body: formData,
    });
    
    return await response.json();
  }
}
```

## Offline support

The Bio-Interface supports offline operation with queue-and-sync:

```javascript
class OfflineQueue {
  constructor(client) {
    this.client = client;
    this.queue = [];
  }
  
  async submitCBSSignal(data) {
    if (navigator.onLine) {
      return await this.client.submitCBSSignal(data);
    } else {
      // Queue for later
      this.queue.push({ type: 'cbs', data });
      await this.saveQueue();
      return { status: 'queued', message: 'Will sync when online' };
    }
  }
  
  async syncQueue() {
    if (!navigator.onLine || this.queue.length === 0) return;
    
    const results = [];
    for (const item of this.queue) {
      try {
        const result = await this.client.submitCBSSignal(item.data);
        results.push(result);
      } catch (error) {
        console.error('Sync failed:', error);
        break; // Stop on first failure
      }
    }
    
    // Remove synced items
    this.queue = this.queue.slice(results.length);
    await this.saveQueue();
    
    return results;
  }
}
```

## Sovereignty compliance

All Bio-Interface endpoints enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Transfer',
    payload={
        'data_type': 'PHI',
        'destination': 'Edge_Node',
        'processing_location': 'Local',
        'consent_token': request.json.get('consent_token')
    },
    jurisdiction='KDPA_KE'
)
```

## Rate limiting

**Development:** No limits

**Production:**
- Voice processing: 10 requests/minute per IP
- CBS/EMR submission: 100 requests/minute per IP
- Outbreak prediction: 100 requests/minute per IP

## Error handling

All endpoints return consistent error format:

```json
{
  "status": "error",
  "error": "missing_consent_token",
  "message": "Consent token required for PHI processing",
  "code": 400,
  "timestamp": "2025-12-23T18:00:00Z"
}
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Detailed voice API documentation
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Mobile SDKs"
    icon="mobile"
    href="/integrations/mobile-sdks"
  >
    Download official mobile SDKs
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy API to production
  </Card>
</CardGroup>
