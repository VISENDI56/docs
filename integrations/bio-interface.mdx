---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit CBS (Community-Based Surveillance) and EMR (Electronic Medical Records) data using the Golden Thread protocol.

<Card
  title="Verification"
  icon="check-double"
>
  Signals are tagged as CONFIRMED only if location and time-delta match within 24 hours
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│      MOBILE HEALTH APP              │
│  - CHV data collection              │
│  - Patient symptom reporting        │
└─────────────────────────────────────┘
              │
              ▼ HTTPS/TLS 1.3
┌─────────────────────────────────────┐
│      BIO-INTERFACE API              │
│  - Sovereignty validation           │
│  - Consent verification             │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│      GOLDEN THREAD                  │
│  - CBS + EMR fusion                 │
│  - Verification scoring             │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│      CLOUD ORACLE                   │
│  - BigQuery storage                 │
│  - Vertex AI forecasting            │
└─────────────────────────────────────┘
```

## Base URL

```
http://localhost:8080/api/v1
```

For production: `https://api.iluminara.health/api/v1`

## Authentication

Currently uses consent tokens. For production, implement:

- OAuth 2.0
- JWT tokens
- API keys with rate limiting

## Core endpoints

### Health check

```bash
GET /health
```

**Response:**

```json
{
  "status": "healthy",
  "service": "Bio-Interface API",
  "version": "1.0.0",
  "timestamp": "2025-12-26T10:00:00.000Z",
  "compliance": {
    "GDPR": "enforced",
    "HIPAA": "enforced",
    "KDPA": "enforced"
  }
}
```

### Submit CBS signal

```bash
POST /api/v1/cbs/submit
```

**Request:**

```json
{
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "symptom": "fever",
  "severity": 7,
  "timestamp": "2025-12-26T10:00:00Z",
  "consent_token": "VALID_TOKEN",
  "jurisdiction": "KDPA_KE"
}
```

**Response:**

```json
{
  "status": "success",
  "signal_id": "CBS_12345",
  "verification_status": "PENDING",
  "message": "CBS signal recorded. Awaiting EMR correlation.",
  "timestamp": "2025-12-26T10:00:00.000Z"
}
```

### Submit EMR record

```bash
POST /api/v1/emr/submit
```

**Request:**

```json
{
  "patient_id": "PAT_12345",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "diagnosis": "malaria",
  "symptoms": ["fever", "chills", "headache"],
  "timestamp": "2025-12-26T10:30:00Z",
  "facility_id": "DADAAB_CLINIC",
  "consent_token": "VALID_TOKEN",
  "jurisdiction": "KDPA_KE"
}
```

**Response:**

```json
{
  "status": "success",
  "record_id": "EMR_12345",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "message": "EMR recorded and verified with CBS signal.",
  "timestamp": "2025-12-26T10:30:00.000Z"
}
```

### Fuse data streams

```bash
POST /api/v1/golden-thread/fuse
```

**Request:**

```json
{
  "cbs_signal": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "fever",
    "timestamp": "2025-12-26T10:00:00Z"
  },
  "emr_record": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "diagnosis": "malaria",
    "timestamp": "2025-12-26T10:30:00Z"
  },
  "patient_id": "PAT_12345"
}
```

**Response:**

```json
{
  "status": "success",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "fused_record": {
    "patient_id": "PAT_12345",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "fever",
    "diagnosis": "malaria",
    "cbs_timestamp": "2025-12-26T10:00:00Z",
    "emr_timestamp": "2025-12-26T10:30:00Z",
    "time_delta_hours": 0.5,
    "verification_score": 1.0
  },
  "timestamp": "2025-12-26T10:30:00.000Z"
}
```

### Get verification status

```bash
GET /api/v1/verification/status?patient_id=PAT_12345
```

**Response:**

```json
{
  "status": "success",
  "verification_score": 0.95,
  "verification_status": "CONFIRMED",
  "matched_records": [],
  "timestamp": "2025-12-26T10:30:00.000Z"
}
```

### Validate consent

```bash
POST /api/v1/consent/validate
```

**Request:**

```json
{
  "consent_token": "TOKEN_12345",
  "patient_id": "PAT_12345",
  "scope": "diagnosis",
  "jurisdiction": "KDPA_KE"
}
```

**Response:**

```json
{
  "status": "success",
  "valid": true,
  "expires_at": "2026-12-26T10:00:00Z",
  "timestamp": "2025-12-26T10:00:00.000Z"
}
```

## Verification scores

| Score | Status | Description |
|-------|--------|-------------|
| 1.0 | CONFIRMED | Location and time match within 24h |
| 0.7-0.9 | PROBABLE | Partial agreement with minor conflicts |
| 0.4-0.6 | POSSIBLE | Significant conflicts but plausible |
| 0.0-0.3 | UNVERIFIED | Major conflicts or single source only |

## Error responses

### Sovereignty violation

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Data processing violates sovereignty constraints"
}
```

### Missing fields

```json
{
  "status": "error",
  "error": "Missing required fields: location, timestamp"
}
```

### Invalid consent

```json
{
  "status": "error",
  "valid": false,
  "error": "Consent token expired or invalid"
}
```

## Mobile SDK examples

### Android (Kotlin)

```kotlin
import retrofit2.http.*

interface BioInterfaceAPI {
    @POST("api/v1/cbs/submit")
    suspend fun submitCBSSignal(
        @Body signal: CBSSignal
    ): Response<CBSResponse>
    
    @POST("api/v1/emr/submit")
    suspend fun submitEMRRecord(
        @Body record: EMRRecord
    ): Response<EMRResponse>
}

// Usage
val api = Retrofit.Builder()
    .baseUrl("https://api.iluminara.health/")
    .addConverterFactory(GsonConverterFactory.create())
    .build()
    .create(BioInterfaceAPI::class.java)

val signal = CBSSignal(
    chvId = "CHV_AMINA_HASSAN",
    location = Location(0.0512, 40.3129),
    symptom = "fever",
    severity = 7,
    timestamp = "2025-12-26T10:00:00Z",
    consentToken = "VALID_TOKEN",
    jurisdiction = "KDPA_KE"
)

val response = api.submitCBSSignal(signal)
```

### iOS (Swift)

```swift
import Foundation

struct CBSSignal: Codable {
    let chvId: String
    let location: Location
    let symptom: String
    let severity: Int
    let timestamp: String
    let consentToken: String
    let jurisdiction: String
}

func submitCBSSignal(signal: CBSSignal) async throws -> CBSResponse {
    let url = URL(string: "https://api.iluminara.health/api/v1/cbs/submit")!
    var request = URLRequest(url: url)
    request.httpMethod = "POST"
    request.setValue("application/json", forHTTPHeaderField: "Content-Type")
    request.httpBody = try JSONEncoder().encode(signal)
    
    let (data, _) = try await URLSession.shared.data(for: request)
    return try JSONDecoder().decode(CBSResponse.self, from: data)
}
```

### React Native (JavaScript)

```javascript
const submitCBSSignal = async (signal) => {
  const response = await fetch('https://api.iluminara.health/api/v1/cbs/submit', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(signal),
  });
  
  return await response.json();
};

// Usage
const signal = {
  chv_id: 'CHV_AMINA_HASSAN',
  location: { lat: 0.0512, lng: 40.3129 },
  symptom: 'fever',
  severity: 7,
  timestamp: new Date().toISOString(),
  consent_token: 'VALID_TOKEN',
  jurisdiction: 'KDPA_KE',
};

const result = await submitCBSSignal(signal);
console.log(result);
```

## Deployment

### Start the API server

```bash
python integrations/bio_interface_api.py
```

### Docker deployment

```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8080

CMD ["python", "integrations/bio_interface_api.py"]
```

```bash
docker build -t bio-interface-api .
docker run -p 8080:8080 bio-interface-api
```

### GCP Cloud Run deployment

```bash
# Build and deploy
gcloud run deploy bio-interface-api \
  --source . \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars JURISDICTION=KDPA_KE
```

## Security considerations

<AccordionGroup>
  <Accordion title="TLS encryption">
    All production endpoints must use TLS 1.3 for data in transit
  </Accordion>
  <Accordion title="Rate limiting">
    Implement rate limiting: 100 requests/minute per IP
  </Accordion>
  <Accordion title="Consent validation">
    All requests validate consent tokens through SovereignGuardrail
  </Accordion>
  <Accordion title="Data sovereignty">
    PHI never leaves sovereign territory without explicit authorization
  </Accordion>
  <Accordion title="Audit logging">
    All API calls logged to tamper-proof audit trail
  </Accordion>
</AccordionGroup>

## Compliance

The Bio-Interface API enforces:

- **GDPR Art. 9** - Special categories of personal data
- **HIPAA §164.312** - Technical safeguards
- **Kenya DPA §37** - Transfer restrictions
- **POPIA §14** - Cross-border transfers

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integrations/vertex-ai-shap"
  >
    Add explainable AI predictions
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure sovereignty constraints
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy to production
  </Card>
</CardGroup>
