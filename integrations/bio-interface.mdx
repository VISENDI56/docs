---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the **Golden Thread protocol** to fuse data streams from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity"
</Card>

## Architecture

```
┌─────────────────────────────────────────────────────────┐
│              MOBILE HEALTH APPS                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │   CHV App    │  │  Clinic App  │  │  Patient App │ │
│  │  (Flutter)   │  │  (React)     │  │  (Flutter)   │ │
│  └──────────────┘  └──────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────┘
                         │
                         │ HTTPS / REST
                         ▼
┌─────────────────────────────────────────────────────────┐
│              BIO-INTERFACE API                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │  /api/v1/cbs/submit                              │  │
│  │  /api/v1/emr/submit                              │  │
│  │  /api/v1/patient/register                        │  │
│  │  /api/v1/outbreak/status                         │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                         │
                         │ Golden Thread Fusion
                         ▼
┌─────────────────────────────────────────────────────────┐
│              GOLDEN THREAD ENGINE                       │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Data Fusion (CBS + EMR + IDSR)                  │  │
│  │  Verification Score Calculation                  │  │
│  │  Conflict Resolution                             │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                         │
                         │ Validated Data
                         ▼
┌─────────────────────────────────────────────────────────┐
│              SOVEREIGN GUARDRAIL                        │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Consent Validation                              │  │
│  │  Data Sovereignty Check                          │  │
│  │  Audit Trail Logging                             │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

## API endpoints

### Submit CBS report

Community Health Volunteers submit field observations.

**Endpoint:** `POST /api/v1/cbs/submit`

**Request:**

```json
{
  \"chv_id\": \"CHV_AMINA_HASSAN\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Dadaab Refugee Camp\"
  },
  \"timestamp\": \"2025-12-23T10:30:00Z\",
  \"symptoms\": [\"diarrhea\", \"vomiting\", \"dehydration\"],
  \"severity\": 9,
  \"patient_count\": 1,
  \"notes\": \"Patient reporting severe watery diarrhea since yesterday\",
  \"consent_token\": \"EMERGENCY_CHV_ALERT\"
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"cbs_id\": \"CBS_20251223_001\",
  \"verification_status\": \"PENDING\",
  \"message\": \"CBS report submitted successfully\",
  \"next_steps\": [
    \"Report will be verified against EMR records\",
    \"Alert sent to district health officer\",
    \"Follow-up required within 24 hours\"
  ]
}
```

### Submit EMR record

Clinics submit confirmed diagnoses.

**Endpoint:** `POST /api/v1/emr/submit`

**Request:**

```json
{
  \"clinic_id\": \"DADAAB_CLINIC_001\",
  \"patient_id\": \"PAT_12345\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Dadaab Refugee Camp\"
  },
  \"timestamp\": \"2025-12-23T11:00:00Z\",
  \"diagnosis\": \"cholera\",
  \"symptoms\": [\"diarrhea\", \"vomiting\", \"dehydration\"],
  \"lab_confirmed\": true,
  \"treatment\": \"ORS + IV fluids\",
  \"consent_token\": \"PATIENT_CONSENT_12345\"
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"emr_id\": \"EMR_20251223_001\",
  \"verification_status\": \"CONFIRMED\",
  \"verification_score\": 1.0,
  \"matched_cbs_reports\": [\"CBS_20251223_001\"],
  \"message\": \"EMR record submitted and verified\",
  \"alert_level\": \"CRITICAL\",
  \"outbreak_risk\": 0.87
}
```

### Register patient

Register new patient with consent management.

**Endpoint:** `POST /api/v1/patient/register`

**Request:**

```json
{
  \"patient_id\": \"PAT_12345\",
  \"name\": \"[ENCRYPTED]\",
  \"age\": 35,
  \"gender\": \"F\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Dadaab Refugee Camp\"
  },
  \"consent\": {
    \"scope\": [\"diagnosis\", \"treatment\", \"public_health_surveillance\"],
    \"expiration_date\": \"2026-12-23\",
    \"signature\": \"[DIGITAL_SIGNATURE]\"
  }
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"patient_id\": \"PAT_12345\",
  \"consent_token\": \"PATIENT_CONSENT_12345\",
  \"message\": \"Patient registered successfully\",
  \"data_retention_policy\": \"HOT (180 days)\"
}
```

### Get outbreak status

Query current outbreak status for a location.

**Endpoint:** `GET /api/v1/outbreak/status`

**Query parameters:**
- `lat` (required): Latitude
- `lng` (required): Longitude
- `radius_km` (optional): Search radius in kilometers (default: 10)

**Response:**

```json
{
  \"status\": \"success\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Dadaab Refugee Camp\"
  },
  \"outbreak_status\": \"ACTIVE\",
  \"alert_level\": \"CRITICAL\",
  \"diseases\": [
    {
      \"disease\": \"cholera\",
      \"case_count\": 47,
      \"trend\": \"INCREASING\",
      \"r_effective\": 2.8,
      \"forecast_72h\": [55, 68, 82]
    }
  ],
  \"recommendations\": [
    \"Increase water chlorination\",
    \"Distribute ORS packets\",
    \"Establish isolation ward\",
    \"Notify WHO IHR focal point\"
  ]
}
```

## Golden Thread verification

The Bio-Interface automatically applies Golden Thread verification:

```python
from edge_node.sync_protocol.golden_thread import GoldenThread
from flask import Flask, request, jsonify

app = Flask(__name__)
gt = GoldenThread()

@app.route('/api/v1/emr/submit', methods=['POST'])
def submit_emr():
    data = request.json
    
    # Submit EMR record
    emr_record = {
        'location': data['location']['name'],
        'diagnosis': data['diagnosis'],
        'timestamp': data['timestamp'],
        'source': data['clinic_id']
    }
    
    # Check for matching CBS reports
    cbs_reports = find_matching_cbs_reports(
        location=data['location'],
        timestamp=data['timestamp']
    )
    
    # Fuse data streams
    if cbs_reports:
        fused = gt.fuse_data_streams(
            cbs_signal=cbs_reports[0],
            emr_record=emr_record,
            patient_id=data['patient_id']
        )
        
        verification_status = \"CONFIRMED\" if fused.verification_score >= 0.8 else \"PROBABLE\"
        verification_score = fused.verification_score
    else:
        verification_status = \"UNVERIFIED\"
        verification_score = 0.3
    
    return jsonify({
        'status': 'success',
        'emr_id': generate_emr_id(),
        'verification_status': verification_status,
        'verification_score': verification_score,
        'matched_cbs_reports': [r['cbs_id'] for r in cbs_reports]
    })
```

## Verification logic

The Golden Thread uses cross-source verification:

```
IF cbs.location == emr.location AND |cbs.timestamp - emr.timestamp| < 24h
    THEN verification_score = 1.0 (CONFIRMED)
    ELSE score degrades based on conflict severity
```

| Verification Score | Status | Description |
|-------------------|--------|-------------|
| 1.0 | CONFIRMED | Multiple sources agree |
| 0.7-0.9 | PROBABLE | Partial agreement |
| 0.4-0.6 | POSSIBLE | Significant conflicts |
| 0.0-0.3 | UNVERIFIED | Single source only |

## Mobile app integration

### Flutter example (CHV App)

```dart
import 'package:http/http.dart' as http;
import 'dart:convert';

class ILuminaraAPI {
  final String baseUrl = 'https://api.iluminara.health';
  
  Future<Map<String, dynamic>> submitCBSReport({
    required String chvId,
    required double lat,
    required double lng,
    required List<String> symptoms,
    required int severity,
    String? notes,
  }) async {
    final response = await http.post(
      Uri.parse('$baseUrl/api/v1/cbs/submit'),
      headers: {'Content-Type': 'application/json'},
      body: jsonEncode({
        'chv_id': chvId,
        'location': {
          'lat': lat,
          'lng': lng,
        },
        'timestamp': DateTime.now().toIso8601String(),
        'symptoms': symptoms,
        'severity': severity,
        'patient_count': 1,
        'notes': notes,
        'consent_token': 'EMERGENCY_CHV_ALERT',
      }),
    );
    
    if (response.statusCode == 200) {
      return jsonDecode(response.body);
    } else {
      throw Exception('Failed to submit CBS report');
    }
  }
  
  Future<Map<String, dynamic>> getOutbreakStatus({
    required double lat,
    required double lng,
    double radiusKm = 10.0,
  }) async {
    final response = await http.get(
      Uri.parse('$baseUrl/api/v1/outbreak/status?lat=$lat&lng=$lng&radius_km=$radiusKm'),
    );
    
    if (response.statusCode == 200) {
      return jsonDecode(response.body);
    } else {
      throw Exception('Failed to get outbreak status');
    }
  }
}

// Usage
final api = ILuminaraAPI();

final result = await api.submitCBSReport(
  chvId: 'CHV_AMINA_HASSAN',
  lat: 0.0512,
  lng: 40.3129,
  symptoms: ['diarrhea', 'vomiting'],
  severity: 9,
  notes: 'Patient reporting severe symptoms',
);

print('CBS ID: ${result['cbs_id']}');
```

### React example (Clinic App)

```javascript
import axios from 'axios';

const API_BASE_URL = 'https://api.iluminara.health';

export const submitEMRRecord = async (data) => {
  try {
    const response = await axios.post(
      `${API_BASE_URL}/api/v1/emr/submit`,
      {
        clinic_id: data.clinicId,
        patient_id: data.patientId,
        location: {
          lat: data.location.lat,
          lng: data.location.lng,
          name: data.location.name,
        },
        timestamp: new Date().toISOString(),
        diagnosis: data.diagnosis,
        symptoms: data.symptoms,
        lab_confirmed: data.labConfirmed,
        treatment: data.treatment,
        consent_token: data.consentToken,
      },
      {
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${data.authToken}`,
        },
      }
    );
    
    return response.data;
  } catch (error) {
    console.error('Failed to submit EMR record:', error);
    throw error;
  }
};

// Usage
const result = await submitEMRRecord({
  clinicId: 'DADAAB_CLINIC_001',
  patientId: 'PAT_12345',
  location: { lat: 0.0512, lng: 40.3129, name: 'Dadaab' },
  diagnosis: 'cholera',
  symptoms: ['diarrhea', 'vomiting'],
  labConfirmed: true,
  treatment: 'ORS + IV fluids',
  consentToken: 'PATIENT_CONSENT_12345',
  authToken: 'YOUR_AUTH_TOKEN',
});

console.log('EMR ID:', result.emr_id);
console.log('Verification Score:', result.verification_score);
```

## Sovereignty compliance

All Bio-Interface operations enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': 'EMERGENCY_CHV_ALERT',
        'consent_scope': 'public_health_surveillance'
    },
    jurisdiction='KDPA_KE'
)
```

## Offline support

The Bio-Interface supports offline operation with sync-when-online:

```dart
// Queue report for later submission
await offlineQueue.add(cbsReport);

// Sync when connectivity returns
if (await connectivity.isOnline()) {
  await offlineQueue.syncAll();
}
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="API reference"
    icon="terminal"
    href="/api-reference/overview"
  >
    Complete API documentation
  </Card>
  <Card
    title="Mobile SDKs"
    icon="mobile"
    href="/integrations/mobile-sdks"
  >
    Flutter and React Native SDKs
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy Bio-Interface API
  </Card>
</CardGroup>
