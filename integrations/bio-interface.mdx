---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the Golden Thread data fusion protocol. It provides endpoints for voice alerts, symptom reporting, EMR synchronization, and real-time outbreak alerts.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Offline-first, sovereignty-native mobile health integration."
</Card>

## Key features

<CardGroup cols={2}>
  <Card title="Voice alerts" icon="microphone">
    CHV voice recording submission with automatic transcription
  </Card>
  <Card title="Symptom reporting" icon="notes-medical">
    Patient self-reporting with CBS signal creation
  </Card>
  <Card title="EMR sync" icon="hospital">
    Clinic EMR integration with Golden Thread fusion
  </Card>
  <Card title="Offline-first" icon="wifi-slash">
    Queue data offline, sync when connected
  </Card>
</CardGroup>

## Base URL

```
http://localhost:8080/api/v1
```

For production: `https://api.iluminara.health/api/v1`

## Authentication

All requests require:

```http
X-Consent-Token: <consent_token>
X-CHV-ID: <chv_identifier>  # For CHV endpoints
Authorization: Bearer <jwt_token>  # For production
```

## Endpoints

### Health check

```http
GET /health
```

**Response:**

```json
{
  "status": "healthy",
  "service": "iLuminara Bio-Interface API",
  "version": "1.0.0",
  "timestamp": "2025-12-24T08:00:00.000Z"
}
```

### Submit voice alert

```http
POST /api/v1/voice-alert
Content-Type: audio/wav
X-Consent-Token: EMERGENCY_CHV_ALERT
X-CHV-ID: CHV_AMINA_HASSAN
```

**Query parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `language` | string | No | Language of audio (default: "swahili") |
| `lat` | float | No | Latitude coordinate |
| `lng` | float | No | Longitude coordinate |

**Request body:** Audio file (WAV format, 16kHz, mono)

**Response:**

```json
{
  "status": "success",
  "voice_result": {
    "transcription": "Patient reporting severe watery diarrhea and vomiting",
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "severity": 9,
    "alert_level": "CRITICAL",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "timestamp": "2025-12-24T08:00:00.000Z"
  },
  "cbs_signal": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "diarrhea",
    "timestamp": "2025-12-24T08:00:00.000Z",
    "source": "CHV_AMINA_HASSAN",
    "severity": 9,
    "alert_level": "CRITICAL"
  },
  "verification_score": 0.8,
  "alert_published": true
}
```

### Submit symptom report

```http
POST /api/v1/symptom-report
Content-Type: application/json
X-Consent-Token: <consent_token>
```

**Request:**

```json
{
  "patient_id": "PAT_12345",
  "symptoms": ["fever", "cough", "fatigue"],
  "severity": 7,
  "location": {"lat": 0.0512, "lng": 40.3129},
  "onset_date": "2025-12-20",
  "consent_token": "VALID_TOKEN_ABC123"
}
```

**Response:**

```json
{
  "status": "success",
  "cbs_signal": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "fever",
    "timestamp": "2025-12-24T08:00:00.000Z",
    "source": "patient_app",
    "severity": 7,
    "onset_date": "2025-12-20"
  },
  "verification_score": 0.6,
  "alert_priority": "high"
}
```

### Sync EMR record

```http
POST /api/v1/emr-sync
Content-Type: application/json
X-Consent-Token: <consent_token>
```

**Request:**

```json
{
  "patient_id": "PAT_12345",
  "diagnosis": "malaria",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "timestamp": "2025-12-24T08:00:00.000Z",
  "clinic_id": "DADAAB_CLINIC_01",
  "consent_token": "VALID_TOKEN_ABC123"
}
```

**Response:**

```json
{
  "status": "success",
  "emr_record": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "diagnosis": "malaria",
    "timestamp": "2025-12-24T08:00:00.000Z",
    "source": "CLINIC_DADAAB_CLINIC_01"
  },
  "verification_score": 1.0,
  "fused_record": {
    "patient_id": "PAT_12345",
    "verified_diagnosis": "malaria",
    "confidence": "CONFIRMED"
  }
}
```

### Subscribe to alerts

```http
POST /api/v1/alerts/subscribe
Content-Type: application/json
```

**Request:**

```json
{
  "device_token": "FCM_TOKEN_XYZ789",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "radius_km": 50,
  "alert_types": ["outbreak", "critical_case"]
}
```

**Response:**

```json
{
  "status": "success",
  "message": "Subscription created",
  "subscription_id": "FCM_TOKEN_XYZ789"
}
```

### Offline sync

```http
POST /api/v1/offline-sync
Content-Type: application/json
```

**Request:**

```json
{
  "device_id": "DEVICE_ABC123",
  "sync_data": [
    {
      "type": "symptom_report",
      "data": {
        "patient_id": "PAT_12345",
        "symptoms": ["fever"],
        "severity": 6,
        "location": {"lat": 0.0512, "lng": 40.3129},
        "consent_token": "VALID_TOKEN"
      }
    },
    {
      "type": "voice_alert",
      "data": {
        "audio_base64": "...",
        "language": "swahili",
        "location": {"lat": 0.0512, "lng": 40.3129}
      }
    }
  ]
}
```

**Response:**

```json
{
  "status": "success",
  "synced_count": 2,
  "results": [
    {"type": "symptom_report", "status": "success", "result": {...}},
    {"type": "voice_alert", "status": "success", "result": {...}}
  ]
}
```

## Mobile SDK examples

### Android (Kotlin)

```kotlin
import okhttp3.*
import okhttp3.MediaType.Companion.toMediaType
import java.io.File

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitVoiceAlert(
        audioFile: File,
        language: String = "swahili",
        lat: Double,
        lng: Double,
        chvId: String,
        consentToken: String
    ): Response {
        val requestBody = audioFile.asRequestBody("audio/wav".toMediaType())
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/voice-alert?language=$language&lat=$lat&lng=$lng")
            .post(requestBody)
            .addHeader("X-Consent-Token", consentToken)
            .addHeader("X-CHV-ID", chvId)
            .build()
        
        return client.newCall(request).execute()
    }
    
    fun submitSymptomReport(
        patientId: String,
        symptoms: List<String>,
        severity: Int,
        location: Location,
        consentToken: String
    ): Response {
        val json = """
            {
                "patient_id": "$patientId",
                "symptoms": ${symptoms.joinToString(",", "[", "]") { "\"$it\"" }},
                "severity": $severity,
                "location": {"lat": ${location.latitude}, "lng": ${location.longitude}},
                "consent_token": "$consentToken"
            }
        """.trimIndent()
        
        val requestBody = json.toRequestBody("application/json".toMediaType())
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/symptom-report")
            .post(requestBody)
            .addHeader("X-Consent-Token", consentToken)
            .build()
        
        return client.newCall(request).execute()
    }
}

// Usage
val client = ILuminaraClient("https://api.iluminara.health")

val response = client.submitVoiceAlert(
    audioFile = File("/path/to/audio.wav"),
    language = "swahili",
    lat = 0.0512,
    lng = 40.3129,
    chvId = "CHV_AMINA_HASSAN",
    consentToken = "EMERGENCY_CHV_ALERT"
)
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitVoiceAlert(
        audioData: Data,
        language: String = "swahili",
        lat: Double,
        lng: Double,
        chvId: String,
        consentToken: String,
        completion: @escaping (Result<Data, Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/api/v1/voice-alert?language=\(language)&lat=\(lat)&lng=\(lng)")!
        
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("audio/wav", forHTTPHeaderField: "Content-Type")
        request.setValue(consentToken, forHTTPHeaderField: "X-Consent-Token")
        request.setValue(chvId, forHTTPHeaderField: "X-CHV-ID")
        request.httpBody = audioData
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            if let data = data {
                completion(.success(data))
            }
        }.resume()
    }
    
    func submitSymptomReport(
        patientId: String,
        symptoms: [String],
        severity: Int,
        location: (lat: Double, lng: Double),
        consentToken: String,
        completion: @escaping (Result<Data, Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/api/v1/symptom-report")!
        
        let payload: [String: Any] = [
            "patient_id": patientId,
            "symptoms": symptoms,
            "severity": severity,
            "location": ["lat": location.lat, "lng": location.lng],
            "consent_token": consentToken
        ]
        
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        request.setValue(consentToken, forHTTPHeaderField: "X-Consent-Token")
        request.httpBody = try? JSONSerialization.data(withJSONObject: payload)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            if let data = data {
                completion(.success(data))
            }
        }.resume()
    }
}

// Usage
let client = ILuminaraClient(baseURL: "https://api.iluminara.health")

client.submitVoiceAlert(
    audioData: audioData,
    language: "swahili",
    lat: 0.0512,
    lng: 40.3129,
    chvId: "CHV_AMINA_HASSAN",
    consentToken: "EMERGENCY_CHV_ALERT"
) { result in
    switch result {
    case .success(let data):
        print("✅ Voice alert submitted")
    case .failure(let error):
        print("❌ Error: \(error)")
    }
}
```

### React Native (JavaScript)

```javascript
class ILuminaraClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }

  async submitVoiceAlert(audioUri, language, lat, lng, chvId, consentToken) {
    const formData = new FormData();
    formData.append('audio', {
      uri: audioUri,
      type: 'audio/wav',
      name: 'alert.wav',
    });

    const response = await fetch(
      `${this.baseURL}/api/v1/voice-alert?language=${language}&lat=${lat}&lng=${lng}`,
      {
        method: 'POST',
        headers: {
          'X-Consent-Token': consentToken,
          'X-CHV-ID': chvId,
        },
        body: formData,
      }
    );

    return response.json();
  }

  async submitSymptomReport(patientId, symptoms, severity, location, consentToken) {
    const response = await fetch(`${this.baseURL}/api/v1/symptom-report`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-Consent-Token': consentToken,
      },
      body: JSON.stringify({
        patient_id: patientId,
        symptoms,
        severity,
        location,
        consent_token: consentToken,
      }),
    });

    return response.json();
  }

  async offlineSync(deviceId, syncData) {
    const response = await fetch(`${this.baseURL}/api/v1/offline-sync`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        device_id: deviceId,
        sync_data: syncData,
      }),
    });

    return response.json();
  }
}

// Usage
const client = new ILuminaraClient('https://api.iluminara.health');

const result = await client.submitVoiceAlert(
  audioUri,
  'swahili',
  0.0512,
  40.3129,
  'CHV_AMINA_HASSAN',
  'EMERGENCY_CHV_ALERT'
);

console.log('✅ Voice alert submitted:', result);
```

## Offline-first architecture

The Bio-Interface API supports offline-first mobile apps:

<Steps>
  <Step title="Queue locally">
    Store data in local SQLite/Realm database when offline
  </Step>
  <Step title="Detect connectivity">
    Monitor network status with connectivity listeners
  </Step>
  <Step title="Batch sync">
    Use `/api/v1/offline-sync` to upload queued data
  </Step>
  <Step title="Conflict resolution">
    Golden Thread resolves conflicts using verification scores
  </Step>
</Steps>

## Golden Thread integration

All mobile app data automatically integrates with the Golden Thread:

```
Mobile App → Bio-Interface API → CBS Signal → Golden Thread → Verified Timeline
```

**Verification logic:**
- Voice alerts create CBS signals
- Symptom reports create CBS signals
- EMR sync creates EMR records
- Golden Thread fuses CBS + EMR for verification

## Security considerations

<AccordionGroup>
  <Accordion title="Data sovereignty">
    All PHI processed at edge nodes within sovereign territory
  </Accordion>
  <Accordion title="Consent management">
    Every request requires valid consent token
  </Accordion>
  <Accordion title="TLS encryption">
    All API traffic encrypted with TLS 1.3
  </Accordion>
  <Accordion title="Rate limiting">
    10 requests/minute for voice alerts, 100/minute for symptom reports
  </Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain-circuit"
    href="/integrations/vertex-ai-shap"
  >
    Add explainable AI to mobile apps
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure compliance enforcement
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy API to production
  </Card>
</CardGroup>
