---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit health data that automatically integrates with the Golden Thread data fusion engine.

<Card
  title="Compliance"
  icon="shield-check"
>
  GDPR Art. 6, HIPAA §164.312, KDPA §37, WHO IHR (2005) Article 6
</Card>

## Features

<CardGroup cols={2}>
  <Card title="CBS signal submission" icon="users">
    Community Health Volunteers submit alerts from mobile devices
  </Card>
  <Card title="EMR record integration" icon="hospital">
    Clinic/hospital systems submit electronic medical records
  </Card>
  <Card title="Golden Thread verification" icon="link">
    Automatic cross-source verification and fusion
  </Card>
  <Card title="Offline queue support" icon="wifi-slash">
    Batch submission for offline-collected data
  </Card>
</CardGroup>

## Quick start

### Start the API

```bash
# Set environment variables
export NODE_ID=BIO-INTERFACE-01
export JURISDICTION=KDPA_KE
export BIO_INTERFACE_PORT=8081

# Start the API
python edge_node/bio_interface_api.py
```

The API starts on `http://localhost:8081`

### Health check

```bash
curl http://localhost:8081/health
```

**Response:**
```json
{
  "status": "healthy",
  "node_id": "BIO-INTERFACE-01",
  "jurisdiction": "KDPA_KE",
  "timestamp": "2025-12-25T10:00:00.000Z",
  "services": {
    "golden_thread": "operational",
    "sovereign_guardrail": "operational",
    "crypto_shredder": "operational"
  }
}
```

## Submit CBS signal

Community Health Volunteers submit surveillance alerts:

```bash
curl -X POST http://localhost:8081/api/v1/submit-cbs \
  -H "Content-Type: application/json" \
  -d '{
    "chv_id": "CHV_AMINA_HASSAN",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "diarrhea",
    "severity": 8,
    "patient_age": 5,
    "patient_gender": "F",
    "timestamp": "2025-12-25T10:00:00Z",
    "notes": "Severe watery diarrhea, suspected cholera"
  }'
```

**Response:**
```json
{
  "status": "success",
  "patient_id": "CBS_CHV_AMINA_HASSAN_20251225100000",
  "verification_score": 0.75,
  "key_id": "a3f8c2d1e5b9",
  "timestamp": "2025-12-25T10:00:05.000Z",
  "message": "CBS signal submitted and fused with Golden Thread"
}
```

### Request fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `chv_id` | string | Yes | Community Health Volunteer ID |
| `location` | object | Yes | GPS coordinates (lat, lng) |
| `symptom` | string | Yes | Primary symptom |
| `severity` | integer | No | Severity score (0-10) |
| `patient_age` | integer | No | Patient age in years |
| `patient_gender` | string | No | Patient gender (M/F/Other) |
| `timestamp` | string | Yes | ISO 8601 timestamp |
| `notes` | string | No | Additional notes |

## Submit EMR record

Clinic/hospital systems submit electronic medical records:

```bash
curl -X POST http://localhost:8081/api/v1/submit-emr \
  -H "Content-Type: application/json" \
  -d '{
    "facility_id": "DADAAB_CLINIC",
    "patient_id": "PAT_12345",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "diagnosis": "cholera",
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "lab_results": {"stool_culture": "positive_vibrio_cholerae"},
    "treatment": "ORS + IV fluids",
    "timestamp": "2025-12-25T10:30:00Z"
  }'
```

**Response:**
```json
{
  "status": "success",
  "patient_id": "PAT_12345",
  "verification_score": 0.95,
  "key_id": "b7e4f9a2c8d3",
  "timestamp": "2025-12-25T10:30:05.000Z",
  "message": "EMR record submitted and fused with Golden Thread"
}
```

### Request fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `facility_id` | string | Yes | Healthcare facility ID |
| `patient_id` | string | Yes | Patient identifier |
| `location` | object | Yes | GPS coordinates (lat, lng) |
| `diagnosis` | string | Yes | Clinical diagnosis |
| `symptoms` | array | No | List of symptoms |
| `lab_results` | object | No | Laboratory test results |
| `treatment` | string | No | Treatment provided |
| `timestamp` | string | Yes | ISO 8601 timestamp |
| `consent_token` | string | No | Patient consent token |

## Verify signal

Cross-reference a signal with Golden Thread:

```bash
curl -X POST http://localhost:8081/api/v1/verify-signal \
  -H "Content-Type: application/json" \
  -d '{
    "patient_id": "PAT_12345",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "timestamp": "2025-12-25T10:00:00Z"
  }'
```

**Response:**
```json
{
  "status": "success",
  "patient_id": "PAT_12345",
  "verification_score": 0.85,
  "verified": true,
  "timestamp": "2025-12-25T10:00:05.000Z"
}
```

## Batch submission

Submit multiple signals for offline queue sync:

```bash
curl -X POST http://localhost:8081/api/v1/batch-submit \
  -H "Content-Type: application/json" \
  -d '{
    "signals": [
      {
        "type": "cbs",
        "data": {
          "chv_id": "CHV_001",
          "location": {"lat": 0.05, "lng": 40.31},
          "symptom": "fever",
          "timestamp": "2025-12-25T09:00:00Z"
        }
      },
      {
        "type": "emr",
        "data": {
          "facility_id": "CLINIC_001",
          "patient_id": "PAT_001",
          "location": {"lat": 0.05, "lng": 40.31},
          "diagnosis": "malaria",
          "timestamp": "2025-12-25T09:30:00Z"
        }
      }
    ]
  }'
```

**Response:**
```json
{
  "status": "success",
  "total": 2,
  "successful": 2,
  "failed": 0,
  "results": [
    {
      "status": "success",
      "patient_id": "CBS_20251225090000",
      "verification_score": 0.75
    },
    {
      "status": "success",
      "patient_id": "PAT_001",
      "verification_score": 0.95
    }
  ],
  "timestamp": "2025-12-25T10:00:05.000Z"
}
```

## Golden Thread integration

All submissions automatically integrate with the Golden Thread:

```python
from edge_node.sync_protocol.golden_thread import GoldenThread

gt = GoldenThread()

# CBS signal from mobile app
cbs_signal = {
    'location': 'Dadaab',
    'symptom': 'diarrhea',
    'timestamp': '2025-12-25T10:00:00Z',
    'source': 'CHV_AMINA_HASSAN'
}

# EMR record from clinic
emr_record = {
    'location': 'Dadaab',
    'diagnosis': 'cholera',
    'timestamp': '2025-12-25T10:30:00Z',
    'source': 'DADAAB_CLINIC'
}

# Fuse streams
fused = gt.fuse_data_streams(
    cbs_signal=cbs_signal,
    emr_record=emr_record,
    patient_id='PAT_12345'
)

# Verification score: 1.0 (CONFIRMED)
# Both sources agree on location and time (<24h delta)
```

## Sovereignty validation

All submissions are validated against sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate data processing
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'source': 'CHV_MOBILE',
        'consent_token': 'CHV_EMERGENCY_ALERT'
    },
    jurisdiction='KDPA_KE'
)
```

## Data encryption

All sensitive data is encrypted with ephemeral keys:

```python
from governance_kernel.crypto_shredder import CryptoShredder, RetentionPolicy

shredder = CryptoShredder()

# Encrypt patient data
encrypted_data, key_id = shredder.encrypt_with_ephemeral_key(
    data=json.dumps(patient_data).encode(),
    retention_policy=RetentionPolicy.HOT,
    metadata={
        "patient_id": "PAT_12345",
        "jurisdiction": "KDPA_KE",
        "data_type": "CBS_SIGNAL"
    }
)

# After retention period, key is automatically shredded
# Data becomes cryptographically irrecoverable
```

## Error handling

### Common errors

| Error Code | HTTP Status | Description |
|------------|-------------|-------------|
| `missing_field` | 400 | Required field not provided |
| `sovereignty_violation` | 403 | Action violates compliance rules |
| `processing_failed` | 500 | Internal processing error |

### Example error response

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Violates KDPA §37 (Transfer Restrictions)"
}
```

## Mobile SDK example

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class BiointerfaceClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitCBSSignal(
        chvId: String,
        location: Pair<Double, Double>,
        symptom: String,
        severity: Int
    ) {
        val json = JSONObject().apply {
            put("chv_id", chvId)
            put("location", JSONObject().apply {
                put("lat", location.first)
                put("lng", location.second)
            })
            put("symptom", symptom)
            put("severity", severity)
            put("timestamp", System.currentTimeMillis())
        }
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/submit-cbs")
            .post(RequestBody.create(
                MediaType.parse("application/json"),
                json.toString()
            ))
            .build()
        
        client.newCall(request).execute().use { response ->
            if (response.isSuccessful) {
                println("✅ CBS signal submitted")
            }
        }
    }
}
```

### iOS (Swift)

```swift
import Foundation

class BioInterfaceClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitCBSSignal(
        chvId: String,
        location: (lat: Double, lng: Double),
        symptom: String,
        severity: Int
    ) {
        let url = URL(string: "\(baseURL)/api/v1/submit-cbs")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "chv_id": chvId,
            "location": ["lat": location.lat, "lng": location.lng],
            "symptom": symptom,
            "severity": severity,
            "timestamp": ISO8601DateFormatter().string(from: Date())
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                print("❌ Error: \(error)")
                return
            }
            print("✅ CBS signal submitted")
        }.resume()
    }
}
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integrations/vertex-ai-shap"
  >
    Explainable AI integration
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Data fusion engine
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Compliance enforcement
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy to production
  </Card>
</CardGroup>
