---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit data through iLuminara's Sovereign Health Fortress, ensuring all data flows through SovereignGuardrail validation, Golden Thread fusion, and Crypto Shredder lifecycle management.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Every mobile health signal becomes a verified thread in the sovereign tapestry."
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│   MOBILE HEALTH APP                 │
│  - CHV data collection              │
│  - Patient symptoms                 │
│  - GPS location                     │
└─────────────────────────────────────┘
              │ HTTPS/TLS 1.3
              ▼
┌─────────────────────────────────────┐
│   BIO-INTERFACE API                 │
│  - Request validation               │
│  - Privacy-preserving hashing       │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│   SOVEREIGNGUARDRAIL                │
│  - Compliance validation            │
│  - Consent verification             │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│   CRYPTO SHREDDER (IP-02)           │
│  - Ephemeral key encryption         │
│  - Retention policy enforcement     │
└─────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────┐
│   GOLDEN THREAD (IP-05)             │
│  - CBS + EMR fusion                 │
│  - Verification scoring             │
└─────────────────────────────────────┘
```

## API endpoints

### Health check

```bash
GET /health
```

**Response:**
```json
{
  "status": "operational",
  "service": "Bio-Interface API",
  "fortress": "iLuminara Sovereign Health Fortress",
  "timestamp": "2025-12-28T20:00:00.000Z",
  "compliance": {
    "guardrail": "active",
    "crypto_shredder": "active",
    "golden_thread": "active"
  }
}
```

### Submit CBS report

Submit Community-Based Surveillance report from mobile app.

```bash
POST /api/v1/submit-cbs-report
Content-Type: application/json
```

**Request body:**
```json
{
  "patient_id": "PATIENT_12345",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "symptoms": ["fever", "cough"],
  "severity": 7,
  "timestamp": "2025-01-15T08:00:00Z",
  "source": "CHV_MOBILE_APP",
  "consent_token": "VALID_TOKEN"
}
```

**Response (201 Created):**
```json
{
  "status": "success",
  "timestamp": "2025-12-28T20:00:00.000Z",
  "patient_hash": "a1b2c3d4e5f6g7h8",
  "key_id": "abc123",
  "verification_score": 0.8,
  "alert_level": "HIGH",
  "message": "CBS report submitted successfully"
}
```

### Submit EMR record

Submit Electronic Medical Record from clinic/hospital.

```bash
POST /api/v1/submit-emr-record
Content-Type: application/json
```

**Request body:**
```json
{
  "patient_id": "PATIENT_12345",
  "location": {"lat": 0.0512, "lng": 40.3129},
  "diagnosis": "malaria",
  "timestamp": "2025-01-15T08:30:00Z",
  "source": "DADAAB_CLINIC",
  "consent_token": "VALID_TOKEN"
}
```

**Response (201 Created):**
```json
{
  "status": "success",
  "timestamp": "2025-12-28T20:00:00.000Z",
  "patient_hash": "a1b2c3d4e5f6g7h8",
  "key_id": "def456",
  "verification_score": 1.0,
  "message": "EMR record submitted successfully"
}
```

### Fuse data streams

Manually trigger Golden Thread data fusion.

```bash
POST /api/v1/fuse-data
Content-Type: application/json
```

**Request body:**
```json
{
  "patient_id": "PATIENT_12345",
  "cbs_signal": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptom": "fever",
    "timestamp": "2025-01-15T08:00:00Z"
  },
  "emr_record": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "diagnosis": "malaria",
    "timestamp": "2025-01-15T08:30:00Z"
  }
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "timestamp": "2025-12-28T20:00:00.000Z",
  "patient_hash": "a1b2c3d4e5f6g7h8",
  "verification_score": 1.0,
  "fused_record": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever"],
    "diagnosis": "malaria",
    "verification_status": "CONFIRMED"
  }
}
```

## Privacy-preserving patient hashing

The API uses SHA-256 hashing to create privacy-preserving patient identifiers:

```python
import hashlib

def generate_patient_hash(patient_id: str) -> str:
    """Generate privacy-preserving patient hash"""
    return hashlib.sha256(patient_id.encode()).hexdigest()[:16]

# Example
patient_id = "PATIENT_12345"
patient_hash = generate_patient_hash(patient_id)
# Output: "a1b2c3d4e5f6g7h8"
```

**Benefits:**
- Original patient ID never stored
- Consistent hashing enables data linkage
- Complies with GDPR Art. 32 (Pseudonymization)

## Alert levels

The API automatically calculates alert levels based on severity:

| Severity Score | Alert Level | Response |
|----------------|-------------|----------|
| 9-10 | CRITICAL | Immediate emergency response |
| 7-8 | HIGH | Urgent attention required |
| 4-6 | MEDIUM | Increased surveillance |
| 0-3 | LOW | Routine monitoring |

## Data retention policies

Different data types have different retention policies:

| Data Type | Retention Policy | Duration | Storage Class |
|-----------|------------------|----------|---------------|
| CBS | HOT | 180 days | STANDARD |
| EMR | WARM | 365 days | NEARLINE |
| IDSR | COLD | 1825 days | COLDLINE |

After retention period, keys are automatically shredded by Crypto Shredder (IP-02).

## Mobile SDK integration

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitCBSReport(
        patientId: String,
        location: Pair<Double, Double>,
        symptoms: List<String>,
        severity: Int,
        consentToken: String
    ): Response {
        val json = JSONObject().apply {
            put("patient_id", patientId)
            put("location", JSONObject().apply {
                put("lat", location.first)
                put("lng", location.second)
            })
            put("symptoms", JSONArray(symptoms))
            put("severity", severity)
            put("timestamp", System.currentTimeMillis())
            put("source", "CHV_MOBILE_APP")
            put("consent_token", consentToken)
        }
        
        val body = RequestBody.create(
            MediaType.parse("application/json"),
            json.toString()
        )
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/submit-cbs-report")
            .post(body)
            .build()
        
        return client.newCall(request).execute()
    }
}

// Usage
val client = ILuminaraClient("https://api.iluminara.health")
val response = client.submitCBSReport(
    patientId = "PATIENT_12345",
    location = Pair(0.0512, 40.3129),
    symptoms = listOf("fever", "cough"),
    severity = 7,
    consentToken = "VALID_TOKEN"
)
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitCBSReport(
        patientId: String,
        location: (lat: Double, lng: Double),
        symptoms: [String],
        severity: Int,
        consentToken: String,
        completion: @escaping (Result<Data, Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/api/v1/submit-cbs-report")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "patient_id": patientId,
            "location": ["lat": location.lat, "lng": location.lng],
            "symptoms": symptoms,
            "severity": severity,
            "timestamp": ISO8601DateFormatter().string(from: Date()),
            "source": "CHV_MOBILE_APP",
            "consent_token": consentToken
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            if let data = data {
                completion(.success(data))
            }
        }.resume()
    }
}

// Usage
let client = ILuminaraClient(baseURL: "https://api.iluminara.health")
client.submitCBSReport(
    patientId: "PATIENT_12345",
    location: (lat: 0.0512, lng: 40.3129),
    symptoms: ["fever", "cough"],
    severity: 7,
    consentToken: "VALID_TOKEN"
) { result in
    switch result {
    case .success(let data):
        print("✅ CBS report submitted")
    case .failure(let error):
        print("❌ Error: \(error)")
    }
}
```

### React Native (JavaScript)

```javascript
class ILuminaraClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }
  
  async submitCBSReport({
    patientId,
    location,
    symptoms,
    severity,
    consentToken
  }) {
    const response = await fetch(`${this.baseURL}/api/v1/submit-cbs-report`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        patient_id: patientId,
        location: location,
        symptoms: symptoms,
        severity: severity,
        timestamp: new Date().toISOString(),
        source: 'CHV_MOBILE_APP',
        consent_token: consentToken
      })
    });
    
    return await response.json();
  }
}

// Usage
const client = new ILuminaraClient('https://api.iluminara.health');

const result = await client.submitCBSReport({
  patientId: 'PATIENT_12345',
  location: { lat: 0.0512, lng: 40.3129 },
  symptoms: ['fever', 'cough'],
  severity: 7,
  consentToken: 'VALID_TOKEN'
});

console.log('✅ CBS report submitted:', result);
```

## Error handling

### Common errors

| Error Code | HTTP Status | Description |
|------------|-------------|-------------|
| `missing_patient_id` | 400 | Patient ID not provided |
| `missing_location` | 400 | Location data not provided |
| `missing_data_type` | 400 | Data type not specified |
| `sovereignty_violation` | 403 | Action violates compliance rules |
| `decryption_failed` | 404 | Key shredded or expired |
| `processing_failed` | 500 | Internal processing error |

### Error response format

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Violates GDPR Art. 9 (Processing of special categories)"
}
```

## Testing

### Local testing

```bash
# Start API server
python integrations/bio_interface_api.py

# Test CBS submission
curl -X POST http://localhost:8080/api/v1/submit-cbs-report \
  -H "Content-Type: application/json" \
  -d '{
    "patient_id": "PATIENT_12345",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever", "cough"],
    "severity": 7,
    "source": "CHV_MOBILE_APP",
    "consent_token": "VALID_TOKEN"
  }'
```

### Integration tests

```python
import requests
import pytest

BASE_URL = "http://localhost:8080"

def test_submit_cbs_report():
    response = requests.post(
        f"{BASE_URL}/api/v1/submit-cbs-report",
        json={
            "patient_id": "PATIENT_12345",
            "location": {"lat": 0.0512, "lng": 40.3129},
            "symptoms": ["fever", "cough"],
            "severity": 7,
            "source": "CHV_MOBILE_APP",
            "consent_token": "VALID_TOKEN"
        }
    )
    
    assert response.status_code == 201
    data = response.json()
    assert data["status"] == "success"
    assert "patient_hash" in data
    assert "key_id" in data
    assert data["verification_score"] >= 0.0

def test_sovereignty_violation():
    response = requests.post(
        f"{BASE_URL}/api/v1/submit-cbs-report",
        json={
            "patient_id": "PATIENT_12345",
            "location": {"lat": 0.0512, "lng": 40.3129},
            "symptoms": ["fever"],
            "severity": 5,
            "source": "FOREIGN_CLOUD",  # Sovereignty violation
            "consent_token": "INVALID"
        }
    )
    
    assert response.status_code == 403
    data = response.json()
    assert data["error"] == "sovereignty_violation"
```

## Deployment

### Docker

```dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY integrations/bio_interface_api.py .
COPY governance_kernel/ ./governance_kernel/
COPY edge_node/ ./edge_node/

EXPOSE 8080

CMD ["python", "bio_interface_api.py"]
```

### Cloud Run

```bash
# Build and deploy
gcloud run deploy bio-interface-api \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars NODE_ID=JOR-47,JURISDICTION=KDPA_KE
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integrations/vertex-ai-shap"
  >
    Add explainable AI predictions
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Crypto Shredder"
    icon="fire"
    href="/security/overview"
  >
    Configure data lifecycle
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy to production
  </Card>
</CardGroup>
