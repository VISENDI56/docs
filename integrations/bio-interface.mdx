---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit health data that automatically integrates with the Golden Thread data fusion engine, ensuring sovereignty compliance and verified timelines.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Every mobile health signal becomes a verified CBS (Community-Based Surveillance) event in the Golden Thread."
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│      MOBILE HEALTH APP              │
│  - Symptom reporting                │
│  - Vital signs capture              │
│  - Location tracking                │
│  - Consent management               │
└─────────────────┬───────────────────┘
                  │ HTTPS/TLS 1.3
                  ▼
┌─────────────────────────────────────┐
│      BIO-INTERFACE API              │
│  - /api/v1/submit-health-data       │
│  - /api/v1/verify-consent           │
│  - /api/v1/get-outbreak-alerts      │
└─────────────────┬───────────────────┘
                  │
        ┌─────────┴─────────┐
        │                   │
        ▼                   ▼
┌──────────────┐    ┌──────────────┐
│ SOVEREIGN    │    │ GOLDEN       │
│ GUARDRAIL    │    │ THREAD       │
│ - Compliance │    │ - Data fusion│
│ - Consent    │    │ - Verification│
└──────────────┘    └──────────────┘
```

## Quick start

### Start the API service

```bash
python api/bio_interface.py
```

The service starts on `http://0.0.0.0:8081`

### Health check

```bash
curl http://localhost:8081/health
```

Response:
```json
{
  "status": "healthy",
  "service": "iLuminara Bio-Interface",
  "version": "1.0.0",
  "components": {
    "sovereign_guardrail": "operational",
    "golden_thread": "operational",
    "audit_trail": "operational"
  }
}
```

## Submit health data

### Endpoint

```
POST /api/v1/submit-health-data
```

### Request

```bash
curl -X POST http://localhost:8081/api/v1/submit-health-data \
  -H "Content-Type: application/json" \
  -d '{
    "patient_id": "PAT_12345",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever", "cough", "fatigue"],
    "vital_signs": {"temperature": 38.5, "heart_rate": 95},
    "timestamp": "2025-12-25T10:00:00Z",
    "source": "mobile_app_v2.1",
    "consent_token": "CONSENT_TOKEN_ABC123",
    "device_id": "DEVICE_XYZ789"
  }'
```

### Response

```json
{
  "status": "success",
  "submission_id": "SUB_ABC123",
  "verification_score": 0.8,
  "golden_thread_status": "PROBABLE",
  "compliance_status": "COMPLIANT",
  "timestamp": "2025-12-25T10:00:01Z",
  "message": "Health data submitted successfully"
}
```

### Request fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `patient_id` | string | Yes | Unique patient identifier |
| `location` | object | Yes | Geographic coordinates (lat, lng) |
| `symptoms` | array | Yes | List of symptoms |
| `vital_signs` | object | No | Vital signs (temperature, heart_rate, etc.) |
| `timestamp` | string | Yes | ISO 8601 timestamp |
| `source` | string | No | Data source identifier |
| `consent_token` | string | Yes | Valid consent token |
| `device_id` | string | Yes | Device identifier |

### Response fields

| Field | Type | Description |
|-------|------|-------------|
| `status` | string | "success" or "error" |
| `submission_id` | string | Unique submission identifier |
| `verification_score` | float | Golden Thread verification score (0-1) |
| `golden_thread_status` | string | CONFIRMED, PROBABLE, POSSIBLE, or UNVERIFIED |
| `compliance_status` | string | Sovereignty compliance status |
| `timestamp` | string | Processing timestamp |
| `message` | string | Human-readable message |

## Verification status

Golden Thread verification scores determine data quality:

| Score | Status | Description |
|-------|--------|-------------|
| 1.0 | CONFIRMED | Multiple sources agree on location and time |
| 0.6-0.9 | PROBABLE | Partial agreement with minor conflicts |
| 0.4-0.5 | POSSIBLE | Significant conflicts but plausible |
| 0.0-0.3 | UNVERIFIED | Major conflicts or single source only |

## Verify consent

### Endpoint

```
POST /api/v1/verify-consent
```

### Request

```bash
curl -X POST http://localhost:8081/api/v1/verify-consent \
  -H "Content-Type: application/json" \
  -d '{
    "patient_id": "PAT_12345",
    "consent_token": "CONSENT_TOKEN_ABC123",
    "consent_scope": "public_health_surveillance"
  }'
```

### Response

```json
{
  "status": "valid",
  "patient_id": "PAT_12345",
  "consent_scope": "public_health_surveillance",
  "expires_at": "2026-12-25T10:00:00Z"
}
```

### Consent scopes

Valid consent scopes:
- `diagnosis` - Clinical diagnosis
- `treatment` - Medical treatment
- `research` - Health research
- `public_health_surveillance` - Disease surveillance
- `emergency_response` - Emergency outbreak response

## Get outbreak alerts

### Endpoint

```
GET /api/v1/get-outbreak-alerts
```

### Request

```bash
curl "http://localhost:8081/api/v1/get-outbreak-alerts?lat=0.0512&lng=40.3129&radius_km=10"
```

### Response

```json
{
  "status": "success",
  "alerts": [
    {
      "alert_id": "ALERT_001",
      "disease": "cholera",
      "severity": "HIGH",
      "location": {"lat": 0.0512, "lng": 40.3129},
      "radius_km": 5,
      "case_count": 45,
      "timestamp": "2025-12-25T10:00:00Z"
    }
  ],
  "count": 1
}
```

## Get verification status

### Endpoint

```
GET /api/v1/get-verification-status
```

### Request

```bash
curl "http://localhost:8081/api/v1/get-verification-status?submission_id=SUB_ABC123"
```

### Response

```json
{
  "submission_id": "SUB_ABC123",
  "verification_score": 0.8,
  "golden_thread_status": "PROBABLE",
  "emr_match": false,
  "cbs_match": true,
  "idsr_match": false,
  "timestamp": "2025-12-25T10:00:01Z"
}
```

## Data flow

<Steps>
  <Step title="Mobile app submission">
    User reports symptoms via mobile app with location and consent
  </Step>
  <Step title="Sovereignty validation">
    SovereignGuardrail validates consent and data residency
  </Step>
  <Step title="CBS signal creation">
    Health data converted to Community-Based Surveillance signal
  </Step>
  <Step title="Golden Thread fusion">
    CBS signal fused with EMR and IDSR data streams
  </Step>
  <Step title="Verification scoring">
    Cross-source verification determines data quality
  </Step>
  <Step title="Response">
    Submission ID and verification status returned to app
  </Step>
</Steps>

## Sovereignty compliance

All submissions enforce sovereignty constraints:

```python
# Automatic sovereignty validation
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': submission.consent_token,
        'consent_scope': 'public_health_surveillance'
    },
    jurisdiction='KDPA_KE'
)
```

**Enforced rules:**
- PHI cannot leave sovereign territory
- Explicit consent required for processing
- Audit trail for all submissions
- Retention policies enforced

## Error handling

### Sovereignty violation (403)

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Violates GDPR Art. 9 (Processing of special categories)"
}
```

### Missing field (400)

```json
{
  "status": "error",
  "error": "missing_field",
  "message": "Required field missing: consent_token"
}
```

### Processing failed (500)

```json
{
  "status": "error",
  "error": "processing_failed",
  "message": "Internal processing error"
}
```

## Mobile SDK integration

### Android (Kotlin)

```kotlin
data class HealthSubmission(
    val patientId: String,
    val location: Location,
    val symptoms: List<String>,
    val vitalSigns: VitalSigns?,
    val timestamp: String,
    val consentToken: String,
    val deviceId: String
)

suspend fun submitHealthData(submission: HealthSubmission): SubmissionResponse {
    val response = httpClient.post("$BASE_URL/api/v1/submit-health-data") {
        contentType(ContentType.Application.Json)
        setBody(submission)
    }
    return response.body()
}
```

### iOS (Swift)

```swift
struct HealthSubmission: Codable {
    let patientId: String
    let location: Location
    let symptoms: [String]
    let vitalSigns: VitalSigns?
    let timestamp: String
    let consentToken: String
    let deviceId: String
}

func submitHealthData(submission: HealthSubmission) async throws -> SubmissionResponse {
    let url = URL(string: "\(baseURL)/api/v1/submit-health-data")!
    var request = URLRequest(url: url)
    request.httpMethod = "POST"
    request.setValue("application/json", forHTTPHeaderField: "Content-Type")
    request.httpBody = try JSONEncoder().encode(submission)
    
    let (data, _) = try await URLSession.shared.data(for: request)
    return try JSONDecoder().decode(SubmissionResponse.self, from: data)
}
```

### React Native (JavaScript)

```javascript
const submitHealthData = async (submission) => {
  const response = await fetch(`${BASE_URL}/api/v1/submit-health-data`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(submission),
  });
  
  return await response.json();
};
```

## Testing

Test the Bio-Interface API:

```bash
# Run tests
python tests/test_bio_interface.py

# Load testing
ab -n 1000 -c 10 -p test_submission.json \
  -T application/json \
  http://localhost:8081/api/v1/submit-health-data
```

## Production deployment

### Docker

```dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY api/bio_interface.py .
COPY requirements.txt .

RUN pip install -r requirements.txt

EXPOSE 8081

CMD ["python", "bio_interface.py"]
```

### Cloud Run

```bash
# Build and deploy
gcloud run deploy bio-interface \
  --source . \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --port 8081
```

## Security considerations

<AccordionGroup>
  <Accordion title="TLS encryption">
    All API traffic must use HTTPS/TLS 1.3 in production
  </Accordion>
  <Accordion title="Rate limiting">
    Implement rate limiting (100 requests/minute per device)
  </Accordion>
  <Accordion title="Authentication">
    Use OAuth 2.0 or API keys for production deployments
  </Accordion>
  <Accordion title="Input validation">
    All inputs validated against schema before processing
  </Accordion>
  <Accordion title="Audit logging">
    All submissions logged to tamper-proof audit trail
  </Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure sovereignty rules
  </Card>
  <Card
    title="Mobile SDKs"
    icon="mobile"
    href="/integrations/mobile-sdks"
  >
    Integrate with mobile apps
  </Card>
  <Card
    title="Deploy to GCP"
    icon="google"
    href="/deployment/gcp"
  >
    Production deployment guide
  </Card>
</CardGroup>
