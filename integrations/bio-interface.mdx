---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread data fusion protocol
---

## Overview

The Bio-Interface provides REST API endpoints for mobile health applications to integrate with iLuminara-Core using the Golden Thread data fusion protocol.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Every mobile health signal becomes a verified thread in the sovereign tapestry."
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│   Mobile Health Apps                │
│   • CHV Devices                     │
│   • IoT Sensors                     │
│   • Voice Alerts                    │
└──────────────┬──────────────────────┘
               │
               │ REST API
               ▼
┌─────────────────────────────────────┐
│   Bio-Interface API                 │
│   • /api/v1/cbs/submit              │
│   • /api/v1/emr/submit              │
│   • /api/v1/voice/submit            │
│   • /api/v1/verification/<id>       │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   SovereignGuardrail                │
│   • Validate jurisdiction           │
│   • Check consent                   │
│   • Enforce sovereignty             │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   Golden Thread                     │
│   • Fuse CBS + EMR + IDSR           │
│   • Calculate verification score    │
│   • Create verified timeline        │
└──────────────┬──────────────────────┘
               │
               ▼
┌─────────────────────────────────────┐
│   PubSub Alerts (if critical)       │
│   • Real-time notifications         │
│   • Emergency response triggers     │
└─────────────────────────────────────┘
```

## API endpoints

### Health check

```bash
GET /health
```

**Response:**
```json
{
  "status": "healthy",
  "service": "Bio-Interface API",
  "version": "1.0.0",
  "timestamp": "2025-12-25T16:00:00.000Z"
}
```

### Submit CBS report

```bash
POST /api/v1/cbs/submit
Content-Type: application/json
```

**Request body:**
```json
{
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "reporter_id": "CHV_AMINA_HASSAN",
  "source": "mobile_app",
  "metadata": {
    "patient_id": "PAT_12345",
    "consent_token": "VALID_TOKEN",
    "age": 35,
    "gender": "F"
  }
}
```

**Response:**
```json
{
  "status": "success",
  "message": "CBS report submitted successfully",
  "record_id": "CBS_20251225_001",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "timestamp": "2025-12-25T16:00:00.000Z",
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "frameworks": ["GDPR Art. 9", "KDPA §37", "WHO IHR Art. 6"]
  }
}
```

### Submit EMR record

```bash
POST /api/v1/emr/submit
Content-Type: application/json
```

**Request body:**
```json
{
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "diagnosis": "cholera",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "facility_id": "DADAAB_CLINIC",
  "metadata": {
    "consent_token": "VALID_TOKEN",
    "clinician_id": "DR_JOHN_DOE",
    "lab_confirmed": true
  }
}
```

**Response:**
```json
{
  "status": "success",
  "message": "EMR record submitted successfully",
  "record_id": "EMR_20251225_001",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "timestamp": "2025-12-25T16:00:00.000Z",
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "frameworks": ["HIPAA §164.312", "GDPR Art. 9", "KDPA §37"]
  }
}
```

### Submit voice alert

```bash
POST /api/v1/voice/submit?location={"lat":0.0512,"lng":40.3129}&reporter_id=CHV_AMINA&language=swahili
Content-Type: audio/wav
```

**Request body:** Binary audio data (WAV format)

**Response:**
```json
{
  "status": "success",
  "message": "Voice alert processed successfully",
  "transcription": "Patient reporting severe watery diarrhea and vomiting",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "alert_level": "CRITICAL",
  "record_id": "VOICE_20251225_001",
  "verification_score": 0.8,
  "timestamp": "2025-12-25T16:00:00.000Z"
}
```

### Get verification status

```bash
GET /api/v1/verification/<record_id>
```

**Response:**
```json
{
  "status": "success",
  "record_id": "CBS_20251225_001",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "sources": ["CBS", "EMR"],
  "timestamp": "2025-12-25T16:00:00.000Z",
  "last_updated": "2025-12-25T16:05:00.000Z"
}
```

## Verification scores

| Score | Status | Description |
|-------|--------|-------------|
| **1.0** | CONFIRMED | Multiple sources agree on location and time |
| **0.7-0.9** | PROBABLE | Partial agreement with minor conflicts |
| **0.4-0.6** | POSSIBLE | Significant conflicts but plausible |
| **0.0-0.3** | UNVERIFIED | Major conflicts or single source only |

## Data sources

```python
class DataSource(Enum):
    MOBILE_APP = "mobile_app"
    CHV_DEVICE = "chv_device"
    IOT_SENSOR = "iot_sensor"
    VOICE_ALERT = "voice_alert"
    MANUAL_ENTRY = "manual_entry"
```

## Python SDK example

```python
import requests
import json

# Initialize client
BASE_URL = "http://localhost:8080"

# Submit CBS report
cbs_data = {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["diarrhea", "vomiting"],
    "severity": 9,
    "reporter_id": "CHV_AMINA_HASSAN",
    "source": "mobile_app",
    "metadata": {
        "patient_id": "PAT_12345",
        "consent_token": "VALID_TOKEN"
    }
}

response = requests.post(
    f"{BASE_URL}/api/v1/cbs/submit",
    json=cbs_data,
    headers={"Content-Type": "application/json"}
)

result = response.json()
print(f"Record ID: {result['record_id']}")
print(f"Verification: {result['verification_status']}")
print(f"Score: {result['verification_score']}")

# Check verification status
record_id = result['record_id']
verification = requests.get(
    f"{BASE_URL}/api/v1/verification/{record_id}"
).json()

print(f"Sources: {verification['sources']}")
```

## Mobile app integration

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitCBSReport(
        location: Pair<Double, Double>,
        symptoms: List<String>,
        severity: Int,
        reporterId: String
    ): JSONObject {
        val json = JSONObject().apply {
            put("location", JSONObject().apply {
                put("lat", location.first)
                put("lng", location.second)
            })
            put("symptoms", JSONArray(symptoms))
            put("severity", severity)
            put("reporter_id", reporterId)
            put("source", "mobile_app")
        }
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/cbs/submit")
            .post(RequestBody.create(
                MediaType.parse("application/json"),
                json.toString()
            ))
            .build()
        
        val response = client.newCall(request).execute()
        return JSONObject(response.body()?.string() ?: "{}")
    }
}
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitCBSReport(
        location: (lat: Double, lng: Double),
        symptoms: [String],
        severity: Int,
        reporterId: String,
        completion: @escaping (Result<[String: Any], Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/api/v1/cbs/submit")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "location": ["lat": location.lat, "lng": location.lng],
            "symptoms": symptoms,
            "severity": severity,
            "reporter_id": reporterId,
            "source": "mobile_app"
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            guard let data = data,
                  let json = try? JSONSerialization.jsonObject(with: data) as? [String: Any] else {
                completion(.failure(NSError(domain: "Parse", code: -1)))
                return
            }
            
            completion(.success(json))
        }.resume()
    }
}
```

## Sovereignty enforcement

All API requests are validated against sovereignty constraints:

```python
# Automatic validation
guardrail.validate_action(
    action_type='Data_Collection',
    payload={
        'data_type': 'PHI',
        'source': 'mobile_app',
        'processing_location': 'Edge_Node',
        'consent_token': metadata.get('consent_token')
    },
    jurisdiction='KDPA_KE'
)
```

**Blocked actions:**
- Cross-border data transfers without authorization
- Processing without consent
- High-risk operations without explanation

## Real-time alerts

Critical events (severity ≥7) trigger PubSub alerts:

```json
{
  "alert_type": "health_event",
  "severity": 9,
  "location": {"lat": 0.0512, "lng": 40.3129},
  "symptoms": ["diarrhea", "vomiting"],
  "verification_score": 1.0,
  "timestamp": "2025-12-25T16:00:00.000Z"
}
```

## Error handling

### Sovereignty violation (403)

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Violates GDPR Art. 9 (Processing of special categories)"
}
```

### Missing data (400)

```json
{
  "status": "error",
  "error": "missing_required_field",
  "message": "Field 'location' is required"
}
```

### Server error (500)

```json
{
  "status": "error",
  "error": "processing_failed",
  "message": "Internal server error"
}
```

## Deployment

### Local development

```bash
# Start Bio-Interface API
python api/bio_interface.py
```

### Docker

```bash
# Build image
docker build -t iluminara-bio-interface .

# Run container
docker run -p 8080:8080 \
  -e GOOGLE_CLOUD_PROJECT=iluminara-health \
  -e JURISDICTION=KDPA_KE \
  iluminara-bio-interface
```

### Google Cloud Run

```bash
# Deploy to Cloud Run
gcloud run deploy bio-interface \
  --source . \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars GOOGLE_CLOUD_PROJECT=iluminara-health,JURISDICTION=KDPA_KE
```

## Testing

```bash
# Test health check
curl http://localhost:8080/health

# Test CBS submission
curl -X POST http://localhost:8080/api/v1/cbs/submit \
  -H "Content-Type: application/json" \
  -d '{
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever", "cough"],
    "severity": 5,
    "reporter_id": "CHV_TEST"
  }'

# Test verification
curl http://localhost:8080/api/v1/verification/CBS_20251225_001
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integrations/vertex-ai-shap"
  >
    Add AI explainability
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure sovereignty rules
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy to production
  </Card>
</CardGroup>
