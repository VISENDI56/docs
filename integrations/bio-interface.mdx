---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the **Golden Thread protocol** to fuse data streams from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity preservation"
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│    MOBILE HEALTH APPS               │
│  ┌──────────────────────────────┐  │
│  │  CHV Mobile App              │  │
│  │  - Voice recording           │  │
│  │  - Symptom reporting         │  │
│  │  - GPS location              │  │
│  └──────────────────────────────┘  │
│  ┌──────────────────────────────┐  │
│  │  Clinic EMR App              │  │
│  │  - Patient registration      │  │
│  │  - Diagnosis entry           │  │
│  │  - Treatment tracking        │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
              │
              │ HTTPS/TLS 1.3
              ▼
┌─────────────────────────────────────┐
│    BIO-INTERFACE REST API           │
│  ┌──────────────────────────────┐  │
│  │  /api/v1/cbs/report          │  │
│  │  /api/v1/emr/record          │  │
│  │  /api/v1/voice/process       │  │
│  │  /api/v1/sync/status         │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
              │
              │ Validation
              ▼
┌─────────────────────────────────────┐
│    SOVEREIGN GUARDRAIL              │
│  - Consent validation               │
│  - Data sovereignty check           │
│  - Audit logging                    │
└─────────────────────────────────────┘
              │
              │ Fusion
              ▼
┌─────────────────────────────────────┐
│    GOLDEN THREAD                    │
│  - CBS + EMR fusion                 │
│  - Verification scoring             │
│  - Timeline construction            │
└─────────────────────────────────────┘
```

## API endpoints

### Submit CBS report

Community Health Volunteers submit field observations.

**Endpoint:** `POST /api/v1/cbs/report`

**Request:**

```json
{
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-01-15T08:00:00Z",
  "symptoms": ["fever", "diarrhea", "vomiting"],
  "severity": 9,
  "patient_count": 1,
  "notes": "Patient reporting severe watery diarrhea",
  "consent_token": "CONSENT_12345"
}
```

**Response:**

```json
{
  "status": "success",
  "report_id": "CBS_20250115_001",
  "verification_status": "PENDING",
  "message": "CBS report submitted successfully",
  "next_steps": [
    "Report will be verified against EMR records",
    "Verification score will be calculated within 24 hours"
  ]
}
```

### Submit EMR record

Clinics submit electronic medical records.

**Endpoint:** `POST /api/v1/emr/record`

**Request:**

```json
{
  "facility_id": "DADAAB_CLINIC",
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-01-15T08:30:00Z",
  "diagnosis": "cholera",
  "symptoms": ["fever", "diarrhea", "vomiting", "dehydration"],
  "treatment": "ORS, IV fluids, isolation",
  "severity": 9,
  "lab_confirmed": true,
  "consent_token": "CONSENT_12345"
}
```

**Response:**

```json
{
  "status": "success",
  "record_id": "EMR_20250115_001",
  "patient_id": "PAT_12345",
  "golden_thread": {
    "fused": true,
    "verification_score": 1.0,
    "status": "CONFIRMED",
    "matched_cbs_reports": ["CBS_20250115_001"],
    "timeline": [
      {
        "timestamp": "2025-01-15T08:00:00Z",
        "source": "CBS",
        "event": "CHV reported symptoms"
      },
      {
        "timestamp": "2025-01-15T08:30:00Z",
        "source": "EMR",
        "event": "Clinic confirmed diagnosis"
      }
    ]
  }
}
```

### Process voice alert

Process voice recordings from CHVs.

**Endpoint:** `POST /api/v1/voice/process`

**Headers:**
- `Content-Type: audio/wav`

**Query Parameters:**
- `chv_id` (required): CHV identifier
- `language` (optional): Language code (default: "swahili")
- `lat` (optional): Latitude
- `lng` (optional): Longitude

**Request:**

```bash
curl -X POST "http://localhost:8080/api/v1/voice/process?chv_id=CHV_AMINA&language=swahili&lat=0.0512&lng=40.3129" \
  -H "Content-Type: audio/wav" \
  --data-binary @alert.wav
```

**Response:**

```json
{
  "status": "success",
  "report_id": "CBS_20250115_002",
  "transcription": "Patient reporting severe watery diarrhea and vomiting",
  "language_detected": "swahili",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "alert_level": "CRITICAL",
  "recommendations": [
    "IMMEDIATE: Suspected cholera. Start ORS immediately.",
    "Isolate patient to prevent spread",
    "Notify district health officer"
  ],
  "cbs_report_created": true
}
```

### Check sync status

Check synchronization status between edge and cloud.

**Endpoint:** `GET /api/v1/sync/status`

**Query Parameters:**
- `node_id` (required): Edge node identifier

**Response:**

```json
{
  "status": "success",
  "node_id": "JOR-47",
  "sync_status": "ONLINE",
  "last_sync": "2025-01-15T09:00:00Z",
  "pending_reports": 3,
  "pending_records": 1,
  "queue_size": 4,
  "connectivity": {
    "online": true,
    "latency_ms": 45,
    "bandwidth_kbps": 512
  }
}
```

## Golden Thread verification

The Bio-Interface automatically triggers Golden Thread verification:

<Steps>
  <Step title="CBS report submitted">
    CHV submits field observation via mobile app
  </Step>
  <Step title="Pending verification">
    Report stored with status "PENDING"
  </Step>
  <Step title="EMR record submitted">
    Clinic submits diagnosis for same patient
  </Step>
  <Step title="Automatic fusion">
    Golden Thread matches CBS and EMR by location + time
  </Step>
  <Step title="Verification score">
    Score calculated: 1.0 (CONFIRMED) if match, lower if conflicts
  </Step>
  <Step title="Timeline created">
    Verified timeline constructed from multiple sources
  </Step>
</Steps>

## Verification logic

```python
# Automatic verification when EMR record matches CBS report

IF cbs.location == emr.location AND |cbs.timestamp - emr.timestamp| < 24h:
    verification_score = 1.0  # CONFIRMED
    status = "CONFIRMED"
ELSE IF location_distance < 5km AND time_delta < 48h:
    verification_score = 0.7  # PROBABLE
    status = "PROBABLE"
ELSE:
    verification_score = 0.3  # UNVERIFIED
    status = "UNVERIFIED"
```

## Authentication

### API key authentication

```bash
curl -X POST http://localhost:8080/api/v1/cbs/report \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{...}'
```

### OAuth 2.0 (production)

```python
import requests
from google.oauth2 import service_account

# Load service account credentials
credentials = service_account.Credentials.from_service_account_file(
    'service-account.json',
    scopes=['https://www.googleapis.com/auth/cloud-platform']
)

# Get access token
auth_req = google.auth.transport.requests.Request()
credentials.refresh(auth_req)
access_token = credentials.token

# Make authenticated request
response = requests.post(
    'https://api.iluminara.health/v1/cbs/report',
    headers={'Authorization': f'Bearer {access_token}'},
    json={...}
)
```

## Consent management

All API calls require valid consent tokens:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate consent before processing
guardrail.validate_action(
    action_type='Consent_Validation',
    payload={
        'consent_token': 'CONSENT_12345',
        'consent_scope': 'public_health_surveillance',
        'data_type': 'PHI'
    },
    jurisdiction='KDPA_KE'
)
```

## Mobile SDK

### Android SDK

```kotlin
// Initialize iLuminara SDK
val iluminara = ILuminaraClient(
    apiKey = "YOUR_API_KEY",
    baseUrl = "https://api.iluminara.health",
    jurisdiction = Jurisdiction.KDPA_KE
)

// Submit CBS report
val report = CBSReport(
    chvId = "CHV_AMINA_HASSAN",
    location = Location(0.0512, 40.3129, "Dadaab"),
    symptoms = listOf("fever", "diarrhea", "vomiting"),
    severity = 9,
    consentToken = "CONSENT_12345"
)

iluminara.submitCBSReport(report) { result ->
    when (result) {
        is Success -> println("Report submitted: ${result.reportId}")
        is Error -> println("Error: ${result.message}")
    }
}
```

### iOS SDK

```swift
// Initialize iLuminara SDK
let iluminara = ILuminaraClient(
    apiKey: "YOUR_API_KEY",
    baseUrl: "https://api.iluminara.health",
    jurisdiction: .KDPA_KE
)

// Submit CBS report
let report = CBSReport(
    chvId: "CHV_AMINA_HASSAN",
    location: Location(lat: 0.0512, lng: 40.3129, name: "Dadaab"),
    symptoms: ["fever", "diarrhea", "vomiting"],
    severity: 9,
    consentToken: "CONSENT_12345"
)

iluminara.submitCBSReport(report) { result in
    switch result {
    case .success(let reportId):
        print("Report submitted: \(reportId)")
    case .failure(let error):
        print("Error: \(error)")
    }
}
```

## Offline support

The Bio-Interface supports offline operation with automatic sync:

```python
from edge_node.ai_agents import OfflineAgent

# Initialize offline agent
agent = OfflineAgent(
    name="Mobile Health Agent",
    capabilities=[
        AgentCapability.OFFLINE_OPERATION,
        AgentCapability.LOCAL_STORAGE,
        AgentCapability.EDGE_TO_CLOUD_SYNC
    ]
)

# Queue report while offline
agent.queue_operation("submit_cbs_report", {
    "chv_id": "CHV_AMINA",
    "symptoms": ["fever", "diarrhea"],
    "location": {"lat": 0.0512, "lng": 40.3129}
})

# Automatically sync when connectivity returns
agent.check_and_sync()
```

## Rate limiting

Production API implements rate limiting:

| Endpoint | Rate Limit | Burst |
|----------|------------|-------|
| `/api/v1/cbs/report` | 100/hour | 10/minute |
| `/api/v1/emr/record` | 100/hour | 10/minute |
| `/api/v1/voice/process` | 10/hour | 2/minute |
| `/api/v1/sync/status` | 1000/hour | 100/minute |

## Error handling

Standard error response format:

```json
{
  "status": "error",
  "error_code": "CONSENT_INVALID",
  "message": "Consent token expired or invalid",
  "details": {
    "consent_token": "CONSENT_12345",
    "expiration": "2025-01-14T00:00:00Z"
  },
  "compliance": {
    "framework": "GDPR",
    "article": "Art. 6 (Lawfulness of Processing)",
    "action_required": "Obtain new consent from patient"
  }
}
```

## Testing

Test the Bio-Interface locally:

```bash
# Start API service
python api_service.py

# Submit test CBS report
curl -X POST http://localhost:8080/api/v1/cbs/report \
  -H "Content-Type: application/json" \
  -d '{
    "chv_id": "CHV_TEST",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever", "diarrhea"],
    "severity": 7,
    "consent_token": "TEST_CONSENT"
  }'

# Submit test EMR record
curl -X POST http://localhost:8080/api/v1/emr/record \
  -H "Content-Type: application/json" \
  -d '{
    "facility_id": "TEST_CLINIC",
    "patient_id": "PAT_TEST",
    "location": {"lat": 0.0512, "lng": 40.3129},
    "diagnosis": "malaria",
    "symptoms": ["fever", "diarrhea"],
    "severity": 7,
    "consent_token": "TEST_CONSENT"
  }'
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="API reference"
    icon="terminal"
    href="/api-reference/overview"
  >
    Complete API documentation
  </Card>
  <Card
    title="Mobile SDKs"
    icon="mobile"
    href="/integrations/mobile-sdks"
  >
    Android and iOS SDK documentation
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy to production
  </Card>
</CardGroup>
