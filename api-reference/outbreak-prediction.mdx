---
title: Outbreak prediction
description: Predict outbreak risk using Z-score analysis and multi-scale forecasting
---

## Overview

The Outbreak Prediction API uses multi-scale spatial forecasting with Z-score analysis to predict disease outbreak trajectories with 95% confidence intervals.

## Endpoint

```
POST /predict
```

## Request body

```json
{
  "location": {
    "lat": 0.4221,
    "lng": 40.2255
  },
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "temporal_window_days": 14,
  "forecast_horizon_hours": 72
}
```

## Request fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `location.lat` | float | Yes | Latitude coordinate |
| `location.lng` | float | Yes | Longitude coordinate |
| `symptoms` | array | Yes | List of symptoms |
| `temporal_window_days` | integer | No | Historical data window (default: 14) |
| `forecast_horizon_hours` | integer | No | Forecast horizon (default: 72) |

## Response

```json
{
  "status": "success",
  "timestamp": "2025-12-19T20:00:00.000Z",
  "processing_time_ms": 45,
  "prediction": {
    "risk_level": "HIGH",
    "z_score": 10.3,
    "confidence": 0.95,
    "outbreak_probability": 0.87,
    "estimated_cases": {
      "current": 11776,
      "24h_forecast": 14720,
      "48h_forecast": 18400,
      "72h_forecast": 23000
    },
    "spatial_hierarchy": {
      "community": {
        "name": "Ifo Camp",
        "current_cases": 15,
        "forecast": [18, 22, 27]
      },
      "district": {
        "name": "Dadaab",
        "current_cases": 45,
        "forecast": [55, 68, 82]
      },
      "region": {
        "name": "Garissa",
        "current_cases": 120,
        "forecast": [145, 175, 210]
      },
      "national": {
        "name": "Kenya",
        "current_cases": 450,
        "forecast": [550, 680, 820]
      }
    },
    "disease_classification": {
      "primary_disease": "cholera",
      "confidence": 0.92,
      "differential_diagnoses": [
        {"disease": "cholera", "probability": 0.92},
        {"disease": "rotavirus", "probability": 0.06},
        {"disease": "norovirus", "probability": 0.02}
      ]
    },
    "parametric_bond": {
      "status": "PAYOUT_RELEASED",
      "trigger_threshold": 8.0,
      "current_z_score": 10.3,
      "payout_amount_usd": 500000
    }
  },
  "recommendations": [
    "IMMEDIATE: Activate emergency response protocols",
    "Deploy rapid response teams to affected areas",
    "Establish treatment centers in Ifo Camp",
    "Initiate contact tracing and surveillance",
    "Coordinate with WHO and local health authorities"
  ]
}
```

## Response fields

| Field | Type | Description |
|-------|------|-------------|
| `risk_level` | string | LOW, MEDIUM, HIGH, CRITICAL |
| `z_score` | float | Statistical deviation from baseline |
| `confidence` | float | Prediction confidence (0-1) |
| `outbreak_probability` | float | Probability of outbreak (0-1) |
| `estimated_cases` | object | Current and forecasted case counts |
| `spatial_hierarchy` | object | Multi-scale spatial forecasts |
| `disease_classification` | object | Disease identification with confidence |
| `parametric_bond` | object | Insurance bond status and payout |
| `recommendations` | array | Recommended actions |

## Risk levels

| Level | Z-Score Range | Description |
|-------|---------------|-------------|
| **LOW** | 0-3 | Normal variation, routine monitoring |
| **MEDIUM** | 3-5 | Elevated cases, increased surveillance |
| **HIGH** | 5-8 | Significant outbreak, response required |
| **CRITICAL** | >8 | Severe outbreak, emergency response |

## Z-score calculation

The Z-score measures statistical deviation from historical baseline:

```python
z_score = (current_cases - historical_mean) / historical_std_dev
```

**Interpretation:**
- Z-score < 3: Normal variation
- Z-score 3-5: Unusual but not alarming
- Z-score 5-8: Significant outbreak
- Z-score > 8: Severe outbreak (parametric bond trigger)

## Spatial hierarchy

Forecasts are generated at multiple spatial scales with bottom-up aggregation:

```
Community (Ifo Camp)      â†’ Event count: 15  â†’ Forecast: [18, 22, 27]
    â†“
District (Dadaab)         â†’ Event count: 45  â†’ Forecast: [55, 68, 82]
    â†“
Region (Garissa)          â†’ Event count: 120 â†’ Forecast: [145, 175, 210]
    â†“
National (Kenya)          â†’ Event count: 450 â†’ Forecast: [550, 680, 820]
```

This ensures spatial consistency: national forecast = sum of regional forecasts.

## Parametric bonds

When Z-score exceeds threshold (typically 8.0), parametric insurance bonds automatically trigger payouts:

```json
{
  "status": "PAYOUT_RELEASED",
  "trigger_threshold": 8.0,
  "current_z_score": 10.3,
  "payout_amount_usd": 500000
}
```

**Bond states:**
- `LOCKED`: Z-score below threshold
- `MONITORING`: Z-score approaching threshold
- `TRIGGERED`: Z-score exceeded threshold
- `PAYOUT_RELEASED`: Funds disbursed

## Example: Python

```python
import requests

response = requests.post(
    "http://localhost:8080/predict",
    json={
        "location": {"lat": 0.4221, "lng": 40.2255},
        "symptoms": ["diarrhea", "vomiting", "dehydration"],
        "temporal_window_days": 14,
        "forecast_horizon_hours": 72
    }
)

result = response.json()

print(f"Risk Level: {result['prediction']['risk_level']}")
print(f"Z-Score: {result['prediction']['z_score']}")
print(f"Outbreak Probability: {result['prediction']['outbreak_probability']:.1%}")
print(f"Current Cases: {result['prediction']['estimated_cases']['current']}")
print(f"72h Forecast: {result['prediction']['estimated_cases']['72h_forecast']}")

if result['prediction']['parametric_bond']['status'] == 'PAYOUT_RELEASED':
    payout = result['prediction']['parametric_bond']['payout_amount_usd']
    print(f"ðŸš¨ Parametric bond triggered - Payout: ${payout:,}")
```

## Example: cURL

```bash
curl -X POST http://localhost:8080/predict \
  -H "Content-Type: application/json" \
  -d '{
    "location": {"lat": 0.4221, "lng": 40.2255},
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "temporal_window_days": 14,
    "forecast_horizon_hours": 72
  }'
```

## Integration with Golden Thread

Outbreak predictions integrate with Golden Thread for verified timelines:

```python
from edge_node.sync_protocol.golden_thread import GoldenThread
import requests

# Get outbreak prediction
response = requests.post(
    "http://localhost:8080/predict",
    json={
        "location": {"lat": 0.4221, "lng": 40.2255},
        "symptoms": ["diarrhea", "vomiting"]
    }
)

prediction = response.json()['prediction']

# Fuse with Golden Thread
gt = GoldenThread()
fused = gt.fuse_data_streams(
    cbs_signal={
        'location': 'Dadaab',
        'symptom': 'diarrhea',
        'timestamp': prediction['timestamp']
    },
    prediction_data=prediction,
    patient_id='OUTBREAK_DADAAB_001'
)

# Verification score indicates confidence
print(f"Verification Score: {fused.verification_score}")
```

## Integration with Vertex AI

The outbreak prediction API uses Vertex AI for multi-scale forecasting:

```python
from cloud_oracle.vertex_ai_forecasting import VertexAIForecaster

forecaster = VertexAIForecaster(
    project_id="iluminara-project",
    region="us-central1"
)

# Train hierarchical forecasting model
forecaster.train_hierarchical_model(
    training_data=historical_cases,
    spatial_hierarchy={
        "national": ["region1", "region2"],
        "region1": ["district1", "district2"],
        "district1": ["community1", "community2"]
    }
)

# Generate 72-hour forecast
forecast = forecaster.forecast(
    location="Dadaab",
    horizon_hours=72,
    confidence_level=0.95
)
```

## Performance

- **Prediction latency**: <50ms average
- **Forecast accuracy**: 95% confidence intervals
- **Spatial consistency**: 100% (bottom-up aggregation)
- **Throughput**: 100+ predictions/second

## Error handling

### Missing location

```json
{
  "status": "error",
  "error": "missing_location",
  "message": "Location coordinates required for outbreak prediction"
}
```

### Missing symptoms

```json
{
  "status": "error",
  "error": "missing_symptoms",
  "message": "Symptoms list required for disease classification"
}
```

### Insufficient data

```json
{
  "status": "error",
  "error": "insufficient_data",
  "message": "Insufficient historical data for reliable prediction"
}
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Convert voice alerts to outbreak data
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Vertex AI integration"
    icon="brain"
    href="/deployment/vertex-ai"
  >
    Deploy forecasting models
  </Card>
  <Card
    title="Cloud Oracle"
    icon="cloud"
    href="/architecture/cloud-oracle"
  >
    Multi-scale forecasting architecture
  </Card>
</CardGroup>
