---
title: Outbreak prediction
description: Predict outbreak risk using Z-score analysis and spatiotemporal modeling
---

## Endpoint

```
POST /predict
```

## Description

Predict outbreak risk using Z-score analysis, spatiotemporal modeling, and historical data patterns. Integrates with the Cloud Oracle for multi-scale forecasting.

## Headers

| Header | Value | Required |
|--------|-------|----------|
| `Content-Type` | `application/json` | Yes |

## Request body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `location` | object | Yes | Geographic coordinates |
| `location.lat` | float | Yes | Latitude |
| `location.lng` | float | Yes | Longitude (or `lon`) |
| `symptoms` | array | Yes | List of symptoms |
| `population` | integer | No | Population size for risk calculation |
| `historical_data` | array | No | Historical case data for trend analysis |

## Request

```bash
curl -X POST http://localhost:8080/predict \
  -H "Content-Type: application/json" \
  -d '{
    "location": {
      "lat": 0.4221,
      "lng": 40.2255
    },
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "population": 200000
  }'
```

## Response

### Success (200 OK)

```json
{
  "status": "success",
  "timestamp": "2025-12-19T20:00:00.000Z",
  "processing_time_ms": 45,
  "location": {
    "lat": 0.4221,
    "lng": 40.2255,
    "name": "Dadaab Refugee Camp"
  },
  "z_score": 10.3,
  "risk_level": "CRITICAL",
  "predicted_cases": 11776,
  "confidence_interval": {
    "lower": 9500,
    "upper": 14000
  },
  "outbreak_probability": 0.98,
  "disease_likelihood": {
    "cholera": 0.92,
    "typhoid": 0.15,
    "dysentery": 0.08
  },
  "recommendations": [
    "IMMEDIATE: Activate emergency response protocol",
    "Deploy rapid response teams to affected areas",
    "Establish oral rehydration stations",
    "Initiate contact tracing and isolation",
    "Notify WHO and regional health authorities"
  ],
  "forecast_72h": {
    "24h": 13500,
    "48h": 15800,
    "72h": 18200
  },
  "spatial_spread": {
    "radius_km": 5.2,
    "affected_zones": ["Ifo", "Dagahaley", "Hagadera"]
  }
}
```

### Response fields

| Field | Type | Description |
|-------|------|-------------|
| `status` | string | "success" or "error" |
| `timestamp` | string | ISO 8601 timestamp |
| `processing_time_ms` | integer | Processing time in milliseconds |
| `location` | object | Geographic location details |
| `z_score` | float | Statistical deviation from baseline |
| `risk_level` | string | LOW, MEDIUM, HIGH, CRITICAL |
| `predicted_cases` | integer | Predicted case count |
| `confidence_interval` | object | 95% confidence interval |
| `outbreak_probability` | float | Probability of outbreak (0-1) |
| `disease_likelihood` | object | Disease-specific probabilities |
| `recommendations` | array | Recommended actions |
| `forecast_72h` | object | 72-hour forecast |
| `spatial_spread` | object | Geographic spread analysis |

### Error (400 Bad Request)

```json
{
  "status": "error",
  "error": "missing_location",
  "message": "Location is required (lat, lng)"
}
```

## Risk levels

| Level | Z-Score Range | Description | Action |
|-------|---------------|-------------|--------|
| `LOW` | < 2.0 | Normal variation | Routine monitoring |
| `MEDIUM` | 2.0 - 4.0 | Elevated cases | Increased surveillance |
| `HIGH` | 4.0 - 8.0 | Significant outbreak | Activate response teams |
| `CRITICAL` | > 8.0 | Severe outbreak | Emergency response |

## Z-score calculation

The Z-score measures how many standard deviations the current case count is from the historical mean:

```
Z = (X - Î¼) / Ïƒ

Where:
- X = Current case count
- Î¼ = Historical mean
- Ïƒ = Standard deviation
```

**Interpretation:**
- Z < 2: Within normal range
- Z = 2-4: Unusual but not alarming
- Z = 4-8: Significant outbreak
- Z > 8: Severe outbreak requiring immediate action

## Disease likelihood

The system calculates disease-specific probabilities based on:

1. **Symptom patterns** - Matching symptoms to disease profiles
2. **Geographic factors** - Endemic diseases in the region
3. **Seasonal patterns** - Time of year and weather conditions
4. **Historical data** - Previous outbreaks in the area

### Example: Cholera detection

```json
{
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "disease_likelihood": {
    "cholera": 0.92,  // High probability due to classic symptoms
    "typhoid": 0.15,  // Lower probability
    "dysentery": 0.08 // Unlikely
  }
}
```

## Spatiotemporal forecasting

The Cloud Oracle uses hierarchical forecasting across spatial scales:

```
Community (Ifo Camp)      â†’ Forecast: [18, 22, 27]
    â†“
District (Dadaab)         â†’ Forecast: [55, 68, 82]
    â†“
Region (Garissa)          â†’ Forecast: [145, 175, 210]
    â†“
National (Kenya)          â†’ Forecast: [550, 680, 820]
```

## Integration with Golden Thread

Predictions automatically integrate with the Golden Thread data fusion engine:

```python
from cloud_oracle.outbreak_predictor import OutbreakPredictor
from edge_node.sync_protocol.golden_thread import GoldenThread

predictor = OutbreakPredictor()
gt = GoldenThread()

# Make prediction
prediction = predictor.predict(
    location={'lat': 0.4221, 'lng': 40.2255},
    symptoms=['diarrhea', 'vomiting']
)

# Fuse with CBS and EMR data
fused = gt.fuse_data_streams(
    cbs_signal={'location': 'Dadaab', 'symptom': 'diarrhea'},
    emr_record={'location': 'Dadaab', 'diagnosis': 'cholera'},
    patient_id='AUTO_GENERATED'
)

# Verification score enhances prediction confidence
if fused.verification_score > 0.8:
    print("High confidence prediction")
```

## Sovereignty compliance

All outbreak predictions enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate prediction action
guardrail.validate_action(
    action_type='Outbreak_Analysis',
    payload={
        'data_type': 'Health_Analytics',
        'processing_location': 'Cloud_Oracle',
        'consent_token': 'PUBLIC_HEALTH_SURVEILLANCE'
    },
    jurisdiction='KDPA_KE'
)
```

## PubSub alerts

High-risk predictions automatically trigger PubSub alerts:

```python
from cloud_oracle.pubsub_alerts import AlertPublisher

publisher = AlertPublisher()

# Publish alert if risk is HIGH or CRITICAL
if prediction['risk_level'] in ['HIGH', 'CRITICAL']:
    publisher.publish_outbreak_alert(prediction)
```

## Python SDK example

```python
import requests

# Predict outbreak
response = requests.post(
    'http://localhost:8080/predict',
    json={
        'location': {'lat': 0.4221, 'lng': 40.2255},
        'symptoms': ['diarrhea', 'vomiting', 'dehydration'],
        'population': 200000
    }
)

result = response.json()

if result['status'] == 'success':
    print(f"Z-Score: {result['z_score']}")
    print(f"Risk Level: {result['risk_level']}")
    print(f"Predicted Cases: {result['predicted_cases']}")
    
    # Check if emergency response needed
    if result['risk_level'] == 'CRITICAL':
        print("ðŸš¨ CRITICAL OUTBREAK - Activating emergency response")
        
        # Trigger response actions
        for recommendation in result['recommendations']:
            print(f"  - {recommendation}")
```

## Performance

- **Prediction latency**: ~45ms average
- **Throughput**: 100+ predictions/second
- **Accuracy**: 92% for cholera outbreaks (validated against historical data)
- **False positive rate**: <5%

## Next steps

<CardGroup cols={2}>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Create CBS signals from voice alerts
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Cloud Oracle"
    icon="cloud"
    href="/architecture/cloud-oracle"
  >
    Deep dive into forecasting engine
  </Card>
  <Card
    title="Deploy to GCP"
    icon="rocket"
    href="/deployment/gcp"
  >
    Production deployment guide
  </Card>
</CardGroup>
