---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the Golden Thread protocol for data fusion from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity preservation"
</Card>

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│              MOBILE HEALTH APPS                             │
│  - Community Health Volunteer (CHV) Apps                   │
│  - Patient Self-Reporting Apps                             │
│  - Clinic Management Systems                               │
└─────────────────────────────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│              BIO-INTERFACE REST API                         │
│  - /submit-cbs-report (Community surveillance)             │
│  - /submit-emr-record (Clinical records)                   │
│  - /get-patient-timeline (Fused data)                      │
│  - /consent-management (GDPR compliance)                   │
└─────────────────────────────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│              GOLDEN THREAD FUSION                           │
│  - Cross-source verification                               │
│  - Verification score calculation                          │
│  - Conflict resolution                                     │
└─────────────────────────────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────┐
│              SOVEREIGNGUARDRAIL                             │
│  - Data sovereignty validation                             │
│  - Consent verification                                    │
│  - Audit trail logging                                     │
└─────────────────────────────────────────────────────────────┘
```

## Base URL

```
https://api.iluminara.health/v1
```

For local development:
```
http://localhost:8080/v1
```

## Authentication

All API requests require authentication using JWT tokens:

```bash
curl -X POST https://api.iluminara.health/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "chv_amina_hassan",
    "password": "secure_password",
    "jurisdiction": "KDPA_KE"
  }'
```

Response:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "jurisdiction": "KDPA_KE",
  "permissions": ["submit_cbs", "view_timeline"]
}
```

## Submit CBS report

Submit community-based surveillance report from CHV mobile app.

### Endpoint

```
POST /v1/submit-cbs-report
```

### Headers

| Header | Value | Required |
|--------|-------|----------|
| `Authorization` | `Bearer {token}` | Yes |
| `Content-Type` | `application/json` | Yes |

### Request body

```json
{
  "patient_id": "PAT_12345",
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp, Block C3"
  },
  "timestamp": "2025-01-15T08:30:00Z",
  "symptoms": [
    {
      "symptom": "diarrhea",
      "severity": 9,
      "duration_hours": 12
    },
    {
      "symptom": "vomiting",
      "severity": 8,
      "duration_hours": 8
    },
    {
      "symptom": "dehydration",
      "severity": 9,
      "duration_hours": 12
    }
  ],
  "vital_signs": {
    "temperature": 38.5,
    "heart_rate": 95,
    "blood_pressure": "110/70",
    "respiratory_rate": 22
  },
  "notes": "Patient reports severe watery diarrhea. Suspected cholera. Immediate ORS started.",
  "consent_token": "CONSENT_PAT_12345_20250115"
}
```

### Response (200 OK)

```json
{
  "status": "success",
  "report_id": "CBS_20250115_001",
  "timestamp": "2025-01-15T08:30:15Z",
  "verification": {
    "status": "PENDING",
    "message": "Awaiting EMR correlation for verification"
  },
  "alert": {
    "level": "CRITICAL",
    "message": "Suspected cholera outbreak - immediate response required",
    "recommendations": [
      "Start ORS immediately",
      "Isolate patient",
      "Notify district health officer"
    ]
  },
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "consent_validated": true,
    "data_residency": "africa-south1"
  }
}
```

## Submit EMR record

Submit electronic medical record from clinic management system.

### Endpoint

```
POST /v1/submit-emr-record
```

### Request body

```json
{
  "patient_id": "PAT_12345",
  "facility_id": "DADAAB_CLINIC",
  "provider_id": "DR_FATIMA_OMAR",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Primary Health Center"
  },
  "timestamp": "2025-01-15T09:00:00Z",
  "diagnosis": {
    "primary": "cholera",
    "icd10_code": "A00.9",
    "confidence": 0.95
  },
  "symptoms": [
    {
      "symptom": "diarrhea",
      "severity": 9,
      "duration_hours": 12
    },
    {
      "symptom": "vomiting",
      "severity": 8,
      "duration_hours": 8
    }
  ],
  "lab_results": [
    {
      "test": "stool_culture",
      "result": "Vibrio cholerae O1 detected",
      "timestamp": "2025-01-15T10:30:00Z"
    }
  ],
  "treatment": {
    "medications": [
      {
        "name": "ORS",
        "dosage": "1L every 2 hours",
        "route": "oral"
      },
      {
        "name": "Doxycycline",
        "dosage": "300mg single dose",
        "route": "oral"
      }
    ],
    "procedures": ["IV_rehydration"]
  },
  "consent_token": "CONSENT_PAT_12345_20250115"
}
```

### Response (200 OK)

```json
{
  "status": "success",
  "record_id": "EMR_20250115_001",
  "timestamp": "2025-01-15T09:00:15Z",
  "verification": {
    "status": "CONFIRMED",
    "score": 1.0,
    "message": "CBS report CBS_20250115_001 correlated - location and time match",
    "correlated_reports": ["CBS_20250115_001"]
  },
  "golden_thread": {
    "fused_record_id": "GT_20250115_001",
    "verification_score": 1.0,
    "evidence_chain": [
      {
        "source": "CBS",
        "timestamp": "2025-01-15T08:30:00Z",
        "symptoms": ["diarrhea", "vomiting", "dehydration"]
      },
      {
        "source": "EMR",
        "timestamp": "2025-01-15T09:00:00Z",
        "diagnosis": "cholera",
        "lab_confirmed": true
      }
    ]
  },
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "consent_validated": true,
    "data_residency": "africa-south1",
    "audit_logged": true
  }
}
```

## Get patient timeline

Retrieve fused patient timeline from Golden Thread.

### Endpoint

```
GET /v1/patient/{patient_id}/timeline
```

### Query parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `start_date` | ISO 8601 | No | Start of timeline (default: 30 days ago) |
| `end_date` | ISO 8601 | No | End of timeline (default: now) |
| `include_sources` | boolean | No | Include raw CBS/EMR sources (default: false) |

### Request

```bash
curl -X GET "https://api.iluminara.health/v1/patient/PAT_12345/timeline?start_date=2025-01-01T00:00:00Z&include_sources=true" \
  -H "Authorization: Bearer {token}"
```

### Response (200 OK)

```json
{
  "status": "success",
  "patient_id": "PAT_12345",
  "timeline": [
    {
      "timestamp": "2025-01-15T08:30:00Z",
      "event_type": "CBS_REPORT",
      "verification_score": 1.0,
      "verification_status": "CONFIRMED",
      "symptoms": ["diarrhea", "vomiting", "dehydration"],
      "severity": 9,
      "location": "Dadaab Refugee Camp, Block C3",
      "source": "CHV_AMINA_HASSAN"
    },
    {
      "timestamp": "2025-01-15T09:00:00Z",
      "event_type": "EMR_RECORD",
      "verification_score": 1.0,
      "verification_status": "CONFIRMED",
      "diagnosis": "cholera",
      "icd10_code": "A00.9",
      "lab_confirmed": true,
      "location": "Dadaab Primary Health Center",
      "provider": "DR_FATIMA_OMAR"
    },
    {
      "timestamp": "2025-01-15T10:30:00Z",
      "event_type": "LAB_RESULT",
      "verification_score": 1.0,
      "test": "stool_culture",
      "result": "Vibrio cholerae O1 detected",
      "location": "Dadaab Primary Health Center"
    }
  ],
  "summary": {
    "total_events": 3,
    "verified_events": 3,
    "verification_rate": 1.0,
    "primary_diagnosis": "cholera",
    "risk_level": "CRITICAL"
  },
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "consent_validated": true,
    "data_residency": "africa-south1"
  }
}
```

## Consent management

Manage patient consent for data processing.

### Submit consent

```
POST /v1/consent/submit
```

#### Request body

```json
{
  "patient_id": "PAT_12345",
  "consent_scope": ["diagnosis", "treatment", "public_health_surveillance"],
  "jurisdiction": "KDPA_KE",
  "consent_method": "verbal",
  "witness_id": "CHV_AMINA_HASSAN",
  "expiration_date": "2026-01-15T00:00:00Z",
  "emergency_override": false
}
```

#### Response (200 OK)

```json
{
  "status": "success",
  "consent_token": "CONSENT_PAT_12345_20250115",
  "expires_at": "2026-01-15T00:00:00Z",
  "scope": ["diagnosis", "treatment", "public_health_surveillance"],
  "compliance": {
    "framework": "KDPA_KE",
    "articles": ["§11 (Lawfulness)", "§42 (Data Subject Rights)"]
  }
}
```

### Revoke consent

```
POST /v1/consent/revoke
```

#### Request body

```json
{
  "patient_id": "PAT_12345",
  "consent_token": "CONSENT_PAT_12345_20250115",
  "reason": "patient_request"
}
```

#### Response (200 OK)

```json
{
  "status": "success",
  "message": "Consent revoked - data processing halted",
  "crypto_shredder": {
    "keys_shredded": 3,
    "data_irrecoverable": true
  },
  "compliance": {
    "framework": "GDPR_ART_17",
    "right_to_erasure": "enforced"
  }
}
```

## Error responses

### 400 Bad Request

```json
{
  "status": "error",
  "error": "invalid_request",
  "message": "Missing required field: patient_id",
  "details": {
    "field": "patient_id",
    "expected": "string",
    "received": "null"
  }
}
```

### 403 Forbidden (Sovereignty Violation)

```json
{
  "status": "error",
  "error": "sovereignty_violation",
  "message": "Data transfer blocked: PHI cannot leave sovereign territory",
  "compliance": {
    "violated_framework": "KDPA_KE",
    "violated_article": "§37 (Transfer Restrictions)",
    "action_blocked": "cross_border_transfer"
  }
}
```

### 401 Unauthorized

```json
{
  "status": "error",
  "error": "unauthorized",
  "message": "Invalid or expired token"
}
```

## SDK examples

### Python SDK

```python
import requests
from datetime import datetime

class ILuminaraClient:
    def __init__(self, api_key: str, base_url: str = "https://api.iluminara.health/v1"):
        self.api_key = api_key
        self.base_url = base_url
        self.headers = {
            "Authorization": f"Bearer {api_key}",
            "Content-Type": "application/json"
        }
    
    def submit_cbs_report(self, patient_id: str, symptoms: list, location: dict, consent_token: str):
        """Submit CBS report from CHV mobile app."""
        payload = {
            "patient_id": patient_id,
            "chv_id": "CHV_AMINA_HASSAN",
            "location": location,
            "timestamp": datetime.utcnow().isoformat() + "Z",
            "symptoms": symptoms,
            "consent_token": consent_token
        }
        
        response = requests.post(
            f"{self.base_url}/submit-cbs-report",
            headers=self.headers,
            json=payload
        )
        
        return response.json()
    
    def get_patient_timeline(self, patient_id: str, include_sources: bool = False):
        """Retrieve fused patient timeline."""
        params = {"include_sources": include_sources}
        
        response = requests.get(
            f"{self.base_url}/patient/{patient_id}/timeline",
            headers=self.headers,
            params=params
        )
        
        return response.json()

# Usage
client = ILuminaraClient(api_key="your_api_key")

# Submit CBS report
result = client.submit_cbs_report(
    patient_id="PAT_12345",
    symptoms=[
        {"symptom": "diarrhea", "severity": 9, "duration_hours": 12},
        {"symptom": "vomiting", "severity": 8, "duration_hours": 8}
    ],
    location={"lat": 0.0512, "lng": 40.3129, "name": "Dadaab Camp"},
    consent_token="CONSENT_PAT_12345_20250115"
)

print(f"Report ID: {result['report_id']}")
print(f"Alert Level: {result['alert']['level']}")
```

### JavaScript SDK

```javascript
class ILuminaraClient {
  constructor(apiKey, baseUrl = 'https://api.iluminara.health/v1') {
    this.apiKey = apiKey;
    this.baseUrl = baseUrl;
  }

  async submitCBSReport(patientId, symptoms, location, consentToken) {
    const response = await fetch(`${this.baseUrl}/submit-cbs-report`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        patient_id: patientId,
        chv_id: 'CHV_AMINA_HASSAN',
        location: location,
        timestamp: new Date().toISOString(),
        symptoms: symptoms,
        consent_token: consentToken
      })
    });

    return await response.json();
  }

  async getPatientTimeline(patientId, includeSources = false) {
    const params = new URLSearchParams({ include_sources: includeSources });
    
    const response = await fetch(
      `${this.baseUrl}/patient/${patientId}/timeline?${params}`,
      {
        headers: {
          'Authorization': `Bearer ${this.apiKey}`
        }
      }
    );

    return await response.json();
  }
}

// Usage
const client = new ILuminaraClient('your_api_key');

const result = await client.submitCBSReport(
  'PAT_12345',
  [
    { symptom: 'diarrhea', severity: 9, duration_hours: 12 },
    { symptom: 'vomiting', severity: 8, duration_hours: 8 }
  ],
  { lat: 0.0512, lng: 40.3129, name: 'Dadaab Camp' },
  'CONSENT_PAT_12345_20250115'
);

console.log(`Report ID: ${result.report_id}`);
console.log(`Alert Level: ${result.alert.level}`);
```

## Rate limits

| Endpoint | Rate Limit | Burst |
|----------|-----------|-------|
| `/submit-cbs-report` | 100/hour | 10/minute |
| `/submit-emr-record` | 100/hour | 10/minute |
| `/patient/*/timeline` | 1000/hour | 100/minute |
| `/consent/*` | 50/hour | 5/minute |

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="SovereignGuardrail"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure compliance enforcement
  </Card>
  <Card
    title="Mobile app integration"
    icon="mobile"
    href="/integrations/mobile-apps"
  >
    Build CHV mobile applications
  </Card>
  <Card
    title="Deploy API"
    icon="rocket"
    href="/deployment/gcp"
  >
    Deploy to production
  </Card>
</CardGroup>
