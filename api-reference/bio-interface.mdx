---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the **Golden Thread protocol** for data fusion and verification.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Every mobile device becomes a sovereign health sentinel."
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│   MOBILE HEALTH APP                 │
│  - CHV data collection              │
│  - Patient symptom reporting        │
│  - Offline-first design             │
└─────────────────────────────────────┘
              │
              │ HTTPS/TLS 1.3
              ▼
┌─────────────────────────────────────┐
│   BIO-INTERFACE API                 │
│  - Authentication (JWT)             │
│  - Rate limiting                    │
│  - Data validation                  │
└─────────────────────────────────────┘
              │
              │ Golden Thread
              ▼
┌─────────────────────────────────────┐
│   DATA FUSION ENGINE                │
│  - CBS signal creation              │
│  - EMR matching                     │
│  - Verification scoring             │
└─────────────────────────────────────┘
              │
              │ Sovereignty check
              ▼
┌─────────────────────────────────────┐
│   SOVEREIGNGUARDRAIL                │
│  - Jurisdiction validation          │
│  - Consent verification             │
│  - Audit logging                    │
└─────────────────────────────────────┘
```

## Base URL

```
https://api.iluminara.health/v1
```

For local development:
```
http://localhost:8080/v1
```

## Authentication

All API requests require JWT authentication.

### Obtain access token

```bash
POST /auth/token
Content-Type: application/json

{
  "username": "chv_amina_hassan",
  "password": "secure_password",
  "device_id": "DEVICE_001",
  "jurisdiction": "KDPA_KE"
}
```

**Response:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "jurisdiction": "KDPA_KE",
  "permissions": ["cbs_submit", "patient_read"]
}
```

### Use access token

```bash
GET /health-records
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

## Core endpoints

### Submit CBS signal

Submit community-based surveillance data from mobile app.

```bash
POST /cbs/submit
Authorization: Bearer {token}
Content-Type: application/json

{
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "symptoms": [
    {
      "name": "diarrhea",
      "severity": 8,
      "onset": "2025-01-15T08:00:00Z"
    },
    {
      "name": "vomiting",
      "severity": 7,
      "onset": "2025-01-15T09:00:00Z"
    }
  ],
  "vital_signs": {
    "temperature": 38.5,
    "heart_rate": 95,
    "blood_pressure": "110/70"
  },
  "reporter": {
    "chv_id": "CHV_AMINA_001",
    "name": "Amina Hassan",
    "contact": "+254712345678"
  },
  "timestamp": "2025-01-15T10:30:00Z",
  "consent_token": "CONSENT_12345_2025"
}
```

**Response:**
```json
{
  "status": "success",
  "cbs_signal_id": "CBS_001",
  "verification_status": "PENDING",
  "golden_thread_id": "GT_12345",
  "next_steps": [
    "Signal queued for EMR matching",
    "Verification will complete within 24 hours"
  ],
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "consent_validated": true,
    "data_residency": "africa-south1"
  }
}
```

### Query verification status

Check if CBS signal has been verified against EMR records.

```bash
GET /cbs/verify/{cbs_signal_id}
Authorization: Bearer {token}
```

**Response:**
```json
{
  "cbs_signal_id": "CBS_001",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "matched_emr_id": "EMR_54321",
  "evidence": {
    "location_match": true,
    "time_delta_hours": 2.5,
    "symptom_correlation": 0.95
  },
  "fused_record": {
    "patient_id": "PAT_12345",
    "diagnosis": "cholera",
    "treatment_plan": "ORS + isolation",
    "confidence": 0.98
  }
}
```

### Submit patient record

Submit complete patient health record (requires elevated permissions).

```bash
POST /patients
Authorization: Bearer {token}
Content-Type: application/json

{
  "patient_id": "PAT_12345",
  "demographics": {
    "age": 35,
    "gender": "F",
    "location": "Dadaab"
  },
  "medical_history": [
    {
      "condition": "malaria",
      "date": "2024-06-15",
      "resolved": true
    }
  ],
  "current_symptoms": [
    "diarrhea",
    "vomiting",
    "dehydration"
  ],
  "diagnosis": "suspected_cholera",
  "treatment": {
    "medications": ["ORS", "Zinc"],
    "isolation": true,
    "follow_up_date": "2025-01-17"
  },
  "consent": {
    "token": "CONSENT_12345_2025",
    "scope": ["diagnosis", "treatment", "public_health_surveillance"],
    "expires": "2026-01-15"
  }
}
```

**Response:**
```json
{
  "status": "success",
  "patient_id": "PAT_12345",
  "emr_id": "EMR_54321",
  "golden_thread_id": "GT_12345",
  "compliance": {
    "jurisdiction": "KDPA_KE",
    "consent_validated": true,
    "retention_policy": "HOT",
    "expires_at": "2025-07-15T00:00:00Z"
  }
}
```

### Query outbreak risk

Get real-time outbreak risk assessment for a location.

```bash
POST /outbreak/risk
Authorization: Bearer {token}
Content-Type: application/json

{
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "radius_km": 5,
  "diseases": ["cholera", "malaria", "measles"]
}
```

**Response:**
```json
{
  "location": "Dadaab Refugee Camp",
  "risk_assessment": {
    "cholera": {
      "risk_level": "HIGH",
      "z_score": 8.5,
      "cases_last_7_days": 45,
      "trend": "INCREASING",
      "r_effective": 2.8,
      "forecast_72h": [55, 68, 82]
    },
    "malaria": {
      "risk_level": "MEDIUM",
      "z_score": 3.2,
      "cases_last_7_days": 12,
      "trend": "STABLE"
    }
  },
  "recommendations": [
    "IMMEDIATE: Activate cholera response protocol",
    "Distribute ORS to all households",
    "Chlorinate water sources",
    "Establish isolation units"
  ]
}
```

### Sync offline data

Bulk upload data collected while offline.

```bash
POST /sync/bulk
Authorization: Bearer {token}
Content-Type: application/json

{
  "device_id": "DEVICE_001",
  "sync_timestamp": "2025-01-15T12:00:00Z",
  "records": [
    {
      "type": "cbs_signal",
      "local_id": "LOCAL_001",
      "timestamp": "2025-01-15T08:00:00Z",
      "data": { /* CBS signal data */ }
    },
    {
      "type": "cbs_signal",
      "local_id": "LOCAL_002",
      "timestamp": "2025-01-15T09:30:00Z",
      "data": { /* CBS signal data */ }
    }
  ]
}
```

**Response:**
```json
{
  "status": "success",
  "synced_count": 2,
  "failed_count": 0,
  "results": [
    {
      "local_id": "LOCAL_001",
      "server_id": "CBS_101",
      "status": "success"
    },
    {
      "local_id": "LOCAL_002",
      "server_id": "CBS_102",
      "status": "success"
    }
  ]
}
```

## Mobile SDK

### Android (Kotlin)

```kotlin
import okhttp3.*
import com.google.gson.Gson

class ILuminaraClient(
    private val baseUrl: String,
    private val accessToken: String
) {
    private val client = OkHttpClient()
    private val gson = Gson()
    
    fun submitCBSSignal(signal: CBSSignal): CBSResponse {
        val json = gson.toJson(signal)
        
        val request = Request.Builder()
            .url("$baseUrl/cbs/submit")
            .addHeader("Authorization", "Bearer $accessToken")
            .post(RequestBody.create(
                MediaType.parse("application/json"),
                json
            ))
            .build()
        
        val response = client.newCall(request).execute()
        return gson.fromJson(response.body()?.string(), CBSResponse::class.java)
    }
    
    fun getOutbreakRisk(location: Location): OutbreakRisk {
        val json = gson.toJson(mapOf(
            "location" to mapOf(
                "lat" to location.latitude,
                "lng" to location.longitude
            ),
            "radius_km" to 5
        ))
        
        val request = Request.Builder()
            .url("$baseUrl/outbreak/risk")
            .addHeader("Authorization", "Bearer $accessToken")
            .post(RequestBody.create(
                MediaType.parse("application/json"),
                json
            ))
            .build()
        
        val response = client.newCall(request).execute()
        return gson.fromJson(response.body()?.string(), OutbreakRisk::class.java)
    }
}

// Usage
val client = ILuminaraClient(
    baseUrl = "https://api.iluminara.health/v1",
    accessToken = "your_token"
)

val signal = CBSSignal(
    patientId = "PAT_001",
    location = Location(0.0512, 40.3129),
    symptoms = listOf(
        Symptom("diarrhea", 8),
        Symptom("vomiting", 7)
    )
)

val response = client.submitCBSSignal(signal)
println("CBS Signal ID: ${response.cbsSignalId}")
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    let accessToken: String
    
    init(baseURL: String, accessToken: String) {
        self.baseURL = baseURL
        self.accessToken = accessToken
    }
    
    func submitCBSSignal(signal: CBSSignal, completion: @escaping (Result<CBSResponse, Error>) -> Void) {
        guard let url = URL(string: "\(baseURL)/cbs/submit") else { return }
        
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.addValue("Bearer \(accessToken)", forHTTPHeaderField: "Authorization")
        request.addValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let encoder = JSONEncoder()
        request.httpBody = try? encoder.encode(signal)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            guard let data = data else { return }
            
            let decoder = JSONDecoder()
            if let cbsResponse = try? decoder.decode(CBSResponse.self, from: data) {
                completion(.success(cbsResponse))
            }
        }.resume()
    }
}

// Usage
let client = ILuminaraClient(
    baseURL: "https://api.iluminara.health/v1",
    accessToken: "your_token"
)

let signal = CBSSignal(
    patientId: "PAT_001",
    location: Location(lat: 0.0512, lng: 40.3129),
    symptoms: [
        Symptom(name: "diarrhea", severity: 8),
        Symptom(name: "vomiting", severity: 7)
    ]
)

client.submitCBSSignal(signal: signal) { result in
    switch result {
    case .success(let response):
        print("CBS Signal ID: \(response.cbsSignalId)")
    case .failure(let error):
        print("Error: \(error)")
    }
}
```

## Rate limiting

| Endpoint | Rate Limit | Burst |
|----------|-----------|-------|
| `/cbs/submit` | 100/hour | 10/minute |
| `/patients` | 50/hour | 5/minute |
| `/outbreak/risk` | 1000/hour | 100/minute |
| `/sync/bulk` | 10/hour | 2/minute |

## Error codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `invalid_token` | 401 | JWT token invalid or expired |
| `insufficient_permissions` | 403 | User lacks required permissions |
| `sovereignty_violation` | 403 | Action violates data sovereignty rules |
| `invalid_consent` | 400 | Consent token invalid or expired |
| `rate_limit_exceeded` | 429 | Too many requests |
| `validation_error` | 400 | Request data validation failed |

## Compliance

All Bio-Interface API calls enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Transfer',
    payload={
        'data_type': 'PHI',
        'destination': 'Edge_Node',
        'consent_token': 'CONSENT_12345_2025',
        'jurisdiction': 'KDPA_KE'
    },
    jurisdiction='KDPA_KE'
)
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Process voice alerts from CHVs
  </Card>
  <Card
    title="AI agents"
    icon="brain-circuit"
    href="/ai-agents/overview"
  >
    Deploy autonomous surveillance
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure compliance enforcement
  </Card>
</CardGroup>
