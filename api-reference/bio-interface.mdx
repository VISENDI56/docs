---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the **Golden Thread protocol** for data fusion from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  \"Zero-friction data collection with sovereign dignity preservation\"
</Card>

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│              MOBILE HEALTH APPS (Bio-Interface)              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   CHV App    │  │  Clinic App  │  │  Patient App │     │
│  │  (Android)   │  │   (Tablet)   │  │    (iOS)     │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
                            │
                            │ HTTPS / TLS 1.3
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                  BIO-INTERFACE REST API                      │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  /api/v1/cbs/report          (CHV voice/text)       │  │
│  │  /api/v1/emr/record          (Clinic diagnosis)     │  │
│  │  /api/v1/patient/symptoms    (Self-reporting)       │  │
│  │  /api/v1/sync/status         (Offline sync)         │  │
│  │  /api/v1/consent/validate    (Consent management)   │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│              SOVEREIGNGUARDRAIL VALIDATION                   │
│  - Consent validation                                        │
│  - Data sovereignty check                                    │
│  - Jurisdiction compliance                                   │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                  GOLDEN THREAD FUSION                        │
│  Merges CBS + EMR + IDSR into verified timeline             │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                    DATA STORAGE                              │
│  - Edge Node (Local SQLite)                                  │
│  - Cloud Oracle (BigQuery + Spanner)                         │
└─────────────────────────────────────────────────────────────┘
```

## Authentication

All API requests require authentication using JWT tokens.

### Obtain access token

```bash
curl -X POST https://api.iluminara.health/auth/token \
  -H \"Content-Type: application/json\" \
  -d '{
    \"username\": \"chv_amina_hassan\",
    \"password\": \"secure_password\",
    \"device_id\": \"DEVICE_12345\"
  }'
```

### Response

```json
{
  \"access_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\",
  \"token_type\": \"Bearer\",
  \"expires_in\": 3600,
  \"refresh_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\",
  \"scope\": \"cbs:write emr:read patient:read\"
}
```

### Use access token

```bash
curl -X POST https://api.iluminara.health/api/v1/cbs/report \
  -H \"Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\" \
  -H \"Content-Type: application/json\" \
  -d '{...}'
```

## Endpoints

### POST /api/v1/cbs/report

Submit Community-Based Surveillance report from CHV.

**Request:**

```json
{
  \"chv_id\": \"CHV_AMINA_HASSAN\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Ifo Camp, Dadaab\"
  },
  \"timestamp\": \"2025-12-28T14:30:00Z\",
  \"symptoms\": [\"diarrhea\", \"vomiting\", \"dehydration\"],
  \"severity\": 9,
  \"patient_count\": 1,
  \"notes\": \"Severe watery diarrhea, suspected cholera\",
  \"consent_token\": \"CONSENT_12345\",
  \"offline_mode\": false
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"report_id\": \"CBS_20251228_001\",
  \"verification_score\": 0.8,
  \"alert_level\": \"CRITICAL\",
  \"recommendations\": [
    \"IMMEDIATE: Suspected cholera. Start ORS immediately.\",
    \"Isolate patient to prevent spread\",
    \"Notify district health officer\"
  ],
  \"golden_thread\": {
    \"fused\": true,
    \"emr_match\": false,
    \"idsr_submitted\": true
  }
}
```

### POST /api/v1/emr/record

Submit Electronic Medical Record from clinic.

**Request:**

```json
{
  \"clinic_id\": \"DADAAB_CLINIC_001\",
  \"patient_id\": \"PAT_12345\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129,
    \"name\": \"Dadaab Clinic\"
  },
  \"timestamp\": \"2025-12-28T15:00:00Z\",
  \"diagnosis\": \"cholera\",
  \"symptoms\": [\"diarrhea\", \"vomiting\", \"dehydration\"],
  \"lab_results\": {
    \"rapid_test\": \"positive\",
    \"culture\": \"pending\"
  },
  \"treatment\": [\"ORS\", \"IV_fluids\", \"antibiotics\"],
  \"consent_token\": \"CONSENT_12345\"
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"record_id\": \"EMR_20251228_001\",
  \"verification_score\": 1.0,
  \"golden_thread\": {
    \"fused\": true,
    \"cbs_match\": true,
    \"cbs_report_id\": \"CBS_20251228_001\",
    \"time_delta_hours\": 0.5,
    \"verification_status\": \"CONFIRMED\"
  }
}
```

### POST /api/v1/patient/symptoms

Patient self-reporting via mobile app.

**Request:**

```json
{
  \"patient_id\": \"PAT_12345\",
  \"location\": {
    \"lat\": 0.0512,
    \"lng\": 40.3129
  },
  \"timestamp\": \"2025-12-28T14:00:00Z\",
  \"symptoms\": [\"fever\", \"cough\", \"fatigue\"],
  \"severity\": 5,
  \"duration_days\": 3,
  \"consent_token\": \"CONSENT_12345\"
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"report_id\": \"PATIENT_20251228_001\",
  \"triage_level\": \"YELLOW\",
  \"recommendations\": [
    \"Monitor symptoms for 24 hours\",
    \"Seek medical attention if symptoms worsen\",
    \"Stay hydrated\"
  ],
  \"nearest_clinic\": {
    \"name\": \"Dadaab Clinic\",
    \"distance_km\": 2.5,
    \"estimated_wait_time_minutes\": 45
  }
}
```

### GET /api/v1/sync/status

Check offline sync status.

**Response:**

```json
{
  \"status\": \"success\",
  \"sync_status\": {
    \"last_sync\": \"2025-12-28T14:00:00Z\",
    \"pending_reports\": 5,
    \"pending_records\": 2,
    \"connectivity\": \"online\",
    \"queue_size_mb\": 1.2
  },
  \"edge_node\": {
    \"node_id\": \"JOR-47\",
    \"location\": \"Dadaab\",
    \"status\": \"operational\"
  }
}
```

### POST /api/v1/consent/validate

Validate patient consent.

**Request:**

```json
{
  \"patient_id\": \"PAT_12345\",
  \"consent_scope\": \"diagnosis\",
  \"data_type\": \"PHI\",
  \"jurisdiction\": \"KDPA_KE\"
}
```

**Response:**

```json
{
  \"status\": \"success\",
  \"consent_valid\": true,
  \"consent_token\": \"CONSENT_12345\",
  \"expires_at\": \"2026-12-28T14:00:00Z\",
  \"scope\": [\"diagnosis\", \"treatment\", \"public_health_surveillance\"]
}
```

## Golden Thread verification

The Bio-Interface automatically triggers Golden Thread data fusion when CBS and EMR signals match.

### Verification logic

```python
from edge_node.sync_protocol.golden_thread import GoldenThread

gt = GoldenThread()

# CBS signal from CHV
cbs_signal = {
    'location': 'Dadaab',
    'symptom': 'diarrhea',
    'timestamp': '2025-12-28T14:30:00Z',
    'source': 'CHV_AMINA_HASSAN'
}

# EMR record from clinic
emr_record = {
    'location': 'Dadaab',
    'diagnosis': 'cholera',
    'timestamp': '2025-12-28T15:00:00Z',
    'source': 'DADAAB_CLINIC_001'
}

# Fuse data streams
fused = gt.fuse_data_streams(
    cbs_signal=cbs_signal,
    emr_record=emr_record,
    patient_id='PAT_12345'
)

# Check verification score
print(f\"Verification Score: {fused.verification_score}\")  # 1.0 (CONFIRMED)
print(f\"Status: {fused.verification_status}\")  # CONFIRMED
```

### Verification scores

| Score | Status | Description |
|-------|--------|-------------|
| 1.0 | CONFIRMED | Location and time match (<24h delta) |
| 0.7-0.9 | PROBABLE | Partial agreement with minor conflicts |
| 0.4-0.6 | POSSIBLE | Significant conflicts but plausible |
| 0.0-0.3 | UNVERIFIED | Major conflicts or single source only |

## Offline mode

The Bio-Interface supports offline operation with automatic sync when connectivity returns.

### Enable offline mode

```json
{
  \"offline_mode\": true,
  \"queue_locally\": true,
  \"sync_on_reconnect\": true
}
```

### Offline queue management

```python
from edge_node.ai_agents import OfflineAgent

agent = OfflineAgent(name=\"CHV Mobile App\")

# Queue report while offline
agent.queue_operation(\"cbs_report\", {
    \"chv_id\": \"CHV_AMINA_HASSAN\",
    \"location\": {\"lat\": 0.0512, \"lng\": 40.3129},
    \"symptoms\": [\"fever\", \"cough\"]
})

# Check connectivity
if agent.connectivity.is_connected():
    # Sync queued operations
    agent.sync_to_cloud()
```

## Mobile SDK integration

### Android (Kotlin)

```kotlin
import com.iluminara.sdk.BioInterface

val bioInterface = BioInterface.Builder()
    .setApiKey(\"your_api_key\")
    .setBaseUrl(\"https://api.iluminara.health\")
    .enableOfflineMode(true)
    .build()

// Submit CBS report
val report = CBSReport(
    chvId = \"CHV_AMINA_HASSAN\",
    location = Location(0.0512, 40.3129, \"Ifo Camp\"),
    symptoms = listOf(\"diarrhea\", \"vomiting\"),
    severity = 9
)

bioInterface.submitCBSReport(report) { result ->
    when (result) {
        is Success -> println(\"Report submitted: ${result.data.reportId}\")
        is Error -> println(\"Error: ${result.error.message}\")
    }
}
```

### iOS (Swift)

```swift
import iLuminaraSDK

let bioInterface = BioInterface(
    apiKey: \"your_api_key\",
    baseURL: \"https://api.iluminara.health\",
    offlineMode: true
)

// Submit patient symptoms
let symptoms = PatientSymptoms(
    patientId: \"PAT_12345\",
    location: Location(lat: 0.0512, lng: 40.3129),
    symptoms: [\"fever\", \"cough\"],
    severity: 5
)

bioInterface.submitPatientSymptoms(symptoms) { result in
    switch result {
    case .success(let response):
        print(\"Report ID: \\(response.reportId)\")
    case .failure(let error):
        print(\"Error: \\(error.localizedDescription)\")
    }
}
```

## Rate limits

| Endpoint | Rate Limit | Burst |
|----------|------------|-------|
| `/api/v1/cbs/report` | 100 req/min | 200 |
| `/api/v1/emr/record` | 50 req/min | 100 |
| `/api/v1/patient/symptoms` | 200 req/min | 400 |
| `/api/v1/sync/status` | 1000 req/min | 2000 |

## Error codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `INVALID_CONSENT` | 403 | Consent token invalid or expired |
| `SOVEREIGNTY_VIOLATION` | 403 | Data transfer violates sovereignty rules |
| `RATE_LIMIT_EXCEEDED` | 429 | Too many requests |
| `OFFLINE_QUEUE_FULL` | 507 | Offline queue storage full |
| `INVALID_LOCATION` | 400 | Location coordinates invalid |

## Security

<AccordionGroup>
  <Accordion title=\"TLS 1.3 encryption\">
    All API traffic encrypted with TLS 1.3
  </Accordion>
  <Accordion title=\"JWT authentication\">
    Access tokens expire after 1 hour, refresh tokens after 30 days
  </Accordion>
  <Accordion title=\"Data sovereignty\">
    PHI never leaves sovereign territory without explicit authorization
  </Accordion>
  <Accordion title=\"Audit logging\">
    All API calls logged with tamper-proof audit trail
  </Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
  <Card
    title=\"Golden Thread\"
    icon=\"link\"
    href=\"/architecture/golden-thread\"
  >
    Understand data fusion logic
  </Card>
  <Card
    title=\"AI agents\"
    icon=\"brain-circuit\"
    href=\"/ai-agents/overview\"
  >
    Deploy autonomous surveillance
  </Card>
  <Card
    title=\"Governance\"
    icon=\"shield-check\"
    href=\"/governance/overview\"
  >
    Understand sovereignty constraints
  </Card>
  <Card
    title=\"Deployment\"
    icon=\"rocket\"
    href=\"/deployment/overview\"
  >
    Deploy to production
  </Card>
</CardGroup>
