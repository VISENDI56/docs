---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread protocol for CBS/EMR data fusion
---

## Overview

The Bio-Interface REST API enables **Mobile Health Apps** to integrate with iLuminara's Golden Thread protocol, fusing Community-Based Surveillance (CBS) and Electronic Medical Records (EMR) data streams with real-time verification.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Signals are tagged as CONFIRMED only if location and time-delta match within 24 hours."
</Card>

## Architecture

```
┌─────────────────────────────────────────────────────────┐
│              MOBILE HEALTH APPS                         │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │
│  │   CHV App    │  │  Clinic EMR  │  │  Patient App │ │
│  │  (Offline)   │  │   (Online)   │  │   (Hybrid)   │ │
│  └──────────────┘  └──────────────┘  └──────────────┘ │
└─────────────────────────────────────────────────────────┘
                         │
                         │ HTTPS/TLS 1.3
                         ▼
┌─────────────────────────────────────────────────────────┐
│              BIO-INTERFACE REST API                     │
│  ┌──────────────────────────────────────────────────┐  │
│  │  /api/v1/cbs/submit                              │  │
│  │  /api/v1/emr/submit                              │  │
│  │  /api/v1/golden-thread/verify                    │  │
│  │  /api/v1/sync/status                             │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                         │
                         │ Golden Thread Protocol
                         ▼
┌─────────────────────────────────────────────────────────┐
│              GOLDEN THREAD ENGINE                       │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Data Fusion (CBS + EMR + IDSR)                  │  │
│  │  Verification Score Calculation                  │  │
│  │  Conflict Resolution                             │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                         │
                         │ Sovereignty Validation
                         ▼
┌─────────────────────────────────────────────────────────┐
│              GOVERNANCE KERNEL                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │  SovereignGuardrail Enforcement                  │  │
│  │  Crypto Shredder (IP-02)                         │  │
│  │  Tamper-proof Audit Trail                        │  │
│  └──────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

## Base URL

```
https://api.iluminara.health/v1
```

For local development:
```
http://localhost:8080/v1
```

## Authentication

All API requests require authentication using JWT tokens:

```bash
# Obtain token
curl -X POST https://api.iluminara.health/v1/auth/token \
  -H "Content-Type: application/json" \
  -d '{
    "client_id": "YOUR_CLIENT_ID",
    "client_secret": "YOUR_CLIENT_SECRET",
    "grant_type": "client_credentials"
  }'

# Use token in requests
curl -X POST https://api.iluminara.health/v1/cbs/submit \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d @cbs_report.json
```

## Endpoints

### Submit CBS report

Submit Community-Based Surveillance data from CHV mobile apps.

**Endpoint:** `POST /api/v1/cbs/submit`

**Request:**

```json
{
  "report_id": "CBS_20251225_001",
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp",
    "admin_level_1": "Garissa County",
    "admin_level_2": "Dadaab Sub-County"
  },
  "timestamp": "2025-12-25T10:00:00Z",
  "symptoms": [
    {
      "symptom": "diarrhea",
      "severity": 8,
      "duration_hours": 24
    },
    {
      "symptom": "vomiting",
      "severity": 7,
      "duration_hours": 12
    }
  ],
  "patient_demographics": {
    "age_group": "5-14",
    "gender": "female",
    "pregnant": false
  },
  "environmental_factors": {
    "water_source": "borehole",
    "sanitation": "shared_latrine",
    "recent_flooding": true
  },
  "consent": {
    "consent_token": "CONSENT_20251225_001",
    "consent_scope": "public_health_surveillance",
    "consent_date": "2025-12-25T09:55:00Z"
  }
}
```

**Response:**

```json
{
  "status": "success",
  "report_id": "CBS_20251225_001",
  "verification_status": "PENDING",
  "message": "CBS report submitted successfully. Awaiting EMR correlation.",
  "golden_thread_id": "GT_20251225_001",
  "next_steps": [
    "EMR correlation in progress",
    "Verification score will be calculated within 24 hours"
  ]
}
```

### Submit EMR record

Submit Electronic Medical Record data from clinic systems.

**Endpoint:** `POST /api/v1/emr/submit`

**Request:**

```json
{
  "record_id": "EMR_20251225_001",
  "facility_id": "DADAAB_CLINIC_001",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Primary Health Centre"
  },
  "timestamp": "2025-12-25T10:15:00Z",
  "patient_id": "PAT_ENCRYPTED_001",
  "diagnosis": {
    "icd_10_code": "A00.9",
    "diagnosis_name": "Cholera, unspecified",
    "confidence": 0.95
  },
  "symptoms": [
    "severe_watery_diarrhea",
    "vomiting",
    "dehydration"
  ],
  "lab_results": {
    "rapid_diagnostic_test": "positive",
    "culture": "pending"
  },
  "treatment": {
    "ors_administered": true,
    "iv_fluids": true,
    "antibiotics": "doxycycline"
  },
  "consent": {
    "consent_token": "CONSENT_20251225_002",
    "consent_scope": "diagnosis_treatment",
    "consent_date": "2025-12-25T10:10:00Z"
  }
}
```

**Response:**

```json
{
  "status": "success",
  "record_id": "EMR_20251225_001",
  "verification_status": "CONFIRMED",
  "message": "EMR record submitted and correlated with CBS report CBS_20251225_001",
  "golden_thread_id": "GT_20251225_001",
  "verification_score": 1.0,
  "correlation": {
    "cbs_report_id": "CBS_20251225_001",
    "location_match": true,
    "time_delta_hours": 0.25,
    "symptom_overlap": 0.9
  }
}
```

### Verify Golden Thread

Query verification status and retrieve fused data.

**Endpoint:** `GET /api/v1/golden-thread/verify/{golden_thread_id}`

**Response:**

```json
{
  "status": "success",
  "golden_thread_id": "GT_20251225_001",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "data_sources": {
    "cbs": {
      "report_id": "CBS_20251225_001",
      "timestamp": "2025-12-25T10:00:00Z",
      "chv_id": "CHV_AMINA_HASSAN"
    },
    "emr": {
      "record_id": "EMR_20251225_001",
      "timestamp": "2025-12-25T10:15:00Z",
      "facility_id": "DADAAB_CLINIC_001"
    },
    "idsr": {
      "auto_generated": true,
      "submitted_to_moh": true,
      "submission_timestamp": "2025-12-25T10:30:00Z"
    }
  },
  "fused_data": {
    "location": {
      "lat": 0.0512,
      "lng": 40.3129,
      "name": "Dadaab Refugee Camp"
    },
    "diagnosis": "Cholera, unspecified (ICD-10: A00.9)",
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "severity": 8,
    "outbreak_risk": 0.87,
    "recommended_actions": [
      "Isolate patient",
      "Contact tracing",
      "Water source investigation",
      "Community health education"
    ]
  },
  "compliance": {
    "sovereignty_validated": true,
    "jurisdiction": "KDPA_KE",
    "consent_verified": true,
    "audit_trail_id": "AUDIT_20251225_001"
  }
}
```

### Sync status

Check offline sync status for mobile apps.

**Endpoint:** `GET /api/v1/sync/status`

**Query Parameters:**
- `device_id` (required): Unique device identifier
- `last_sync` (optional): ISO 8601 timestamp of last successful sync

**Response:**

```json
{
  "status": "success",
  "device_id": "DEVICE_CHV_AMINA_001",
  "sync_status": "ONLINE",
  "last_sync": "2025-12-25T09:45:00Z",
  "pending_uploads": 3,
  "pending_downloads": 7,
  "queue_summary": {
    "cbs_reports": 2,
    "emr_records": 1,
    "golden_thread_updates": 7
  },
  "next_sync_window": "2025-12-25T11:00:00Z"
}
```

## Golden Thread verification logic

The Bio-Interface implements the Golden Thread verification algorithm:

```python
def calculate_verification_score(cbs_signal, emr_record):
    """
    Calculate verification score based on:
    1. Location match
    2. Time delta (<24 hours)
    3. Symptom overlap
    """
    score = 0.0
    
    # Location match (40% weight)
    if cbs_signal.location == emr_record.location:
        score += 0.4
    elif distance(cbs_signal.location, emr_record.location) < 5km:
        score += 0.2
    
    # Time delta (40% weight)
    time_delta_hours = abs(cbs_signal.timestamp - emr_record.timestamp).hours
    if time_delta_hours < 24:
        score += 0.4 * (1 - time_delta_hours / 24)
    
    # Symptom overlap (20% weight)
    overlap = len(set(cbs_signal.symptoms) & set(emr_record.symptoms))
    total = len(set(cbs_signal.symptoms) | set(emr_record.symptoms))
    score += 0.2 * (overlap / total)
    
    return score

# Verification status
if score >= 0.8:
    status = "CONFIRMED"
elif score >= 0.5:
    status = "PROBABLE"
elif score >= 0.3:
    status = "POSSIBLE"
else:
    status = "UNVERIFIED"
```

## Offline support

The Bio-Interface supports offline-first mobile apps with intelligent sync:

### Queue management

```json
POST /api/v1/sync/queue

{
  "device_id": "DEVICE_CHV_AMINA_001",
  "queued_items": [
    {
      "item_id": "QUEUE_001",
      "item_type": "cbs_report",
      "priority": "high",
      "data": { /* CBS report data */ },
      "created_at": "2025-12-25T08:00:00Z"
    },
    {
      "item_id": "QUEUE_002",
      "item_type": "cbs_report",
      "priority": "medium",
      "data": { /* CBS report data */ },
      "created_at": "2025-12-25T08:30:00Z"
    }
  ]
}
```

### Priority sync

High-priority items (suspected outbreaks) are synced first:

```python
# Priority levels
PRIORITY_CRITICAL = 1  # Suspected outbreak, life-threatening
PRIORITY_HIGH = 2      # Severe symptoms, urgent
PRIORITY_MEDIUM = 3    # Moderate symptoms
PRIORITY_LOW = 4       # Routine surveillance
```

## Sovereignty compliance

All Bio-Interface operations enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': cbs_report.consent.consent_token,
        'consent_scope': cbs_report.consent.consent_scope
    },
    jurisdiction='KDPA_KE'
)

# Validate cross-border transfer (if applicable)
if emr_record.facility_country != cbs_report.location_country:
    guardrail.validate_action(
        action_type='Data_Transfer',
        payload={
            'data_type': 'PHI',
            'source_country': cbs_report.location_country,
            'destination_country': emr_record.facility_country,
            'transfer_mechanism': 'Standard_Contractual_Clauses'
        },
        jurisdiction='GDPR_EU'
    )
```

## Mobile SDK

iLuminara provides native SDKs for iOS and Android:

### Android (Kotlin)

```kotlin
import health.iluminara.sdk.BioInterface
import health.iluminara.sdk.models.CBSReport

val bioInterface = BioInterface.Builder()
    .setApiKey("YOUR_API_KEY")
    .setBaseUrl("https://api.iluminara.health/v1")
    .enableOfflineMode(true)
    .build()

// Submit CBS report
val report = CBSReport.Builder()
    .setReportId("CBS_20251225_001")
    .setChvId("CHV_AMINA_HASSAN")
    .setLocation(0.0512, 40.3129)
    .addSymptom("diarrhea", severity = 8)
    .addSymptom("vomiting", severity = 7)
    .setConsent(consentToken, consentScope)
    .build()

bioInterface.submitCBSReport(report) { result ->
    when (result) {
        is Success -> {
            println("Report submitted: ${result.goldenThreadId}")
        }
        is Error -> {
            println("Error: ${result.message}")
            // Queue for offline sync
            bioInterface.queueForSync(report)
        }
    }
}
```

### iOS (Swift)

```swift
import iLuminaraSDK

let bioInterface = BioInterface(
    apiKey: "YOUR_API_KEY",
    baseURL: "https://api.iluminara.health/v1",
    offlineMode: true
)

// Submit CBS report
let report = CBSReport(
    reportId: "CBS_20251225_001",
    chvId: "CHV_AMINA_HASSAN",
    location: Location(lat: 0.0512, lng: 40.3129),
    symptoms: [
        Symptom(name: "diarrhea", severity: 8),
        Symptom(name: "vomiting", severity: 7)
    ],
    consent: Consent(token: consentToken, scope: consentScope)
)

bioInterface.submitCBSReport(report) { result in
    switch result {
    case .success(let response):
        print("Report submitted: \\(response.goldenThreadId)")
    case .failure(let error):
        print("Error: \\(error.localizedDescription)")
        // Queue for offline sync
        bioInterface.queueForSync(report)
    }
}
```

## Rate limits

| Endpoint | Rate Limit | Burst |
|----------|------------|-------|
| `/cbs/submit` | 100 req/min | 200 |
| `/emr/submit` | 100 req/min | 200 |
| `/golden-thread/verify` | 1000 req/min | 2000 |
| `/sync/status` | 500 req/min | 1000 |

## Error codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `INVALID_CONSENT` | 400 | Consent token invalid or expired |
| `SOVEREIGNTY_VIOLATION` | 403 | Action violates data sovereignty rules |
| `LOCATION_MISMATCH` | 422 | CBS and EMR locations too far apart |
| `TIME_DELTA_EXCEEDED` | 422 | Time delta >24 hours |
| `DUPLICATE_REPORT` | 409 | Report ID already exists |
| `RATE_LIMIT_EXCEEDED` | 429 | Too many requests |

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Convert voice to CBS reports
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Sovereignty compliance
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy Bio-Interface API
  </Card>
</CardGroup>
