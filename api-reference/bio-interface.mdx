---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables Mobile Health Apps to integrate with iLuminara-Core using the Golden Thread protocol for data fusion from CBS (Community-Based Surveillance) and EMR (Electronic Medical Records).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity preservation"
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│      MOBILE HEALTH APPS             │
│  ┌──────────────────────────────┐  │
│  │  CHV Mobile App              │  │
│  │  - Voice recording           │  │
│  │  - Symptom logging           │  │
│  │  - GPS location              │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
              │
              │ HTTPS/REST
              ▼
┌─────────────────────────────────────┐
│      BIO-INTERFACE API              │
│  ┌──────────────────────────────┐  │
│  │  /submit-cbs-report          │  │
│  │  /submit-emr-record          │  │
│  │  /get-verification-status    │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
              │
              │ Golden Thread
              ▼
┌─────────────────────────────────────┐
│      GOLDEN THREAD ENGINE           │
│  ┌──────────────────────────────┐  │
│  │  Data Fusion                 │  │
│  │  - CBS + EMR merge           │  │
│  │  - Verification scoring      │  │
│  │  - IDSR generation           │  │
│  └──────────────────────────────┘  │
└─────────────────────────────────────┘
              │
              │ Validated
              ▼
┌─────────────────────────────────────┐
│      SOVEREIGN GUARDRAIL            │
│  - Data sovereignty validation      │
│  - Consent verification             │
│  - Audit logging                    │
└─────────────────────────────────────┘
```

## Base URL

```
https://api.iluminara.health/v1
```

For local development:
```
http://localhost:8080/v1
```

## Authentication

### API Key authentication

```bash
curl -X POST https://api.iluminara.health/v1/submit-cbs-report \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{...}'
```

### OAuth 2.0 (recommended for production)

```python
import requests

# Get access token
token_response = requests.post(
    'https://auth.iluminara.health/oauth/token',
    data={
        'grant_type': 'client_credentials',
        'client_id': 'YOUR_CLIENT_ID',
        'client_secret': 'YOUR_CLIENT_SECRET',
        'scope': 'cbs:write emr:write'
    }
)

access_token = token_response.json()['access_token']

# Use token
headers = {'Authorization': f'Bearer {access_token}'}
```

## Endpoints

### Submit CBS report

Submit a Community-Based Surveillance report from CHV mobile app.

**Endpoint:** `POST /v1/submit-cbs-report`

**Request:**

```json
{
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-12-24T10:30:00Z",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "patient_age": 5,
  "patient_gender": "F",
  "notes": "Severe watery diarrhea, suspected cholera",
  "consent_token": "EMERGENCY_CHV_ALERT"
}
```

**Response:**

```json
{
  "status": "success",
  "cbs_report_id": "CBS_20251224_001",
  "verification_status": "PENDING",
  "message": "CBS report submitted successfully",
  "next_steps": [
    "Awaiting EMR correlation for verification",
    "Alert sent to district health officer"
  ]
}
```

### Submit EMR record

Submit an Electronic Medical Record from clinic/hospital system.

**Endpoint:** `POST /v1/submit-emr-record`

**Request:**

```json
{
  "facility_id": "DADAAB_CLINIC",
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-12-24T11:00:00Z",
  "diagnosis": "cholera",
  "symptoms": ["severe_diarrhea", "vomiting", "dehydration"],
  "lab_results": {
    "rapid_test": "positive",
    "culture": "pending"
  },
  "treatment": "ORS, IV fluids, isolation",
  "consent_token": "VALID_CONSENT_TOKEN"
}
```

**Response:**

```json
{
  "status": "success",
  "emr_record_id": "EMR_20251224_001",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "matched_cbs_reports": ["CBS_20251224_001"],
  "message": "EMR record verified with CBS report",
  "golden_thread_id": "GT_20251224_001"
}
```

### Get verification status

Check the verification status of a CBS report or EMR record.

**Endpoint:** `GET /v1/verification-status/{report_id}`

**Response:**

```json
{
  "status": "success",
  "report_id": "CBS_20251224_001",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "matched_records": [
    {
      "type": "EMR",
      "id": "EMR_20251224_001",
      "timestamp": "2025-12-24T11:00:00Z",
      "location_match": true,
      "time_delta_hours": 0.5
    }
  ],
  "golden_thread": {
    "id": "GT_20251224_001",
    "sources": ["CBS", "EMR"],
    "confidence": "HIGH"
  }
}
```

## Golden Thread integration

The Bio-Interface automatically uses the Golden Thread protocol for data fusion:

### Verification logic

```python
from edge_node.sync_protocol.golden_thread import GoldenThread

gt = GoldenThread()

# Submit CBS report
cbs_signal = {
    'location': 'Dadaab',
    'symptom': 'diarrhea',
    'timestamp': '2025-12-24T10:30:00Z',
    'source': 'CHV_AMINA_HASSAN'
}

# Submit EMR record (within 24 hours)
emr_record = {
    'location': 'Dadaab',
    'diagnosis': 'cholera',
    'timestamp': '2025-12-24T11:00:00Z',
    'source': 'DADAAB_CLINIC'
}

# Automatic fusion
fused = gt.fuse_data_streams(
    cbs_signal=cbs_signal,
    emr_record=emr_record,
    patient_id='PAT_12345'
)

# Verification score: 1.0 (CONFIRMED)
# Location match: ✓
# Time delta: 0.5 hours (< 24h threshold)
```

### Verification scores

| Score | Status | Description |
|-------|--------|-------------|
| 1.0 | CONFIRMED | CBS and EMR agree on location and time (<24h) |
| 0.7-0.9 | PROBABLE | Partial agreement with minor conflicts |
| 0.4-0.6 | POSSIBLE | Significant conflicts but plausible |
| 0.0-0.3 | UNVERIFIED | Major conflicts or single source only |

## Mobile SDK

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val apiKey: String) {
    private val client = OkHttpClient()
    private val baseUrl = "https://api.iluminara.health/v1"
    
    fun submitCBSReport(
        chvId: String,
        location: Location,
        symptoms: List<String>,
        severity: Int,
        consentToken: String
    ): Response {
        val json = JSONObject().apply {
            put("chv_id", chvId)
            put("location", JSONObject().apply {
                put("lat", location.latitude)
                put("lng", location.longitude)
            })
            put("timestamp", System.currentTimeMillis())
            put("symptoms", symptoms)
            put("severity", severity)
            put("consent_token", consentToken)
        }
        
        val request = Request.Builder()
            .url("$baseUrl/submit-cbs-report")
            .addHeader("Authorization", "Bearer $apiKey")
            .post(RequestBody.create(
                MediaType.parse("application/json"),
                json.toString()
            ))
            .build()
        
        return client.newCall(request).execute()
    }
}

// Usage
val client = ILuminaraClient("YOUR_API_KEY")
val response = client.submitCBSReport(
    chvId = "CHV_AMINA_HASSAN",
    location = currentLocation,
    symptoms = listOf("diarrhea", "vomiting"),
    severity = 9,
    consentToken = "EMERGENCY_CHV_ALERT"
)
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let apiKey: String
    let baseURL = "https://api.iluminara.health/v1"
    
    init(apiKey: String) {
        self.apiKey = apiKey
    }
    
    func submitCBSReport(
        chvId: String,
        location: CLLocation,
        symptoms: [String],
        severity: Int,
        consentToken: String,
        completion: @escaping (Result<Data, Error>) -> Void
    ) {
        let url = URL(string: "\(baseURL)/submit-cbs-report")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.addValue("Bearer \(apiKey)", forHTTPHeaderField: "Authorization")
        request.addValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "chv_id": chvId,
            "location": [
                "lat": location.coordinate.latitude,
                "lng": location.coordinate.longitude
            ],
            "timestamp": ISO8601DateFormatter().string(from: Date()),
            "symptoms": symptoms,
            "severity": severity,
            "consent_token": consentToken
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
            } else if let data = data {
                completion(.success(data))
            }
        }.resume()
    }
}

// Usage
let client = ILuminaraClient(apiKey: "YOUR_API_KEY")
client.submitCBSReport(
    chvId: "CHV_AMINA_HASSAN",
    location: currentLocation,
    symptoms: ["diarrhea", "vomiting"],
    severity: 9,
    consentToken: "EMERGENCY_CHV_ALERT"
) { result in
    switch result {
    case .success(let data):
        print("Report submitted successfully")
    case .failure(let error):
        print("Error: \(error)")
    }
}
```

### React Native (JavaScript)

```javascript
class ILuminaraClient {
  constructor(apiKey) {
    this.apiKey = apiKey;
    this.baseURL = 'https://api.iluminara.health/v1';
  }

  async submitCBSReport({
    chvId,
    location,
    symptoms,
    severity,
    consentToken
  }) {
    const response = await fetch(`${this.baseURL}/submit-cbs-report`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        chv_id: chvId,
        location: {
          lat: location.latitude,
          lng: location.longitude
        },
        timestamp: new Date().toISOString(),
        symptoms,
        severity,
        consent_token: consentToken
      })
    });

    return response.json();
  }
}

// Usage
const client = new ILuminaraClient('YOUR_API_KEY');

const result = await client.submitCBSReport({
  chvId: 'CHV_AMINA_HASSAN',
  location: { latitude: 0.0512, longitude: 40.3129 },
  symptoms: ['diarrhea', 'vomiting'],
  severity: 9,
  consentToken: 'EMERGENCY_CHV_ALERT'
});

console.log(result);
```

## Sovereignty compliance

All Bio-Interface operations enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': 'EMERGENCY_CHV_ALERT',
        'jurisdiction': 'KDPA_KE'
    },
    jurisdiction='KDPA_KE'
)
```

## Rate limits

| Tier | Requests/minute | Burst |
|------|-----------------|-------|
| Free | 10 | 20 |
| Standard | 100 | 200 |
| Enterprise | 1000 | 2000 |

## Error codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `invalid_consent` | 403 | Consent token invalid or expired |
| `sovereignty_violation` | 403 | Action violates data sovereignty rules |
| `missing_location` | 400 | Location required but not provided |
| `invalid_symptoms` | 400 | Symptoms list invalid or empty |
| `rate_limit_exceeded` | 429 | Too many requests |

## Webhooks

Subscribe to real-time events:

```json
{
  "webhook_url": "https://your-app.com/webhooks/iluminara",
  "events": [
    "cbs_report.verified",
    "emr_record.matched",
    "outbreak.detected"
  ]
}
```

**Webhook payload:**

```json
{
  "event": "cbs_report.verified",
  "timestamp": "2025-12-24T11:00:00Z",
  "data": {
    "cbs_report_id": "CBS_20251224_001",
    "verification_score": 1.0,
    "matched_emr_id": "EMR_20251224_001",
    "golden_thread_id": "GT_20251224_001"
  }
}
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Voice processing"
    icon="microphone"
    href="/api-reference/voice-processing"
  >
    Process voice alerts from CHVs
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure sovereignty constraints
  </Card>
  <Card
    title="Deploy to GCP"
    icon="cloud"
    href="/deployment/overview"
  >
    Production deployment guide
  </Card>
</CardGroup>
