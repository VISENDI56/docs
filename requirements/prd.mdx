---
title: Product requirements document
description: Complete product specification for iLuminara-Core MVP
---

# Product Requirements Document (PRD): iLuminara-Core MVP

**Version:** 1.0 (Phase 126 - Oracle Stable)  
**Status:** Investment-Ready / Technical Freeze  
**Architect:** Anthony Waganda (Director/Lead Engineer)

## Product overview

iLuminara-Core is a Sovereign Operating System designed for the Nairobi-Dadaab Nexus, functioning as a decentralized biosecurity and logistics fortress. It integrates the "11-Point Nuclear IP Stack" onto NVIDIA Blackwell B300 hardware to provide a "System-2" (reasoning-based) AI kernel that optimizes humanitarian aid, predicts pathogen outbreaks with 18ms latency, and enforces jurisdictional law via Z3-formal verification.

## User stories

Format: Gherkin (Given/When/Then)

### Clinical and biosecurity (Evo2 Engine)

1. **Given** I am a field clinician in Dadaab, **When** I input a genomic sequence into the Bio-Foundry, **Then** the system should generate a synthetic binder candidate within 18ms.

2. **Given** a new pathogen variant appears, **When** the HSTPU (IP #01) analyzes spatial data, **Then** it should predict the transmission vector trajectory for the next 72 hours.

3. **Given** I am analyzing patient data, **When** I request a diagnosis, **Then** the system should provide a result with an accuracy confidence score of at least 86.8% (Pass@1).

4. **Given** a supply of vaccines, **When** the temperature sensors detect a fluctuation, **Then** the system should trigger a wastage alert to the nearest logistical node.

### Governance and law (Omni-Law Matrix)

5. **Given** I am a data architect, **When** I attempt to export PII outside the Kenyan geofence, **Then** the Z3-Gate (IP #08) should return an "UNSAT" error and block the transaction.

6. **Given** a system update is available, **When** the Sovereign Hard-Link compiles the code, **Then** it must verify compliance with the 47-Law Framework before deployment.

7. **Given** a cross-border data request, **When** the request originates from outside the AU Malabo convention signatories, **Then** the system should automatically redact all sovereign biometric data.

8. **Given** an audit request, **When** an auditor queries the system, **Then** the HSML (IP #07) log should provide a mathematically provable chain of custody for every decision made.

### Security and authentication (PBLS and Ghost-Mesh)

9. **Given** I am an authorized user, **When** I attempt to log in, **Then** the Triple-Helix Bio-Lock (IP #06) should verify my biometric signature against the rotating lattice key.

10. **Given** a network jamming attack, **When** the 6G signal is degraded, **Then** the Ghost-Mesh (IP #04) should automatically switch to sub-terahertz peer-to-peer propagation.

11. **Given** I am a system administrator, **When** I view the "Iron Dome" status, **Then** I should see zero active vulnerabilities and a "Sandbox Active" confirmation.

12. **Given** an attempt to inject malicious shell code, **When** the command is sent to the kernel, **Then** the Sovereign Sandbox should intercept and terminate the process immediately.

13. **Given** the 18ms heartbeat cycle, **When** the clock phase drifts by more than 2ms, **Then** the Atomic Sync engine should force a time-correction across the local mesh.

### Logistics and revenue (ROI Engine)

14. **Given** I am an investor, **When** I view the Home Dashboard (Port 8501), **Then** I should see real-time ROI metrics calculated by the Revenue Engine (IP #11).

15. **Given** a supply chain disruption, **When** the system recalculates routes, **Then** it should prioritize cost-savings and display the "Monetary Savings Daily" metric.

16. **Given** a fleet of autonomous drones, **When** they request flight paths, **Then** the system should optimize for energy efficiency based on the Context Distiller's (IP #09) edge policies.

17. **Given** a recurring billing cycle, **When** the ROI Engine processes a transaction, **Then** it should append the transaction hash to the PABS Net (IP #05).

### System administration

18. **Given** I am a developer, **When** I trigger the "Cert-Zero" audit, **Then** the system should scan all dependencies and return a clean report with no CVEs.

19. **Given** high computational load, **When** the CPU usage exceeds 90%, **Then** the Health Monitor should trigger a "Context Distillation" event to compress active models.

20. **Given** a deployment to a new Jetson node, **When** the initialization script runs, **Then** it should auto-configure the ghost-mesh coordinates based on GPS telemetry.

21. **Given** a UI render loop, **When** the state updates too frequently, **Then** the State-Throttler should enforce a 5-second cooldown to prevent React Error #185.

## User flows

### Flow A: Clinical diagnostic and legal verification

1. **Input:** Clinician enters pathogen sequence via Port 8502 (Bio-Foundry)
2. **Processing:** Evo2 Engine (IP #03) generates a candidate binder (System-2 Reasoning)
3. **Gatekeeper:** Result is passed to Z3-Gate (IP #08)
4. **Verification:** Z3 Solver checks "Kenya DPA 2019" constraints (Data Residency)
5. **Output:** If SAT (Valid), result is displayed. If UNSAT, result is redacted and flagged

### Flow B: Secure authentication (PBLS)

1. **Initiation:** User accesses Port 8503 (Auth Demo)
2. **Challenge:** System presents a Triple-Helix rotating key challenge
3. **Response:** User provides biometric/hardware token
4. **Validation:** System compares token against the current Lattice-PQC state (18ms window)
5. **Access:** Session token issued with a 15-minute expiration (Sovereign Session)

### Flow C: Sovereign sync heartbeat

1. **Trigger:** 18ms timer expires
2. **Action:** `SovereignHeartbeat.synchronize_nexus()` is called
3. **Check:** System validates Hardware Time, Legal State, and Agent Memory
4. **Propagate:** State Vector is signed and broadcast to the Ghost-Mesh
5. **Update:** Dashboard visualizations (Maps/Graphs) refresh if the 5s throttling cooldown has passed

## Screens and UI/UX

### The Sovereign Dashboard (Port 8501)

**Purpose:** Executive Command & Control

**Elements:**
- Geospatial Ghost-Mesh Map (Dadaab coords)
- ROI Metrics (Daily Savings)
- Hardware Health Monitor (CPU/RAM/Temp)
- Security Status (Iron Dome)

**Interaction:** Toggles for "Auto-Refresh," "Cert-Zero Audit," and "System Reset"

### The Bio-Foundry (Port 8502)

**Purpose:** Clinical Intelligence & Generative Biology

**Elements:**
- Sequence Input Field
- Molecular Viewer (3D/2D visualization via Plotly)
- Inference Status Indicator (Thinking/Done)

**Interaction:** "Synthesize Binder" button, JSON result viewer

### The Auth Fortress (Port 8503)

**Purpose:** Security Visualization & Access

**Elements:**
- Dynamic Polar Plot (Triple-Helix Rotation)
- Login Form
- PQC Status Log

**Interaction:** "Observe Active Key Mutation" toggle

## Features and functionality

- **System-2 Reasoning Kernel:** Uses "Blitzy-Standard" logic to perform deep inference rather than shallow token prediction
- **Z3-Formal Gatekeeper:** A hard-coded mathematical layer that prevents the AI from executing illegal or unethical actions
- **Ghost-Mesh Telemetry:** Sub-terahertz communication logic that creates a 50-node resilient network capable of operating without cloud uplink
- **Sovereign Revenue Engine:** Automated tracking of "Impact-as-a-Service," calculating cost savings per compute cycle
- **Iron Dome Security:** Regex-based input sanitization and kernel sandboxing to prevent RCE and Injection attacks
- **Context Distillation:** Compression algorithms to run large language models on edge hardware (Jetson Orin/Blackwell) via FP4 quantization

## Technical architecture

- **Frontend:** Streamlit (Python-based React wrapper) with custom Plotly integrations
- **Orchestrator:** SovereignBus (Python) managing state across isolated processes
- **Intelligence Layer:** PyTorch / BioNeMo (Evo2) running on CUDA (Blackwell optimized)
- **Governance Layer:** Z3 Theorem Prover (Microsoft Research) integrated via Python bindings
- **Security Layer:** cryptography (Kyber/Lattice PQC) + Custom IronDomeInterceptor

## System design

### Component A: The Sovereign Bus (State Manager)

**Implementation:** File-based JSON store with SHA-256 hash locking to prevent race conditions and React render loops

**Responsibility:** Single Source of Truth for Ports 8501, 8502, 8503

### Component B: The Hard-Link (Compiler)

**Implementation:** Pre-commit hooks and runtime decorators

**Responsibility:** Ensures no code executes unless it passes the Z3 `verify_integrity_circuit`

### Component C: The Ghost-Mesh (Network)

**Implementation:** Simulation via MeshMapper (Phase 122) using geospatial coordinate offsets

**Responsibility:** Simulating the 50-node Dadaab cluster connectivity

## API specifications

### Endpoint: /api/v1/heartbeat/sync

**Method:** POST

**Payload:**
```json
{
  "node_id": "UUID",
  "timestamp_ns": 123456789,
  "state_hash": "SHA256"
}
```

**Response:**
```json
{
  "status": "SYNCED",
  "drift_ms": 0.01
}
```

### Endpoint: /api/v1/bio/synthesize

**Method:** POST

**Payload:**
```json
{
  "sequence": "ATGC...",
  "constraint_profile": "KENYA_DPA"
}
```

**Response:**
```json
{
  "binder_affinity": 0.98,
  "legal_proof": "SAT"
}
```

### Endpoint: /api/v1/auth/challenge

**Method:** GET

**Response:**
```json
{
  "lattice_vector": [0.1, 0.5, ...],
  "expiration": "18ms"
}
```

## Data model

### Entity: Node

- `id`: UUID
- `geo_lat`: Float
- `geo_lon`: Float
- `health_score`: Float (0-100)
- `role`: Enum (CLINICAL, LOGISTICS, SENTINEL)

### Entity: Law

- `id`: String (e.g., "KENYA_DPA_25")
- `z3_constraint`: SMT-LIB2 String
- `active`: Boolean

### Entity: Transaction

- `id`: UUID
- `timestamp`: Int64 (Nanoseconds)
- `roi_impact`: Float (USD)
- `z3_proof_hash`: String

## Security considerations

- **Zero-Trust Architecture:** Every component (UI, Logic, DB) must re-authenticate via the SovereignBus
- **Post-Quantum Cryptography:** All internal state vectors are signed using simulated ML-KEM-1024 lattice signatures
- **Sandboxing:** The SovereignSandbox class whitelists only specific OS commands (`ls`, `git status`), blocking all others (`rm`, `eval`)
- **XSS/CSRF:** Streamlit configuration hardened to disable CORS and enable XSRF protection

## Performance requirements

- **Latency:** Max 18ms for the "Atomic Heartbeat" cycle
- **Inference Speed:** Bio-binder generation < 200ms on Blackwell B300
- **UI Responsiveness:** Dashboard render time < 100ms (throttled updates)
- **Throughput:** Handle 50 concurrent node syncs per second

## Scalability considerations

- **Edge-First Design:** The system does not rely on a central cloud server; scaling is achieved by adding more Jetson/Blackwell nodes to the Ghost-Mesh
- **Context Distillation:** Heavy models are distilled into "Student" models (IP #09) that fit on smaller edge devices, allowing linear scaling without exponential hardware costs
- **Geospatial Sharding:** The Z3 logic partitions data validity by geospatial coordinates, effectively sharding the database by territory

## Testing strategy

- **Unit Testing:** pytest for all Python classes (Evo2, ROI_Engine)
- **Formal Verification:** Z3 Solver checks to ensure logical consistency of the "Omni-Law"
- **Integration Testing:** "Cert-Zero" audit script runs a full vulnerability sweep and dependency check
- **Load Testing:** Simulation of 50-node sync storms to verify SovereignBus lock handling

## Deployment plan

- **Infrastructure:** GitHub Codespaces (Dev), NVIDIA Jetson Orin (Edge/Staging), NVIDIA Blackwell B300 (Production)
- **Containerization:** Dockerized application with pinned requirements.txt (Phase 123 hardened)
- **Orchestration:** `launch_sovereign_os.sh` script handles the port mapping (8501-8503) and process management
- **CI/CD:** GitHub Actions pipeline triggers the "Hard-Link" compiler on every push

## Maintenance and support

- **Telemetry:** The "Home Dashboard" provides live health monitoring
- **Updates:** Updates are distributed as signed "Legal Blobs" verified by the Z3-Gate
- **Support:** Technical logs (`SOVEREIGN_AUDIT_LOG.md`) provide a complete history for debugging
- **Self-Healing:** The Atomic Heartbeat automatically corrects time drift and restarts stalled processes
