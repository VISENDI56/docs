---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the Golden Thread protocol for CBS (Community-Based Surveillance) and EMR (Electronic Medical Records) data fusion.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity preservation"
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│      MOBILE HEALTH APPS             │
│  - CHV data collection              │
│  - Patient symptom reporting        │
│  - Offline-first design             │
└─────────────────────────────────────┘
              │
              │ REST API
              ▼
┌─────────────────────────────────────┐
│      BIO-INTERFACE API              │
│  - /submit-cbs (CBS signals)        │
│  - /submit-emr (EMR records)        │
│  - /verify-signal (Golden Thread)   │
└─────────────────────────────────────┘
              │
              │ Data Fusion
              ▼
┌─────────────────────────────────────┐
│      GOLDEN THREAD ENGINE           │
│  - Cross-source verification        │
│  - Verification score calculation   │
│  - Conflict resolution              │
└─────────────────────────────────────┘
              │
              │ Storage
              ▼
┌─────────────────────────────────────┐
│      CLOUD ORACLE                   │
│  - BigQuery (data warehouse)        │
│  - Vertex AI (forecasting)          │
│  - Cloud Spanner (audit trail)      │
└─────────────────────────────────────┘
```

## API endpoints

### Submit CBS signal

Submit community-based surveillance data from CHVs.

**Endpoint:** `POST /api/v1/submit-cbs`

**Request:**

```json
{
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-12-23T10:30:00Z",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "patient_age": 5,
  "patient_gender": "F",
  "notes": "Severe watery diarrhea, suspected cholera",
  "consent_token": "EMERGENCY_CHV_ALERT"
}
```

**Response:**

```json
{
  "status": "success",
  "signal_id": "CBS_20251223_001",
  "timestamp": "2025-12-23T10:30:15Z",
  "verification_status": "PENDING",
  "message": "CBS signal recorded. Awaiting EMR correlation."
}
```

### Submit EMR record

Submit electronic medical record from clinic/hospital.

**Endpoint:** `POST /api/v1/submit-emr`

**Request:**

```json
{
  "facility_id": "DADAAB_CLINIC",
  "patient_id": "PAT_12345",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab Refugee Camp"
  },
  "timestamp": "2025-12-23T11:00:00Z",
  "diagnosis": "cholera",
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "lab_results": {
    "rapid_test": "positive",
    "culture": "pending"
  },
  "treatment": "ORS + IV fluids",
  "consent_token": "PATIENT_CONSENT_12345"
}
```

**Response:**

```json
{
  "status": "success",
  "record_id": "EMR_20251223_001",
  "timestamp": "2025-12-23T11:00:10Z",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "matched_cbs_signals": ["CBS_20251223_001"],
  "message": "EMR record verified with CBS signal. Verification score: 1.0"
}
```

### Verify signal

Check verification status of a CBS signal or EMR record.

**Endpoint:** `GET /api/v1/verify-signal/{signal_id}`

**Response:**

```json
{
  "status": "success",
  "signal_id": "CBS_20251223_001",
  "verification_status": "CONFIRMED",
  "verification_score": 1.0,
  "matched_records": [
    {
      "type": "EMR",
      "record_id": "EMR_20251223_001",
      "location_match": true,
      "time_delta_hours": 0.5,
      "symptom_overlap": 1.0
    }
  ],
  "fused_record": {
    "location": "Dadaab Refugee Camp",
    "diagnosis": "cholera",
    "symptoms": ["diarrhea", "vomiting", "dehydration"],
    "severity": 9,
    "confidence": "HIGH"
  }
}
```

## Golden Thread verification

The Bio-Interface API uses the Golden Thread protocol to verify signals:

```python
from edge_node.sync_protocol.golden_thread import GoldenThread
from flask import Flask, request, jsonify

app = Flask(__name__)
gt = GoldenThread()

@app.route('/api/v1/submit-cbs', methods=['POST'])
def submit_cbs():
    \"\"\"Submit CBS signal from mobile app\"\"\"
    data = request.json
    
    # Store CBS signal
    cbs_signal = {
        'chv_id': data['chv_id'],
        'location': data['location']['name'],
        'timestamp': data['timestamp'],
        'symptoms': data['symptoms'],
        'severity': data['severity'],
        'source': 'CHV_MOBILE_APP'
    }
    
    # Check for matching EMR records
    verification_status = 'PENDING'
    verification_score = 0.0
    
    # Try to fuse with existing EMR records
    # (In production, query database for matching records)
    
    return jsonify({
        'status': 'success',
        'signal_id': f'CBS_{data["timestamp"].replace(":", "").replace("-", "")}',
        'verification_status': verification_status,
        'verification_score': verification_score
    })

@app.route('/api/v1/submit-emr', methods=['POST'])
def submit_emr():
    \"\"\"Submit EMR record from clinic system\"\"\"
    data = request.json
    
    # Store EMR record
    emr_record = {
        'facility_id': data['facility_id'],
        'patient_id': data['patient_id'],
        'location': data['location']['name'],
        'timestamp': data['timestamp'],
        'diagnosis': data['diagnosis'],
        'symptoms': data['symptoms'],
        'source': 'CLINIC_EMR'
    }
    
    # Try to fuse with CBS signals
    # (In production, query database for matching CBS signals)
    matched_cbs = []  # Query results
    
    if matched_cbs:
        # Fuse data streams
        fused = gt.fuse_data_streams(
            cbs_signal=matched_cbs[0],
            emr_record=emr_record,
            patient_id=data['patient_id']
        )
        
        verification_status = 'CONFIRMED'
        verification_score = fused.verification_score
    else:
        verification_status = 'UNVERIFIED'
        verification_score = 0.3
    
    return jsonify({
        'status': 'success',
        'record_id': f'EMR_{data["timestamp"].replace(":", "").replace("-", "")}',
        'verification_status': verification_status,
        'verification_score': verification_score,
        'matched_cbs_signals': [s['signal_id'] for s in matched_cbs]
    })
```

## Verification logic

The Golden Thread verifies signals using cross-source correlation:

<Steps>
  <Step title="Location match">
    CBS and EMR locations must match (same camp/clinic)
  </Step>
  <Step title="Time delta">
    Timestamps must be within 24 hours
  </Step>
  <Step title="Symptom overlap">
    Symptoms must have significant overlap (>50%)
  </Step>
  <Step title="Verification score">
    Calculate final score: 1.0 (CONFIRMED), 0.7-0.9 (PROBABLE), 0.4-0.6 (POSSIBLE), 0.0-0.3 (UNVERIFIED)
  </Step>
</Steps>

## Mobile SDK integration

### Android (Kotlin)

```kotlin
import okhttp3.*
import org.json.JSONObject

class ILuminaraClient(private val baseUrl: String) {
    private val client = OkHttpClient()
    
    fun submitCBSSignal(
        chvId: String,
        location: Location,
        symptoms: List<String>,
        severity: Int,
        consentToken: String
    ): Response {
        val json = JSONObject().apply {
            put("chv_id", chvId)
            put("location", JSONObject().apply {
                put("lat", location.latitude)
                put("lng", location.longitude)
                put("name", location.name)
            })
            put("timestamp", System.currentTimeMillis())
            put("symptoms", symptoms)
            put("severity", severity)
            put("consent_token", consentToken)
        }
        
        val body = RequestBody.create(
            MediaType.parse("application/json"),
            json.toString()
        )
        
        val request = Request.Builder()
            .url("$baseUrl/api/v1/submit-cbs")
            .post(body)
            .build()
        
        return client.newCall(request).execute()
    }
}

// Usage
val client = ILuminaraClient("https://api.iluminara.health")

val response = client.submitCBSSignal(
    chvId = "CHV_AMINA_HASSAN",
    location = Location(0.0512, 40.3129, "Dadaab"),
    symptoms = listOf("diarrhea", "vomiting"),
    severity = 9,
    consentToken = "EMERGENCY_CHV_ALERT"
)
```

### iOS (Swift)

```swift
import Foundation

class ILuminaraClient {
    let baseURL: String
    
    init(baseURL: String) {
        self.baseURL = baseURL
    }
    
    func submitCBSSignal(
        chvId: String,
        location: Location,
        symptoms: [String],
        severity: Int,
        consentToken: String,
        completion: @escaping (Result<Response, Error>) -> Void
    ) {
        let url = URL(string: "\\(baseURL)/api/v1/submit-cbs")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        
        let body: [String: Any] = [
            "chv_id": chvId,
            "location": [
                "lat": location.latitude,
                "lng": location.longitude,
                "name": location.name
            ],
            "timestamp": ISO8601DateFormatter().string(from: Date()),
            "symptoms": symptoms,
            "severity": severity,
            "consent_token": consentToken
        ]
        
        request.httpBody = try? JSONSerialization.data(withJSONObject: body)
        
        URLSession.shared.dataTask(with: request) { data, response, error in
            if let error = error {
                completion(.failure(error))
                return
            }
            
            // Parse response
            completion(.success(Response()))
        }.resume()
    }
}

// Usage
let client = ILuminaraClient(baseURL: "https://api.iluminara.health")

client.submitCBSSignal(
    chvId: "CHV_AMINA_HASSAN",
    location: Location(lat: 0.0512, lng: 40.3129, name: "Dadaab"),
    symptoms: ["diarrhea", "vomiting"],
    severity: 9,
    consentToken: "EMERGENCY_CHV_ALERT"
) { result in
    switch result {
    case .success(let response):
        print("Signal submitted: \\(response.signalId)")
    case .failure(let error):
        print("Error: \\(error)")
    }
}
```

## Offline support

The Bio-Interface API supports offline-first mobile apps:

```python
# Mobile app queues data when offline
offline_queue = []

def submit_cbs_with_retry(data):
    try:
        response = requests.post(
            'https://api.iluminara.health/api/v1/submit-cbs',
            json=data,
            timeout=5
        )
        return response.json()
    except requests.exceptions.RequestException:
        # Queue for later
        offline_queue.append({
            'endpoint': '/api/v1/submit-cbs',
            'data': data,
            'timestamp': datetime.utcnow().isoformat()
        })
        return {'status': 'queued', 'message': 'Offline - queued for sync'}

# Sync when connectivity returns
def sync_offline_queue():
    for item in offline_queue:
        try:
            response = requests.post(
                f'https://api.iluminara.health{item["endpoint"]}',
                json=item['data']
            )
            if response.status_code == 200:
                offline_queue.remove(item)
        except:
            continue
```

## Sovereignty compliance

All Bio-Interface API calls enforce sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

@app.route('/api/v1/submit-cbs', methods=['POST'])
def submit_cbs():
    data = request.json
    
    # Validate sovereignty
    guardrail.validate_action(
        action_type='Data_Transfer',
        payload={
            'data_type': 'PHI',
            'destination': 'Edge_Node',
            'consent_token': data['consent_token']
        },
        jurisdiction='KDPA_KE'
    )
    
    # Process CBS signal
    # ...
```

## Rate limiting

```python
from flask_limiter import Limiter

limiter = Limiter(app, key_func=lambda: request.headers.get('X-API-Key'))

@app.route('/api/v1/submit-cbs', methods=['POST'])
@limiter.limit("100 per minute")
def submit_cbs():
    # ...
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integration/vertex-ai-shap"
  >
    AI explainability integration
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Data fusion engine details
  </Card>
  <Card
    title="API reference"
    icon="terminal"
    href="/api-reference/overview"
  >
    Complete API documentation
  </Card>
  <Card
    title="Deployment"
    icon="rocket"
    href="/deployment/overview"
  >
    Deploy to production
  </Card>
</CardGroup>
