---
title: Bio-Interface REST API
description: Mobile health app integration with Golden Thread data fusion
---

## Overview

The Bio-Interface REST API enables mobile health applications to integrate with iLuminara-Core using the **Golden Thread protocol** for data fusion from Community-Based Surveillance (CBS) and Electronic Medical Records (EMR).

<Card
  title="Philosophy"
  icon="mobile"
>
  "Every mobile health signal becomes a verified thread in the sovereign tapestry."
</Card>

## Architecture

```
┌─────────────────────────────────────┐
│   MOBILE HEALTH APPS                │
│  - CHV Data Collection              │
│  - Patient Self-Reporting           │
│  - IoT Sensor Integration           │
└─────────────────────────────────────┘
              │
              │ HTTPS/REST
              ▼
┌─────────────────────────────────────┐
│   BIO-INTERFACE API                 │
│  - Authentication                   │
│  - Data Validation                  │
│  - Rate Limiting                    │
└─────────────────────────────────────┘
              │
              │ Golden Thread Protocol
              ▼
┌─────────────────────────────────────┐
│   GOLDEN THREAD ENGINE              │
│  - CBS Signal Processing            │
│  - EMR Fusion                       │
│  - Verification Scoring             │
└─────────────────────────────────────┘
              │
              │ Sovereignty Check
              ▼
┌─────────────────────────────────────┐
│   SOVEREIGN GUARDRAIL               │
│  - Data Residency                   │
│  - Consent Validation               │
│  - Audit Logging                    │
└─────────────────────────────────────┘
```

## API endpoints

### Submit CBS signal

Submit a Community-Based Surveillance signal from mobile app.

```
POST /api/v1/cbs/submit
```

**Headers:**
```
Authorization: Bearer <token>
Content-Type: application/json
X-Jurisdiction: KDPA_KE
```

**Request body:**
```json
{
  "patient_id": "PAT_12345",
  "chv_id": "CHV_AMINA_HASSAN",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab"
  },
  "symptoms": ["diarrhea", "vomiting", "dehydration"],
  "severity": 9,
  "timestamp": "2025-12-23T10:00:00Z",
  "consent_token": "CONSENT_TOKEN_123",
  "metadata": {
    "app_version": "1.2.3",
    "device_id": "DEVICE_456"
  }
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "signal_id": "CBS_789",
  "verification_score": 0.3,
  "verification_status": "UNVERIFIED",
  "message": "CBS signal recorded. Awaiting EMR correlation.",
  "next_steps": [
    "Signal will be verified when EMR record is available",
    "Verification score will increase with cross-source confirmation"
  ]
}
```

### Submit EMR record

Submit an Electronic Medical Record from clinic/hospital system.

```
POST /api/v1/emr/submit
```

**Request body:**
```json
{
  "patient_id": "PAT_12345",
  "facility_id": "DADAAB_CLINIC",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129,
    "name": "Dadaab"
  },
  "diagnosis": "cholera",
  "symptoms": ["diarrhea", "vomiting"],
  "lab_results": {
    "rapid_test": "positive",
    "culture": "pending"
  },
  "timestamp": "2025-12-23T10:30:00Z",
  "consent_token": "CONSENT_TOKEN_123"
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "record_id": "EMR_101",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "message": "EMR record fused with CBS signal CBS_789",
  "fused_timeline": {
    "cbs_timestamp": "2025-12-23T10:00:00Z",
    "emr_timestamp": "2025-12-23T10:30:00Z",
    "time_delta_minutes": 30,
    "location_match": true,
    "symptom_overlap": ["diarrhea", "vomiting"]
  }
}
```

### Get verification status

Check verification status of a patient's health timeline.

```
GET /api/v1/verification/{patient_id}
```

**Response (200 OK):**
```json
{
  "patient_id": "PAT_12345",
  "verification_score": 1.0,
  "verification_status": "CONFIRMED",
  "data_sources": ["CBS", "EMR"],
  "timeline": [
    {
      "timestamp": "2025-12-23T10:00:00Z",
      "source": "CBS",
      "signal_id": "CBS_789",
      "symptoms": ["diarrhea", "vomiting", "dehydration"]
    },
    {
      "timestamp": "2025-12-23T10:30:00Z",
      "source": "EMR",
      "record_id": "EMR_101",
      "diagnosis": "cholera"
    }
  ],
  "retention_status": "HOT",
  "expires_at": "2026-06-23T10:30:00Z"
}
```

## Python SDK

```python
import requests
from typing import Dict, List

class iLuminaraBioInterface:
    """
    Python SDK for iLuminara Bio-Interface API
    """
    
    def __init__(
        self,
        base_url: str = "https://api.iluminara.health",
        api_key: str = None,
        jurisdiction: str = "KDPA_KE"
    ):
        self.base_url = base_url
        self.api_key = api_key
        self.jurisdiction = jurisdiction
        self.session = requests.Session()
        self.session.headers.update({
            'Authorization': f'Bearer {api_key}',
            'X-Jurisdiction': jurisdiction
        })
    
    def submit_cbs_signal(
        self,
        patient_id: str,
        chv_id: str,
        location: Dict[str, float],
        symptoms: List[str],
        severity: int,
        consent_token: str,
        metadata: Dict = None
    ) -> Dict:
        """Submit CBS signal from mobile app"""
        
        payload = {
            'patient_id': patient_id,
            'chv_id': chv_id,
            'location': location,
            'symptoms': symptoms,
            'severity': severity,
            'consent_token': consent_token,
            'metadata': metadata or {}
        }
        
        response = self.session.post(
            f'{self.base_url}/api/v1/cbs/submit',
            json=payload
        )
        response.raise_for_status()
        return response.json()
    
    def submit_emr_record(
        self,
        patient_id: str,
        facility_id: str,
        location: Dict[str, float],
        diagnosis: str,
        symptoms: List[str],
        consent_token: str,
        lab_results: Dict = None
    ) -> Dict:
        """Submit EMR record from clinic/hospital"""
        
        payload = {
            'patient_id': patient_id,
            'facility_id': facility_id,
            'location': location,
            'diagnosis': diagnosis,
            'symptoms': symptoms,
            'consent_token': consent_token,
            'lab_results': lab_results or {}
        }
        
        response = self.session.post(
            f'{self.base_url}/api/v1/emr/submit',
            json=payload
        )
        response.raise_for_status()
        return response.json()
    
    def get_verification_status(self, patient_id: str) -> Dict:
        """Get verification status for patient"""
        
        response = self.session.get(
            f'{self.base_url}/api/v1/verification/{patient_id}'
        )
        response.raise_for_status()
        return response.json()


# Example usage
if __name__ == "__main__":
    # Initialize SDK
    api = iLuminaraBioInterface(
        base_url='http://localhost:8080',
        api_key='YOUR_API_KEY',
        jurisdiction='KDPA_KE'
    )
    
    # Submit CBS signal from CHV mobile app
    cbs_result = api.submit_cbs_signal(
        patient_id='PAT_12345',
        chv_id='CHV_AMINA_HASSAN',
        location={'lat': 0.0512, 'lng': 40.3129, 'name': 'Dadaab'},
        symptoms=['diarrhea', 'vomiting', 'dehydration'],
        severity=9,
        consent_token='CONSENT_TOKEN_123',
        metadata={'app_version': '1.2.3'}
    )
    
    print(f"CBS Signal: {cbs_result['signal_id']}")
    print(f"Verification: {cbs_result['verification_status']}")
    
    # Submit EMR record from clinic
    emr_result = api.submit_emr_record(
        patient_id='PAT_12345',
        facility_id='DADAAB_CLINIC',
        location={'lat': 0.0512, 'lng': 40.3129, 'name': 'Dadaab'},
        diagnosis='cholera',
        symptoms=['diarrhea', 'vomiting'],
        consent_token='CONSENT_TOKEN_123',
        lab_results={'rapid_test': 'positive'}
    )
    
    print(f"EMR Record: {emr_result['record_id']}")
    print(f"Verification: {emr_result['verification_status']}")
    print(f"Fused with: {emr_result['message']}")
    
    # Check verification status
    status = api.get_verification_status('PAT_12345')
    print(f"Final Verification Score: {status['verification_score']}")
```

## Mobile app integration

### Flutter example

```dart
import 'package:http/http.dart' as http;
import 'dart:convert';

class iLuminaraAPI {
  final String baseUrl;
  final String apiKey;
  final String jurisdiction;
  
  iLuminaraAPI({
    required this.baseUrl,
    required this.apiKey,
    this.jurisdiction = 'KDPA_KE',
  });
  
  Future<Map<String, dynamic>> submitCBSSignal({
    required String patientId,
    required String chvId,
    required Map<String, double> location,
    required List<String> symptoms,
    required int severity,
    required String consentToken,
  }) async {
    final response = await http.post(
      Uri.parse('$baseUrl/api/v1/cbs/submit'),
      headers: {
        'Authorization': 'Bearer $apiKey',
        'Content-Type': 'application/json',
        'X-Jurisdiction': jurisdiction,
      },
      body: jsonEncode({
        'patient_id': patientId,
        'chv_id': chvId,
        'location': location,
        'symptoms': symptoms,
        'severity': severity,
        'consent_token': consentToken,
      }),
    );
    
    if (response.statusCode == 200) {
      return jsonDecode(response.body);
    } else {
      throw Exception('Failed to submit CBS signal');
    }
  }
}

// Usage
void main() async {
  final api = iLuminaraAPI(
    baseUrl: 'https://api.iluminara.health',
    apiKey: 'YOUR_API_KEY',
  );
  
  final result = await api.submitCBSSignal(
    patientId: 'PAT_12345',
    chvId: 'CHV_AMINA_HASSAN',
    location: {'lat': 0.0512, 'lng': 40.3129},
    symptoms: ['diarrhea', 'vomiting'],
    severity: 9,
    consentToken: 'CONSENT_TOKEN_123',
  );
  
  print('Signal ID: ${result['signal_id']}');
}
```

## Authentication

The Bio-Interface API uses JWT tokens for authentication:

```python
import jwt
from datetime import datetime, timedelta

# Generate JWT token
def generate_token(user_id: str, role: str, secret_key: str) -> str:
    payload = {
        'user_id': user_id,
        'role': role,  # 'chv', 'clinician', 'admin'
        'jurisdiction': 'KDPA_KE',
        'exp': datetime.utcnow() + timedelta(hours=24)
    }
    return jwt.encode(payload, secret_key, algorithm='HS256')

# Verify token
def verify_token(token: str, secret_key: str) -> dict:
    return jwt.decode(token, secret_key, algorithms=['HS256'])
```

## Rate limiting

The API implements rate limiting to prevent abuse:

| Role | Rate Limit | Burst |
|------|------------|-------|
| CHV | 100 requests/hour | 10 |
| Clinician | 500 requests/hour | 50 |
| Admin | 1000 requests/hour | 100 |

## Sovereignty compliance

All API requests are validated by the SovereignGuardrail:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate CBS submission
guardrail.validate_action(
    action_type='Data_Transfer',
    payload={
        'data_type': 'PHI',
        'destination': 'Edge_Node',
        'consent_token': consent_token,
        'consent_scope': 'public_health_surveillance'
    },
    jurisdiction='KDPA_KE'
)
```

## Error handling

| Status Code | Error | Description |
|-------------|-------|-------------|
| 400 | `invalid_request` | Missing or invalid parameters |
| 401 | `unauthorized` | Invalid or expired token |
| 403 | `sovereignty_violation` | Action violates compliance rules |
| 429 | `rate_limit_exceeded` | Too many requests |
| 500 | `internal_error` | Server error |

## Next steps

<CardGroup cols={2}>
  <Card
    title="Vertex AI + SHAP"
    icon="brain"
    href="/integration/vertex-ai-shap"
  >
    Add explainable AI to your app
  </Card>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="Governance"
    icon="shield-check"
    href="/governance/overview"
  >
    Ensure compliance
  </Card>
  <Card
    title="API reference"
    icon="terminal"
    href="/api-reference/overview"
  >
    Complete API documentation
  </Card>
</CardGroup>
