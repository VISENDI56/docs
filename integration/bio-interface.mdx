---
title: Bio-Interface REST API
description: Mobile health apps integration with Golden Thread protocol
---

## Overview

The Bio-Interface REST API enables mobile health applications to submit CBS (Community-Based Surveillance) signals that are automatically fused with EMR and IDSR data streams via the Golden Thread protocol.

<Card
  title="Philosophy"
  icon="mobile"
>
  "Zero-friction data collection with sovereign dignity."
</Card>

## Key features

<CardGroup cols={2}>
  <Card title="Golden Thread fusion" icon="link">
    Automatic data fusion with EMR and IDSR streams
  </Card>
  <Card title="Real-time verification" icon="check-circle">
    Cross-source verification within 24 hours
  </Card>
  <Card title="Sovereignty enforcement" icon="shield-check">
    SovereignGuardrail validates all submissions
  </Card>
  <Card title="PubSub alerts" icon="bell">
    Real-time alerts for high-risk signals
  </Card>
</CardGroup>

## Base URL

```
http://localhost:8080/api/v1
```

For production: `https://api.iluminara.health/api/v1`

## Authentication

Currently uses consent tokens for emergency CHV alerts. For production, implement:

- OAuth 2.0
- API keys
- JWT tokens

## Endpoints

### Health check

```http
GET /health
```

**Response:**
```json
{
  "status": "healthy",
  "service": "Bio-Interface REST API",
  "version": "1.0.0",
  "timestamp": "2025-12-23T19:00:00.000Z",
  "components": {
    "sovereign_guardrail": "operational",
    "golden_thread": "operational",
    "pubsub": "operational"
  }
}
```

### Submit signal

Submit a health signal from mobile app.

```http
POST /signals/submit
```

**Request body:**
```json
{
  "signal_type": "CBS",
  "location": {
    "lat": 0.0512,
    "lng": 40.3129
  },
  "symptoms": ["fever", "cough", "fatigue"],
  "severity": 7,
  "patient_id": "PAT_12345",
  "reporter_id": "CHV_AMINA_HASSAN",
  "timestamp": "2025-12-23T19:00:00Z",
  "metadata": {
    "age": 35,
    "gender": "F",
    "pregnant": false
  },
  "consent_token": "VALID_TOKEN",
  "jurisdiction": "KDPA_KE"
}
```

**Response (201 Created):**
```json
{
  "status": "success",
  "signal_id": "SIG_20251223190000",
  "verification_score": 0.85,
  "alert_level": "high",
  "fused_record": {
    "location": "Dadaab",
    "symptoms": ["fever", "cough", "fatigue"],
    "verification_score": 0.85,
    "sources": ["CBS"],
    "timestamp": "2025-12-23T19:00:00Z"
  },
  "timestamp": "2025-12-23T19:00:01.234Z"
}
```

### Batch submit

Submit multiple signals in one request.

```http
POST /signals/batch
```

**Request body:**
```json
{
  "signals": [
    {
      "signal_type": "CBS",
      "location": {"lat": 0.0512, "lng": 40.3129},
      "symptoms": ["fever"],
      "patient_id": "PAT_001"
    },
    {
      "signal_type": "CBS",
      "location": {"lat": 0.0520, "lng": 40.3135},
      "symptoms": ["diarrhea"],
      "patient_id": "PAT_002"
    }
  ]
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "processed": 2,
  "failed": 0,
  "results": [
    {
      "signal_id": "SIG_20251223190000_0",
      "status": "success"
    },
    {
      "signal_id": "SIG_20251223190000_1",
      "status": "success"
    }
  ]
}
```

### Get signal

Retrieve a signal by ID.

```http
GET /signals/{signal_id}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "signal_id": "SIG_20251223190000",
  "signal": {
    "location": {"lat": 0.0512, "lng": 40.3129},
    "symptoms": ["fever", "cough"],
    "verification_score": 0.85,
    "timestamp": "2025-12-23T19:00:00Z"
  }
}
```

### Outbreak status

Get current outbreak status for a location.

```http
GET /outbreak/status?location=Dadaab
```

**Query parameters:**
- `location` - Location name (e.g., "Dadaab")
- `lat` - Latitude (alternative to location)
- `lng` - Longitude (alternative to location)

**Response (200 OK):**
```json
{
  "status": "success",
  "location": "Dadaab",
  "outbreak_status": "active",
  "risk_level": "high",
  "cases_24h": 15,
  "z_score": 8.5,
  "timestamp": "2025-12-23T19:00:00Z"
}
```

### Check verification

Check verification status of a signal.

```http
POST /verification/check
```

**Request body:**
```json
{
  "cbs_signal": {
    "location": "Dadaab",
    "symptom": "fever",
    "timestamp": "2025-12-23T19:00:00Z"
  },
  "emr_record": {
    "location": "Dadaab",
    "diagnosis": "malaria",
    "timestamp": "2025-12-23T19:15:00Z"
  },
  "patient_id": "PAT_12345"
}
```

**Response (200 OK):**
```json
{
  "status": "success",
  "verification_score": 0.95,
  "verification_status": "CONFIRMED",
  "fused_record": {
    "location": "Dadaab",
    "symptoms": ["fever"],
    "diagnosis": "malaria",
    "verification_score": 0.95,
    "sources": ["CBS", "EMR"]
  }
}
```

## Signal types

```python
class SignalType(Enum):
    CBS = "community_based_surveillance"
    EMR = "electronic_medical_record"
    IDSR = "integrated_disease_surveillance_response"
    CHV_VOICE = "community_health_volunteer_voice"
    IOT_SENSOR = "iot_sensor"
```

## Alert levels

| Level | Weighted Score | Description |
|-------|----------------|-------------|
| **LOW** | < 0.4 | Routine monitoring |
| **MEDIUM** | 0.4 - 0.6 | Increased surveillance |
| **HIGH** | 0.6 - 0.8 | Immediate attention required |
| **CRITICAL** | > 0.8 | Emergency response triggered |

**Weighted score calculation:**
```
weighted_score = (severity / 10) * 0.6 + verification_score * 0.4
```

## Verification status

| Score | Status | Description |
|-------|--------|-------------|
| â‰¥ 0.9 | CONFIRMED | Multiple sources agree |
| 0.7 - 0.9 | PROBABLE | Partial agreement |
| 0.4 - 0.7 | POSSIBLE | Significant conflicts |
| < 0.4 | UNVERIFIED | Single source only |

## Mobile app integration

### Flutter example

```dart
import 'package:http/http.dart' as http;
import 'dart:convert';

class ILuminaraAPI {
  final String baseUrl = 'https://api.iluminara.health/api/v1';
  
  Future<Map<String, dynamic>> submitSignal({
    required double lat,
    required double lng,
    required List<String> symptoms,
    required int severity,
    required String patientId,
    required String reporterId,
  }) async {
    final response = await http.post(
      Uri.parse('$baseUrl/signals/submit'),
      headers: {'Content-Type': 'application/json'},
      body: jsonEncode({
        'signal_type': 'CBS',
        'location': {'lat': lat, 'lng': lng},
        'symptoms': symptoms,
        'severity': severity,
        'patient_id': patientId,
        'reporter_id': reporterId,
        'timestamp': DateTime.now().toIso8601String(),
      }),
    );
    
    if (response.statusCode == 201) {
      return jsonDecode(response.body);
    } else {
      throw Exception('Failed to submit signal');
    }
  }
  
  Future<Map<String, dynamic>> getOutbreakStatus(String location) async {
    final response = await http.get(
      Uri.parse('$baseUrl/outbreak/status?location=$location'),
    );
    
    if (response.statusCode == 200) {
      return jsonDecode(response.body);
    } else {
      throw Exception('Failed to get outbreak status');
    }
  }
}

// Usage
void main() async {
  final api = ILuminaraAPI();
  
  // Submit signal
  final result = await api.submitSignal(
    lat: 0.0512,
    lng: 40.3129,
    symptoms: ['fever', 'cough'],
    severity: 7,
    patientId: 'PAT_12345',
    reporterId: 'CHV_AMINA_HASSAN',
  );
  
  print('Signal ID: ${result['signal_id']}');
  print('Verification: ${result['verification_score']}');
  print('Alert Level: ${result['alert_level']}');
  
  // Check outbreak status
  final status = await api.getOutbreakStatus('Dadaab');
  print('Outbreak Status: ${status['outbreak_status']}');
  print('Risk Level: ${status['risk_level']}');
}
```

### React Native example

```javascript
import axios from 'axios';

const API_BASE_URL = 'https://api.iluminara.health/api/v1';

export const submitSignal = async (signalData) => {
  try {
    const response = await axios.post(
      `${API_BASE_URL}/signals/submit`,
      {
        signal_type: 'CBS',
        location: signalData.location,
        symptoms: signalData.symptoms,
        severity: signalData.severity,
        patient_id: signalData.patientId,
        reporter_id: signalData.reporterId,
        timestamp: new Date().toISOString(),
      }
    );
    
    return response.data;
  } catch (error) {
    console.error('Failed to submit signal:', error);
    throw error;
  }
};

export const getOutbreakStatus = async (location) => {
  try {
    const response = await axios.get(
      `${API_BASE_URL}/outbreak/status`,
      { params: { location } }
    );
    
    return response.data;
  } catch (error) {
    console.error('Failed to get outbreak status:', error);
    throw error;
  }
};

// Usage
const handleSubmitSymptoms = async () => {
  const result = await submitSignal({
    location: { lat: 0.0512, lng: 40.3129 },
    symptoms: ['fever', 'cough'],
    severity: 7,
    patientId: 'PAT_12345',
    reporterId: 'CHV_AMINA_HASSAN',
  });
  
  console.log('Signal ID:', result.signal_id);
  console.log('Verification:', result.verification_score);
  console.log('Alert Level:', result.alert_level);
};
```

## Sovereignty compliance

All API requests are validated against sovereignty constraints:

```python
from governance_kernel.vector_ledger import SovereignGuardrail

guardrail = SovereignGuardrail()

# Validate before processing
guardrail.validate_action(
    action_type='Data_Processing',
    payload={
        'data_type': 'PHI',
        'processing_location': 'Edge_Node',
        'consent_token': 'EMERGENCY_CHV_ALERT',
        'consent_scope': 'public_health_surveillance'
    },
    jurisdiction='KDPA_KE'
)
```

## Real-time alerts

High-risk signals trigger PubSub alerts:

```python
from google.cloud import pubsub_v1

# Subscribe to alerts
subscriber = pubsub_v1.SubscriberClient()
subscription_path = subscriber.subscription_path(
    'iluminara-core',
    'health-alerts-sub'
)

def callback(message):
    alert = json.loads(message.data.decode('utf-8'))
    
    print(f"ðŸš¨ ALERT: {alert['alert_level']}")
    print(f"   Signal: {alert['signal_id']}")
    print(f"   Location: {alert['location']}")
    print(f"   Verification: {alert['verification_score']}")
    
    message.ack()

subscriber.subscribe(subscription_path, callback=callback)
```

## Error handling

| Status Code | Error | Description |
|-------------|-------|-------------|
| 400 | `missing_field` | Required field not provided |
| 400 | `missing_location` | Location required |
| 400 | `no_signals` | No signals in batch request |
| 403 | `sovereignty_violation` | Action violates compliance rules |
| 500 | `processing_failed` | Internal processing error |

## Rate limiting

Recommended rate limits for production:

- Signal submission: 100 requests/minute per IP
- Batch submission: 10 requests/minute per IP
- Outbreak status: 1000 requests/minute per IP
- Verification check: 100 requests/minute per IP

## Deployment

### Start the API service

```bash
python api/bio_interface.py
```

### Deploy to Cloud Run

```bash
gcloud run deploy bio-interface \
  --source . \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars GOOGLE_CLOUD_PROJECT=iluminara-core
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Golden Thread"
    icon="link"
    href="/architecture/golden-thread"
  >
    Understand data fusion logic
  </Card>
  <Card
    title="SovereignGuardrail"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure compliance enforcement
  </Card>
  <Card
    title="Mobile apps"
    icon="mobile"
    href="/integration/mobile-apps"
  >
    Build mobile health applications
  </Card>
  <Card
    title="Deploy to GCP"
    icon="cloud"
    href="/deployment/gcp"
  >
    Production deployment guide
  </Card>
</CardGroup>
