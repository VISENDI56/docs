# iLuminara-Core SovereignGuardrail Configuration
# Enforces 47 global legal frameworks for health data sovereignty
# The most comprehensive compliance engine in global health technology

version: "2.0.0"
fortress_name: "iLuminara Sovereign Health Fortress - 47 Framework Edition"

# ═══════════════════════════════════════════════════════════════════════════
# JURISDICTION CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════

jurisdiction:
  primary: "KDPA_KE"  # Kenya Data Protection Act
  secondary:
    # Africa
    - "POPIA_ZA"      # South Africa Protection of Personal Information Act
    - "NDPR_NG"       # Nigeria Data Protection Regulation
    - "DPA_GH"        # Ghana Data Protection Act
    - "DPA_UG"        # Uganda Data Protection Act
    - "DPA_RW"        # Rwanda Data Protection Law
    - "DPA_TZ"        # Tanzania Data Protection Act
    
    # Europe
    - "GDPR_EU"       # European Union General Data Protection Regulation
    - "GDPR_UK"       # UK GDPR (post-Brexit)
    - "FADP_CH"       # Switzerland Federal Act on Data Protection
    - "DPA_NO"        # Norway Data Protection Act
    
    # Americas
    - "HIPAA_US"      # USA Health Insurance Portability and Accountability Act
    - "HITECH_US"     # USA Health Information Technology for Economic and Clinical Health
    - "CCPA_US"       # California Consumer Privacy Act
    - "CPRA_US"       # California Privacy Rights Act
    - "VCDPA_US"      # Virginia Consumer Data Protection Act
    - "CPA_US"        # Colorado Privacy Act
    - "PIPEDA_CA"     # Canada Personal Information Protection and Electronic Documents Act
    - "LGPD_BR"       # Brazil Lei Geral de Proteção de Dados
    
    # Asia-Pacific
    - "PDPA_SG"       # Singapore Personal Data Protection Act
    - "PDPA_MY"       # Malaysia Personal Data Protection Act
    - "PDPA_TH"       # Thailand Personal Data Protection Act
    - "PIPL_CN"       # China Personal Information Protection Law
    - "APPI_JP"       # Japan Act on Protection of Personal Information
    - "PIPA_KR"       # South Korea Personal Information Protection Act
    - "PDPA_ID"       # Indonesia Personal Data Protection Act
    - "DPA_PH"        # Philippines Data Privacy Act
    - "PA_AU"         # Australia Privacy Act
    - "PA_NZ"         # New Zealand Privacy Act
    
    # Middle East
    - "PDPL_SA"       # Saudi Arabia Personal Data Protection Law
    - "DIFC_DPL"      # Dubai International Financial Centre Data Protection Law
    - "PDPL_QA"       # Qatar Personal Data Protection Law
    - "DPL_IL"        # Israel Privacy Protection Law

# ═══════════════════════════════════════════════════════════════════════════
# COMPLIANCE FRAMEWORKS (47 TOTAL)
# ═══════════════════════════════════════════════════════════════════════════

frameworks:
  # ─────────────────────────────────────────────────────────────────────────
  # CATEGORY 1: DATA PROTECTION & PRIVACY (33 frameworks)
  # ─────────────────────────────────────────────────────────────────────────
  
  # Europe (4)
  GDPR_EU:
    enabled: true
    region: "European Union"
    articles:
      - "Art. 5 (Principles of Processing)"
      - "Art. 6 (Lawfulness of Processing)"
      - "Art. 9 (Special Categories - Health Data)"
      - "Art. 17 (Right to Erasure)"
      - "Art. 22 (Automated Decision-Making)"
      - "Art. 30 (Records of Processing)"
      - "Art. 32 (Security of Processing)"
      - "Art. 33 (Breach Notification)"
      - "Art. 35 (Data Protection Impact Assessment)"
      - "Art. 44-50 (International Transfers)"
    penalties: "€20M or 4% global revenue"
    
  GDPR_UK:
    enabled: true
    region: "United Kingdom"
    articles: ["Same as GDPR_EU with UK-specific amendments"]
    penalties: "£17.5M or 4% global revenue"
  
  FADP_CH:
    enabled: true
    region: "Switzerland"
    articles: ["Art. 4-10 (Data Processing Principles)"]
    penalties: "CHF 250,000"
  
  DPA_NO:
    enabled: true
    region: "Norway"
    articles: ["Aligned with GDPR"]
    penalties: "NOK 20M or 4% global revenue"
  
  # Africa (7)
  KDPA_KE:
    enabled: true
    region: "Kenya"
    sections:
      - "§25 (Principles of Data Protection)"
      - "§30 (Data Subject Rights)"
      - "§37 (Transfer of Personal Data Outside Kenya)"
      - "§42 (Data Breach Notification)"
      - "§48 (Offences and Penalties)"
    penalties: "KES 5M or imprisonment"
    
  POPIA_ZA:
    enabled: true
    region: "South Africa"
    sections:
      - "§9 (Processing Limitation)"
      - "§11 (Purpose Specification)"
      - "§14 (Further Processing Limitation)"
      - "§19 (Security Safeguards)"
      - "§72 (Trans-border Information Flows)"
    penalties: "ZAR 10M or 10 years imprisonment"
  
  NDPR_NG:
    enabled: true
    region: "Nigeria"
    sections: ["Part III (Lawful Processing)", "Part IV (Data Subject Rights)"]
    penalties: "2% of annual gross revenue"
  
  DPA_GH:
    enabled: true
    region: "Ghana"
    sections: ["Data Protection Principles", "Cross-border Transfers"]
    penalties: "GHS 2M"
  
  DPA_UG:
    enabled: true
    region: "Uganda"
    sections: ["Data Protection Principles", "Data Subject Rights"]
    penalties: "UGX 5M or 10 years imprisonment"
  
  DPA_RW:
    enabled: true
    region: "Rwanda"
    sections: ["Data Protection Principles", "International Transfers"]
    penalties: "RWF 10M"
  
  DPA_TZ:
    enabled: true
    region: "Tanzania"
    sections: ["Data Protection Principles", "Cross-border Transfers"]
    penalties: "TZS 5M or 3 years imprisonment"
  
  # Americas (9)
  HIPAA_US:
    enabled: true
    region: "United States"
    sections:
      - "§164.308 (Administrative Safeguards)"
      - "§164.310 (Physical Safeguards)"
      - "§164.312 (Technical Safeguards)"
      - "§164.314 (Organizational Requirements)"
      - "§164.316 (Policies and Procedures)"
      - "§164.530 (Administrative Requirements)"
    penalties: "$50,000 per violation, $1.5M annual max"
  
  HITECH_US:
    enabled: true
    region: "United States"
    sections:
      - "§13400 (Definitions)"
      - "§13402 (Breach Notification)"
      - "§13410 (Increased Penalties)"
    penalties: "Up to $1.5M per violation category"
  
  CCPA_US:
    enabled: true
    region: "California, USA"
    sections:
      - "§1798.100 (Right to Know)"
      - "§1798.105 (Right to Delete)"
      - "§1798.110 (Right to Access)"
      - "§1798.120 (Right to Opt-Out)"
    penalties: "$7,500 per intentional violation"
  
  CPRA_US:
    enabled: true
    region: "California, USA"
    sections: ["Expands CCPA with sensitive data protections"]
    penalties: "$7,500 per intentional violation"
  
  VCDPA_US:
    enabled: true
    region: "Virginia, USA"
    sections: ["Consumer Rights", "Data Protection Assessments"]
    penalties: "$7,500 per violation"
  
  CPA_US:
    enabled: true
    region: "Colorado, USA"
    sections: ["Consumer Rights", "Data Protection Assessments"]
    penalties: "$20,000 per violation"
  
  PIPEDA_CA:
    enabled: true
    region: "Canada"
    sections:
      - "Schedule 1 (Fair Information Principles)"
      - "§5-7 (Obligations)"
      - "§8 (Individual Access)"
    penalties: "CAD $100,000"
  
  LGPD_BR:
    enabled: true
    region: "Brazil"
    articles:
      - "Art. 6 (Processing Principles)"
      - "Art. 7-11 (Legal Bases)"
      - "Art. 18 (Data Subject Rights)"
      - "Art. 33 (International Transfers)"
    penalties: "BRL 50M or 2% revenue"
  
  # Asia-Pacific (11)
  PDPA_SG:
    enabled: true
    region: "Singapore"
    sections:
      - "Part III (Consent)"
      - "Part IV (Purpose Limitation)"
      - "Part VI (Accuracy)"
      - "Part IX (Transfer Limitation)"
    penalties: "SGD 1M"
  
  PDPA_MY:
    enabled: true
    region: "Malaysia"
    sections: ["Data Protection Principles", "Cross-border Transfers"]
    penalties: "MYR 500,000 or 3 years imprisonment"
  
  PDPA_TH:
    enabled: true
    region: "Thailand"
    sections: ["Data Protection Principles", "Data Subject Rights"]
    penalties: "THB 5M"
  
  PIPL_CN:
    enabled: true
    region: "China"
    articles:
      - "Art. 4 (Processing Principles)"
      - "Art. 13 (Consent)"
      - "Art. 38-43 (Cross-border Transfers)"
      - "Art. 51 (Sensitive Personal Information)"
    penalties: "CNY 50M or 5% revenue"
  
  APPI_JP:
    enabled: true
    region: "Japan"
    articles: ["Data Handling Principles", "Cross-border Transfers"]
    penalties: "JPY 100M"
  
  PIPA_KR:
    enabled: true
    region: "South Korea"
    articles: ["Data Protection Principles", "Sensitive Data"]
    penalties: "KRW 50M or 3% revenue"
  
  PDPA_ID:
    enabled: true
    region: "Indonesia"
    articles: ["Data Protection Principles", "Cross-border Transfers"]
    penalties: "IDR 6B or 6 years imprisonment"
  
  DPA_PH:
    enabled: true
    region: "Philippines"
    sections: ["Data Privacy Principles", "Security Measures"]
    penalties: "PHP 5M or 6 years imprisonment"
  
  PA_AU:
    enabled: true
    region: "Australia"
    principles: ["13 Australian Privacy Principles (APPs)"]
    penalties: "AUD 2.5M"
  
  PA_NZ:
    enabled: true
    region: "New Zealand"
    principles: ["13 Information Privacy Principles (IPPs)"]
    penalties: "NZD 10,000"
  
  # Middle East (4)
  PDPL_SA:
    enabled: true
    region: "Saudi Arabia"
    articles: ["Data Protection Principles", "Cross-border Transfers"]
    penalties: "SAR 3M"
  
  DIFC_DPL:
    enabled: true
    region: "Dubai (DIFC)"
    articles: ["GDPR-aligned principles"]
    penalties: "USD 500,000"
  
  PDPL_QA:
    enabled: true
    region: "Qatar"
    articles: ["Data Protection Principles", "Data Subject Rights"]
    penalties: "QAR 1M"
  
  DPL_IL:
    enabled: true
    region: "Israel"
    sections: ["Privacy Protection Principles"]
    penalties: "ILS 232,000"
  
  # ─────────────────────────────────────────────────────────────────────────
  # CATEGORY 2: SECURITY & COMPLIANCE STANDARDS (8 frameworks)
  # ─────────────────────────────────────────────────────────────────────────
  
  ISO_27001:
    enabled: true
    region: "Global"
    standard: "Information Security Management"
    controls:
      - "A.5 (Information Security Policies)"
      - "A.8 (Asset Management)"
      - "A.9 (Access Control)"
      - "A.12 (Operations Security)"
      - "A.14 (System Acquisition)"
      - "A.18 (Compliance)"
    certification_required: true
  
  ISO_27701:
    enabled: true
    region: "Global"
    standard: "Privacy Information Management"
    controls: ["Extension to ISO 27001 for privacy"]
    certification_required: true
  
  SOC_2:
    enabled: true
    region: "United States"
    standard: "Service Organization Control"
    criteria:
      - "Security"
      - "Availability"
      - "Processing Integrity"
      - "Confidentiality"
      - "Privacy"
    audit_frequency: "Annual"
  
  NIST_CSF:
    enabled: true
    region: "United States"
    standard: "Cybersecurity Framework"
    functions:
      - "Identify"
      - "Protect"
      - "Detect"
      - "Respond"
      - "Recover"
  
  NIST_800_53:
    enabled: true
    region: "United States"
    standard: "Security and Privacy Controls"
    control_families: ["18 control families"]
  
  PCI_DSS:
    enabled: true
    region: "Global"
    standard: "Payment Card Industry Data Security Standard"
    requirements: ["12 requirements for payment data"]
  
  FedRAMP:
    enabled: true
    region: "United States"
    standard: "Federal Risk and Authorization Management Program"
    levels: ["Low", "Moderate", "High"]
  
  HITRUST_CSF:
    enabled: true
    region: "Global"
    standard: "Health Information Trust Alliance Common Security Framework"
    controls: ["Unified healthcare security framework"]
  
  # ─────────────────────────────────────────────────────────────────────────
  # CATEGORY 3: HUMANITARIAN & HEALTH STANDARDS (6 frameworks)
  # ─────────────────────────────────────────────────────────────────────────
  
  WHO_IHR:
    enabled: true
    region: "Global"
    standard: "International Health Regulations (2005)"
    articles:
      - "Art. 6 (Notification)"
      - "Art. 7 (Information Sharing)"
      - "Art. 44 (Collaboration)"
    scope: "Public health emergencies of international concern"
  
  GENEVA_CONVENTION:
    enabled: true
    region: "Global"
    standard: "Geneva Conventions (1949) & Additional Protocols"
    articles:
      - "Art. 3 (Common Article 3 - Humanitarian Treatment)"
      - "Protocol I (International Armed Conflicts)"
      - "Protocol II (Non-International Armed Conflicts)"
    scope: "Protection of civilians and medical personnel"
  
  UN_HUMANITARIAN_PRINCIPLES:
    enabled: true
    region: "Global"
    standard: "UN Humanitarian Principles"
    principles:
      - "Humanity"
      - "Neutrality"
      - "Impartiality"
      - "Independence"
  
  SPHERE_STANDARDS:
    enabled: true
    region: "Global"
    standard: "Sphere Humanitarian Charter and Minimum Standards"
    sectors:
      - "Water Supply, Sanitation and Hygiene"
      - "Food Security and Nutrition"
      - "Shelter and Settlement"
      - "Health Action"
  
  ICRC_MEDICAL_ETHICS:
    enabled: true
    region: "Global"
    standard: "ICRC Health Care in Danger"
    principles: ["Medical neutrality", "Do no harm"]
  
  CHS:
    enabled: true
    region: "Global"
    standard: "Core Humanitarian Standard"
    commitments: ["9 commitments to quality and accountability"]

# ═══════════════════════════════════════════════════════════════════════════
# DATA SOVEREIGNTY RULES
# ═══════════════════════════════════════════════════════════════════════════

sovereignty:
  data_residency:
    enabled: true
    
    # Allowed zones by jurisdiction
    allowed_zones:
      KDPA_KE: ["africa-south1"]
      POPIA_ZA: ["africa-south1"]
      GDPR_EU: ["europe-west1", "europe-west2", "europe-west3"]
      HIPAA_US: ["us-central1", "us-east1", "us-west1"]
      PIPEDA_CA: ["northamerica-northeast1"]
      PIPL_CN: ["asia-east2"]  # Hong Kong only
    
    # Blocked zones (sovereignty violations)
    blocked_zones:
      - "asia-southeast1"  # Singapore (unless PDPA_SG authorized)
      - "australia-southeast1"  # Australia (unless PA_AU authorized)
      - "southamerica-east1"  # Brazil (unless LGPD_BR authorized)
    
    enforcement_level: "STRICT"  # STRICT | MODERATE | PERMISSIVE
  
  cross_border_transfers:
    enabled: true
    require_authorization: true
    
    # Standard Contractual Clauses (GDPR Art. 46)
    scc_required: true
    
    # Adequacy decisions
    adequacy_whitelist:
      GDPR_EU: ["UK", "Switzerland", "Canada", "Japan", "South Korea"]
      KDPA_KE: ["EAC Member States"]
      POPIA_ZA: ["SADC Member States"]

# ═══════════════════════════════════════════════════════════════════════════
# RIGHT TO EXPLANATION (AI/ML)
# ═══════════════════════════════════════════════════════════════════════════

explainability:
  enabled: true
  
  # EU AI Act compliance
  eu_ai_act:
    enabled: true
    risk_categories:
      UNACCEPTABLE: ["Social scoring", "Subliminal manipulation"]
      HIGH_RISK: ["Healthcare diagnosis", "Critical infrastructure"]
      LIMITED_RISK: ["Chatbots", "Emotion recognition"]
      MINIMAL_RISK: ["Spam filters", "Video games"]
    
    high_risk_requirements:
      - "Risk management system"
      - "Data governance"
      - "Technical documentation"
      - "Record keeping"
      - "Transparency"
      - "Human oversight"
      - "Accuracy, robustness, cybersecurity"
  
  # Explanation methods
  methods:
    - "SHAP"  # SHapley Additive exPlanations
    - "LIME"  # Local Interpretable Model-agnostic Explanations
    - "Feature_Importance"
    - "Counterfactual_Explanations"
    - "Attention_Weights"
  
  # Minimum requirements
  requirements:
    - "confidence_score"
    - "evidence_chain"
    - "feature_contributions"
    - "decision_rationale"
    - "model_version"
    - "training_data_provenance"

# ═══════════════════════════════════════════════════════════════════════════
# CONSENT MANAGEMENT
# ═══════════════════════════════════════════════════════════════════════════

consent:
  enabled: true
  require_explicit_consent: true
  
  # Valid consent scopes
  valid_scopes:
    - "diagnosis"
    - "treatment"
    - "research"
    - "public_health_surveillance"
    - "emergency_response"
    - "quality_improvement"
    - "training_education"
  
  # Consent expiration
  expiration_days: 365
  
  # Emergency override (WHO IHR Article 6)
  emergency_override:
    enabled: true
    conditions:
      - "public_health_emergency"
      - "outbreak_response"
      - "life_threatening_situation"
      - "natural_disaster"
    notification_required: true
    post_emergency_review: true

# ═══════════════════════════════════════════════════════════════════════════
# DATA RETENTION
# ═══════════════════════════════════════════════════════════════════════════

retention:
  enabled: true
  
  policies:
    HOT:
      days: 180
      description: "Active operational data"
      storage_class: "STANDARD"
      frameworks: ["All"]
    
    WARM:
      days: 365
      description: "Compliance minimum (HIPAA)"
      storage_class: "NEARLINE"
      frameworks: ["HIPAA_US", "HITECH_US"]
    
    COLD:
      days: 1825  # 5 years
      description: "Legal hold maximum (GDPR Art. 17)"
      storage_class: "COLDLINE"
      frameworks: ["GDPR_EU", "KDPA_KE", "POPIA_ZA"]
    
    ARCHIVE:
      days: 2555  # 7 years
      description: "HIPAA requirement"
      storage_class: "ARCHIVE"
      frameworks: ["HIPAA_US"]
    
    ETERNAL:
      days: -1
      description: "Never expires (requires explicit justification)"
      storage_class: "ARCHIVE"
      frameworks: []
  
  # Auto-shred expired keys (IP-02)
  auto_shred_enabled: true
  auto_shred_schedule: "0 2 * * *"  # Daily at 2 AM UTC

# ═══════════════════════════════════════════════════════════════════════════
# AUDIT TRAIL
# ═══════════════════════════════════════════════════════════════════════════

audit:
  enabled: true
  tamper_proof: true
  
  storage:
    backend: "Cloud_Spanner"
    region: "africa-south1"
    retention_days: 2555  # 7 years (HIPAA requirement)
    replication: "multi-region"
  
  signing:
    enabled: true
    algorithm: "SHA256_RSA"
    key_management: "Cloud_KMS"
    key_rotation_days: 90
  
  events:
    - "Data_Transfer"
    - "High_Risk_Inference"
    - "Consent_Validation"
    - "Data_Retention"
    - "Key_Shred"
    - "Sovereignty_Violation"
    - "Emergency_Override"
    - "Cross_Border_Transfer"
    - "Breach_Detection"
    - "Access_Control_Change"

# ═══════════════════════════════════════════════════════════════════════════
# HUMANITARIAN CONSTRAINTS
# ═══════════════════════════════════════════════════════════════════════════

humanitarian:
  enabled: true
  
  constraints:
    - "Medical_Ethics"
    - "Resource_Allocation"
    - "Data_Protection"
    - "Population_Protection"
    - "Emergency_Response"
    - "Conflict_Zone_Operations"
  
  margin_threshold: 0.15  # 15% humanitarian margin
  
  emergency_protocols:
    - "WHO_IHR_Article_6"
    - "Geneva_Convention_Article_3"
    - "UN_Humanitarian_Principles"
    - "Sphere_Standards"
    - "Core_Humanitarian_Standard"

# ═══════════════════════════════════════════════════════════════════════════
# ENFORCEMENT ACTIONS
# ═══════════════════════════════════════════════════════════════════════════

enforcement:
  on_violation:
    action: "BLOCK"  # BLOCK | WARN | LOG
    notify: true
    escalate: true
    log_to_audit: true
  
  notifications:
    - type: "Email"
      recipients:
        - "compliance@iluminara.health"
        - "dpo@iluminara.health"
        - "ciso@iluminara.health"
    
    - type: "PubSub"
      topic: "projects/iluminara/topics/sovereignty-violations"
    
    - type: "Slack"
      webhook: "${SLACK_WEBHOOK_URL}"
      channel: "#fortress-alerts"
    
    - type: "PagerDuty"
      integration_key: "${PAGERDUTY_KEY}"
      severity: "critical"
  
  escalation:
    enabled: true
    threshold: 3
    window_minutes: 60
    escalate_to:
      - "Chief Compliance Officer"
      - "Data Protection Officer"
      - "Chief Information Security Officer"
      - "Legal Counsel"

# ═══════════════════════════════════════════════════════════════════════════
# MONITORING & ALERTING
# ═══════════════════════════════════════════════════════════════════════════

monitoring:
  enabled: true
  
  metrics:
    - "sovereignty_violations_total"
    - "cross_border_transfers_total"
    - "high_risk_inferences_total"
    - "consent_validations_total"
    - "keys_shredded_total"
    - "breach_detections_total"
    - "emergency_overrides_total"
    - "framework_compliance_score"
  
  prometheus:
    enabled: true
    port: 9090
    path: "/metrics"
  
  grafana:
    enabled: true
    dashboards:
      - "47 Framework Compliance Matrix"
      - "Sovereignty Violations"
      - "Audit Trail"
      - "Data Retention"
      - "AI/ML Explainability"
      - "Humanitarian Constraints"

# ═══════════════════════════════════════════════════════════════════════════
# NUCLEAR IP STACK INTEGRATION
# ═══════════════════════════════════════════════════════════════════════════

nuclear_ip:
  IP_02_CRYPTO_SHREDDER:
    enabled: true
    auto_shred: true
    retention_policies: ["HOT", "WARM", "COLD", "ARCHIVE"]
  
  IP_03_ACORN_PROTOCOL:
    enabled: false  # Requires hardware attestation
    somatic_factors: ["posture", "location", "stillness"]
  
  IP_04_SILENT_FLUX:
    enabled: false  # Requires anxiety monitoring
    anxiety_threshold: 0.7
  
  IP_05_GOLDEN_THREAD:
    enabled: true
    verification_threshold: 0.8
    data_streams: ["CBS", "EMR", "IDSR"]
  
  IP_06_5DM_BRIDGE:
    enabled: false  # Requires mobile network integration
    target_nodes: 14000000  # 14M+ African mobile nodes

# ═══════════════════════════════════════════════════════════════════════════
# DEVELOPMENT & TESTING
# ═══════════════════════════════════════════════════════════════════════════

development:
  relaxed_mode: false
  mock_services:
    enabled: false
  test_jurisdiction: "GLOBAL_DEFAULT"
  
  # Framework testing
  test_frameworks:
    - "GDPR_EU"
    - "KDPA_KE"
    - "HIPAA_US"
    - "POPIA_ZA"
  
  # Compliance simulation
  simulate_violations: false
  simulate_breaches: false
