---
title: Implementation guide
description: How to deploy the Sovereign Health Fortress security stack to your iLuminara-Core repository
---

## Overview

This guide shows you how to implement all the security and integration components created for your iLuminara-Core repository.

All files have been generated in the `repository-files/` directory. You need to copy them to your actual repository.

## Step 1: Copy repository files

All the files you need are in the `repository-files/` directory:

```bash
# From your iLuminara-Core repository root
cp -r /path/to/docs/repository-files/.github .
cp -r /path/to/docs/repository-files/governance_kernel/crypto_shredder.py governance_kernel/
cp -r /path/to/docs/repository-files/config/sovereign_guardrail.yaml config/
cp -r /path/to/docs/repository-files/scripts/validate_fortress.sh scripts/
chmod +x scripts/validate_fortress.sh
```

## Step 2: Enable GitHub workflows

The security workflows require specific permissions:

```bash
# Authenticate with GitHub CLI
gh auth refresh -s workflow,repo,write:packages,admin:repo_hook

# Enable branch protection on main
gh api repos/VISENDI56/iLuminara-Core/branches/main/protection \
  --method PUT \
  --field required_status_checks='{"strict":true,"contexts":["CodeQL","Gitleaks"]}' \
  --field enforce_admins=true \
  --field required_pull_request_reviews='{"required_approving_review_count":1}'
```

## Step 3: Commit and push

```bash
git add .
git commit -m "feat: integrate SovereignGuardrail and Nuclear IP security stack"
git push
```

## Step 4: Validate the fortress

Run the validation script to ensure everything is operational:

```bash
./scripts/validate_fortress.sh
```

Expected output:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     iLuminara-Core Sovereign Health Fortress Validator     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ›¡ï¸  FORTRESS STATUS: OPERATIONAL
âœ“  All critical components validated
âœ“  Security audit layer active
âœ“  Governance kernel operational
âœ“  Nuclear IP stack initialized

The Sovereign Health Fortress is ready for deployment.
```

## Files created

### Security workflows

| File | Purpose |
|------|---------|
| `.github/workflows/codeql.yml` | SAST security scanning (weekly + on push) |
| `.github/workflows/gitleaks.yml` | Secret detection (daily + on push) |
| `.github/dependabot.yml` | Daily security updates |
| `.gitleaks.toml` | Secret detection rules |

### Governance kernel

| File | Purpose |
|------|---------|
| `governance_kernel/crypto_shredder.py` | IP-02: Cryptographic data dissolution |
| `config/sovereign_guardrail.yaml` | 14 global legal frameworks configuration |

### Scripts

| File | Purpose |
|------|---------|
| `scripts/validate_fortress.sh` | Complete fortress validation |

## Integration with existing code

### Using Crypto Shredder

```python
from governance_kernel.crypto_shredder import CryptoShredder, RetentionPolicy, SovereigntyZone

# Initialize
shredder = CryptoShredder(
    sovereignty_zone=SovereigntyZone.KENYA,
    enable_audit=True
)

# Encrypt patient data
encrypted_data, key_id = shredder.encrypt_with_ephemeral_key(
    data=patient_record.encode(),
    retention_policy=RetentionPolicy.HOT,
    metadata={"patient_id": "12345", "jurisdiction": "KDPA_KE"}
)

# Store encrypted_data in your database
# Store key_id for later retrieval

# Decrypt when needed
decrypted_data = shredder.decrypt_with_key(encrypted_data, key_id)

# Auto-shred expired keys (run daily)
shredder.auto_shred_expired_keys()
```

### Loading SovereignGuardrail config

```python
import yaml
from governance_kernel.vector_ledger import SovereignGuardrail

# Load configuration
with open('config/sovereign_guardrail.yaml', 'r') as f:
    config = yaml.safe_load(f)

# Initialize with config
guardrail = SovereignGuardrail(
    jurisdiction=config['jurisdiction']['primary'],
    enable_tamper_proof_audit=config['audit']['enabled']
)
```

## Environment variables

Set these in your environment:

```bash
# Node identification
export NODE_ID=JOR-47
export JURISDICTION=KDPA_KE

# API configuration
export API_HOST=0.0.0.0
export API_PORT=8080

# GCP configuration
export GOOGLE_CLOUD_PROJECT=your-project-id
export GCP_REGION=us-central1

# Governance
export ENABLE_TAMPER_PROOF_AUDIT=true
export RETENTION_MAX_DAYS=1825

# AI Agents
export ENABLE_OFFLINE_MODE=true
export FEDERATED_LEARNING_EPSILON=1.0
```

## Verification checklist

<Steps>
  <Step title="Security workflows">
    âœ“ CodeQL workflow runs on push
    âœ“ Gitleaks workflow runs daily
    âœ“ Dependabot creates PRs for updates
  </Step>
  <Step title="Governance kernel">
    âœ“ Crypto Shredder encrypts/decrypts data
    âœ“ SovereignGuardrail blocks violations
    âœ“ Audit trail is tamper-proof
  </Step>
  <Step title="Validation">
    âœ“ `validate_fortress.sh` shows OPERATIONAL
    âœ“ All components pass validation
  </Step>
  <Step title="Integration">
    âœ“ API uses Crypto Shredder for PHI
    âœ“ AI Agents respect sovereignty rules
    âœ“ Dashboard shows compliance status
  </Step>
</Steps>

## Troubleshooting

### CodeQL workflow fails

**Issue:** CodeQL analysis fails with "No code to analyze"

**Solution:** Ensure you have Python and JavaScript files in your repository.

### Gitleaks detects false positives

**Issue:** Gitleaks flags test data as secrets

**Solution:** Add patterns to `.gitleaks.toml` allowlist:

```toml
[allowlist]
regexes = [
  '''test_key_12345''',
  '''example_token''',
]
```

### Crypto Shredder key not found

**Issue:** `decrypt_with_key()` returns None

**Solution:** Check if key was auto-shredded due to expiration:

```python
status = shredder.get_key_status(key_id)
if status and status['shredded']:
    print("Key was shredded - data irrecoverable")
```

### Validation script shows COMPROMISED

**Issue:** `validate_fortress.sh` reports missing components

**Solution:** Install missing dependencies:

```bash
pip install -r requirements.txt
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Security documentation"
    icon="shield-halved"
    href="/security/overview"
  >
    Read the complete security stack documentation
  </Card>
  <Card
    title="Governance kernel"
    icon="shield-check"
    href="/governance/overview"
  >
    Configure compliance for your jurisdiction
  </Card>
  <Card
    title="Deploy to GCP"
    icon="google"
    href="/deployment/gcp"
  >
    Deploy the fortress to production
  </Card>
  <Card
    title="API integration"
    icon="terminal"
    href="/api-reference/overview"
  >
    Integrate with your applications
  </Card>
</CardGroup>

## Support

If you encounter issues:

1. Run `./scripts/validate_fortress.sh` for diagnostics
2. Check GitHub Actions logs for workflow failures
3. Review audit logs in `keys/audit.jsonl`
4. Verify environment variables are set correctly

The Sovereign Health Fortress is now operational. ğŸ›¡ï¸
