---
title: Implementation guide
description: Deploy the Sovereign Health Fortress to your iLuminara-Core repository
---

## Overview

This guide walks you through implementing the complete **Sovereign Health Fortress** security stack in your iLuminara-Core repository.

All necessary files have been created in the `repository-files/` directory of this documentation repository. You'll copy them to your main repository.

## Prerequisites

1. **GitHub repository access** with write permissions
2. **GitHub CLI** installed and authenticated
3. **Python 3.8+** installed
4. **Git** configured

## Step 1: Authenticate GitHub CLI

Elevate your GitHub CLI permissions to enable workflow and security settings:

```bash
gh auth refresh -s workflow,repo,write:packages,admin:repo_hook
```

## Step 2: Copy repository files

All implementation files are in the `repository-files/` directory. Copy them to your iLuminara-Core repository:

### Security workflows

```bash
# From your iLuminara-Core repository root
mkdir -p .github/workflows

# Copy CodeQL workflow
cp /path/to/docs/repository-files/.github/workflows/codeql.yml .github/workflows/

# Copy Gitleaks workflow
cp /path/to/docs/repository-files/.github/workflows/gitleaks.yml .github/workflows/

# Copy Gitleaks config
cp /path/to/docs/repository-files/.gitleaks.toml .

# Copy Dependabot config
cp /path/to/docs/repository-files/.github/dependabot.yml .github/
```

### Governance kernel

```bash
# Copy Crypto Shredder (IP-02)
cp /path/to/docs/repository-files/governance_kernel/crypto_shredder.py governance_kernel/

# Copy SovereignGuardrail config
mkdir -p config
cp /path/to/docs/repository-files/config/sovereign_guardrail.yaml config/
```

### Validation script

```bash
# Copy fortress validation script
mkdir -p scripts
cp /path/to/docs/repository-files/scripts/validate_fortress.sh scripts/
chmod +x scripts/validate_fortress.sh
```

## Step 3: Install dependencies

Add required dependencies to your `requirements.txt`:

```txt
# Crypto Shredder dependencies
cryptography>=41.0.0

# Existing dependencies
flask>=2.3.0
flask-cors>=4.0.0
streamlit>=1.28.0
pandas>=2.0.0
pydeck>=0.8.0
numpy>=1.24.0
google-cloud-bigquery>=3.11.0
google-cloud-spanner>=3.40.0
google-cloud-kms>=2.19.0
```

Install dependencies:

```bash
pip install -r requirements.txt
```

## Step 4: Configure environment

Set up environment variables:

```bash
# Node identification
export NODE_ID=JOR-47
export JURISDICTION=KDPA_KE

# API configuration
export API_HOST=0.0.0.0
export API_PORT=8080

# GCP configuration (if using cloud)
export GOOGLE_CLOUD_PROJECT=your-project-id
export GCP_REGION=us-central1

# Governance configuration
export ENABLE_TAMPER_PROOF_AUDIT=true
export RETENTION_MAX_DAYS=1825
export DATA_SOVEREIGNTY_REQUIRED=true
```

Add to your `.bashrc` or `.zshrc` for persistence:

```bash
echo 'export NODE_ID=JOR-47' >> ~/.bashrc
echo 'export JURISDICTION=KDPA_KE' >> ~/.bashrc
source ~/.bashrc
```

## Step 5: Commit and push

Commit all changes to your repository:

```bash
git add .
git commit -m "feat: integrate SovereignGuardrail and Nuclear IP security stack

- Add CodeQL SAST scanning workflow
- Add Gitleaks secret detection workflow
- Implement IP-02 Crypto Shredder
- Add SovereignGuardrail configuration
- Configure Dependabot for daily security updates
- Add fortress validation script

Compliance: GDPR Art. 32, HIPAA ¬ß164.312, ISO 27001 A.12.6"

git push origin main
```

## Step 6: Enable branch protection

Protect your main branch with required status checks:

```bash
# Enable branch protection
gh api repos/:owner/:repo/branches/main/protection \
  --method PUT \
  --field required_status_checks[strict]=true \
  --field required_status_checks[contexts][]=CodeQL \
  --field required_status_checks[contexts][]=Gitleaks \
  --field required_pull_request_reviews[required_approving_review_count]=1 \
  --field enforce_admins=true \
  --field restrictions=null
```

Or configure via GitHub UI:
1. Go to **Settings** ‚Üí **Branches**
2. Add rule for `main` branch
3. Enable:
   - ‚úÖ Require pull request reviews
   - ‚úÖ Require status checks (CodeQL, Gitleaks)
   - ‚úÖ Require branches to be up to date

## Step 7: Validate the fortress

Run the validation script to ensure everything is configured correctly:

```bash
./scripts/validate_fortress.sh
```

Expected output:

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë     iLuminara-Core Sovereign Health Fortress Validator     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
PHASE 1: Security Audit Layer
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üîç Checking .github/workflows/codeql.yml... ‚úì OPERATIONAL
   ‚îî‚îÄ SAST security scanning (GDPR Art. 32, ISO 27001 A.12.6)

üîç Checking .github/workflows/gitleaks.yml... ‚úì OPERATIONAL
   ‚îî‚îÄ Secret scanning (NIST SP 800-53 IA-5)

...

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    VALIDATION SUMMARY                      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üõ°Ô∏è  FORTRESS STATUS: OPERATIONAL
‚úì  All critical components validated
‚úì  Security audit layer active
‚úì  Governance kernel operational
‚úì  Nuclear IP stack initialized

The Sovereign Health Fortress is ready for deployment.
```

## Step 8: Test Crypto Shredder

Test the IP-02 Crypto Shredder implementation:

```python
from governance_kernel.crypto_shredder import CryptoShredder, RetentionPolicy, SovereigntyZone

# Initialize
shredder = CryptoShredder(
    sovereignty_zone=SovereigntyZone.KENYA,
    enable_audit=True
)

# Encrypt test data
test_data = b"Test patient data"
encrypted, key_id = shredder.encrypt_with_ephemeral_key(
    data=test_data,
    retention_policy=RetentionPolicy.HOT,
    metadata={"test": True}
)

print(f"‚úÖ Encrypted - Key ID: {key_id}")

# Decrypt
decrypted = shredder.decrypt_with_key(encrypted, key_id)
print(f"‚úÖ Decrypted: {decrypted.decode()}")

# Shred
shredder.shred_key(key_id)
print(f"üî• Key shredded")

# Try to decrypt after shredding
result = shredder.decrypt_with_key(encrypted, key_id)
print(f"‚ùå After shred: {result}")  # None
```

## Step 9: Configure GitHub secrets

Add required secrets to your repository:

```bash
# Add Gitleaks license (if you have one)
gh secret set GITLEAKS_LICENSE --body "your-license-key"

# Add Slack webhook for notifications (optional)
gh secret set SLACK_WEBHOOK_URL --body "https://hooks.slack.com/services/..."

# Add GCP service account key (for cloud deployment)
gh secret set GCP_SERVICE_ACCOUNT_KEY --body "$(cat service-account-key.json)"
```

## Step 10: Verify security workflows

Trigger the security workflows manually to verify they work:

```bash
# Trigger CodeQL scan
gh workflow run codeql.yml

# Trigger Gitleaks scan
gh workflow run gitleaks.yml

# Check workflow status
gh run list --workflow=codeql.yml
gh run list --workflow=gitleaks.yml
```

## Architecture verification

Your repository should now have this structure:

```
iLuminara-Core/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ codeql.yml          ‚úÖ SAST scanning
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gitleaks.yml        ‚úÖ Secret detection
‚îÇ   ‚îî‚îÄ‚îÄ dependabot.yml          ‚úÖ Daily security updates
‚îú‚îÄ‚îÄ .gitleaks.toml              ‚úÖ Secret detection rules
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ sovereign_guardrail.yaml ‚úÖ Compliance configuration
‚îú‚îÄ‚îÄ governance_kernel/
‚îÇ   ‚îú‚îÄ‚îÄ vector_ledger.py        ‚úÖ SovereignGuardrail
‚îÇ   ‚îú‚îÄ‚îÄ crypto_shredder.py      ‚úÖ IP-02 implementation
‚îÇ   ‚îî‚îÄ‚îÄ ethical_engine.py       ‚úÖ Humanitarian constraints
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ validate_fortress.sh    ‚úÖ Fortress validation
‚îî‚îÄ‚îÄ edge_node/
    ‚îú‚îÄ‚îÄ frenasa_engine/         ‚úÖ Voice processing
    ‚îú‚îÄ‚îÄ ai_agents/              ‚úÖ Autonomous surveillance
    ‚îî‚îÄ‚îÄ sync_protocol/          ‚úÖ Golden Thread (IP-05)
```

## Nuclear IP Stack status

After implementation, your Nuclear IP Stack status:

| IP | Name | Status | Notes |
|----|------|--------|-------|
| **IP-02** | Crypto Shredder | ‚úÖ **ACTIVE** | Data dissolution implemented |
| **IP-03** | Acorn Protocol | ‚ö†Ô∏è **REQUIRES HARDWARE** | TPM attestation needed |
| **IP-04** | Silent Flux | ‚ö†Ô∏è **REQUIRES INTEGRATION** | Anxiety monitoring needed |
| **IP-05** | Golden Thread | ‚úÖ **ACTIVE** | Data fusion operational |
| **IP-06** | 5DM Bridge | ‚ö†Ô∏è **REQUIRES MOBILE NETWORK** | API injection pending |

## Troubleshooting

### CodeQL workflow fails

**Issue:** CodeQL analysis fails with "No code to analyze"

**Solution:** Ensure you have Python and JavaScript code in your repository. Check `.github/workflows/codeql.yml` language matrix.

### Gitleaks finds false positives

**Issue:** Gitleaks flags test data or examples as secrets

**Solution:** Add patterns to `.gitleaks.toml` allowlist:

```toml
[allowlist]
paths = [
  '''.*_test\.py''',
  '''.*\.example''',
]
```

### Crypto Shredder import error

**Issue:** `ModuleNotFoundError: No module named 'cryptography'`

**Solution:** Install dependencies:

```bash
pip install cryptography>=41.0.0
```

### Validation script fails

**Issue:** `./scripts/validate_fortress.sh: Permission denied`

**Solution:** Make script executable:

```bash
chmod +x scripts/validate_fortress.sh
```

## Next steps

<CardGroup cols={2}>
  <Card
    title="Deploy to GCP"
    icon="google"
    href="/deployment/gcp"
  >
    Deploy the Fortress to Google Cloud Platform
  </Card>
  <Card
    title="Configure monitoring"
    icon="chart-line"
    href="/deployment/monitoring"
  >
    Set up Prometheus and Grafana dashboards
  </Card>
  <Card
    title="Test AI agents"
    icon="brain-circuit"
    href="/ai-agents/overview"
  >
    Deploy autonomous surveillance agents
  </Card>
  <Card
    title="Security workflows"
    icon="workflow"
    href="/security/workflows"
  >
    Deep dive into security automation
  </Card>
</CardGroup>

## Support

If you encounter issues during implementation:

1. **Check validation output**: `./scripts/validate_fortress.sh`
2. **Review workflow logs**: `gh run list` and `gh run view <run-id>`
3. **Verify environment**: Ensure all environment variables are set
4. **Check dependencies**: `pip list | grep -E "cryptography|flask|streamlit"`

The Sovereign Health Fortress is now operational. üõ°Ô∏è
